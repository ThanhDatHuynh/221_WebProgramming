{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js!/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminUser.vue","mtime":1655228932566},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgJCBmcm9tICJqcXVlcnkiOwppbXBvcnQgQWRtaW5JdGVtIGZyb20gIi4uL2NvbXBvbmVudHMvQWRtaW5JdGVtLnZ1ZSI7CmltcG9ydCBNb2RhbENvbmZpcm0gZnJvbSAiLi4vY29tcG9uZW50cy9Nb2RhbENvbmZpcm0udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJhZG1pblVzZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIEFkbWluSXRlbTogQWRtaW5JdGVtLAogICAgTW9kYWxDb25maXJtOiBNb2RhbENvbmZpcm0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0RlbGV0ZU1vZGFsT3BlbjogZmFsc2UsCiAgICAgIGlzQmxvY2tNb2RhbE9wZW46IGZhbHNlLAogICAgICBpZFVzZXI6IDAsCiAgICAgIGlkVXNlckJsb2NrOiAwLAogICAgICB1c2VyczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyByZWxvYWRQYWdlKCkgewogICAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIC8vICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FkbWluL3VzZXIiKTsKICAgIC8vIH0sCiAgICB0b2dnbGVEZWxldGVCdG46IGZ1bmN0aW9uIHRvZ2dsZURlbGV0ZUJ0bihpZCkgewogICAgICB0aGlzLmlzRGVsZXRlTW9kYWxPcGVuID0gIXRoaXMuaXNEZWxldGVNb2RhbE9wZW47CiAgICAgIHRoaXMuaWRVc2VyID0gaWQ7CiAgICB9LAogICAgdG9nZ2xlQmxvY2tCdG46IGZ1bmN0aW9uIHRvZ2dsZUJsb2NrQnRuKGlkKSB7CiAgICAgIHRoaXMuaXNCbG9ja01vZGFsT3BlbiA9ICF0aGlzLmlzQmxvY2tNb2RhbE9wZW47CiAgICAgIHRoaXMuaWRVc2VyQmxvY2sgPSBpZDsKICAgIH0sCiAgICBibG9ja1VzZXI6IGZ1bmN0aW9uIGJsb2NrVXNlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciByZXN0VVJMID0gdGhpcy51c2Vyc1twYXJzZUludCh0aGlzLmlkVXNlckJsb2NrKSAtIDFdLmJsb2NrID8gInVuYmxvY2tfdXNlciIgOiAiYmxvY2tfdXNlciI7CiAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICB1cmw6ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkwsICIvYWRtaW4vIikuY29uY2F0KHJlc3RVUkwpLAogICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgZGF0YTogewogICAgICAgICAgZW1haWw6IHRoaXMudXNlcnNbcGFyc2VJbnQodGhpcy5pZFVzZXJCbG9jaykgLSAxXS5lbWFpbAogICAgICAgIH0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkJlYXItVG9rZW4iOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlclRva2VuIikKICAgICAgICB9CiAgICAgIH07CiAgICAgICQuYWpheChzZXR0aW5ncykuZG9uZShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuJHJvdXRlci5nbyhfdGhpcy4kcm91dGVyLmN1cnJlbnQpOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVVc2VyOiBmdW5jdGlvbiBkZWxldGVVc2VyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICB1cmw6ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkwsICIvYWRtaW4vZGVsZXRlX3VzZXIveyIpLmNvbmNhdCh0aGlzLmlkVXNlciwgIn0iKSwKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICB0aW1lb3V0OiAwLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJCZWFyLVRva2VuIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXJUb2tlbiIpCiAgICAgICAgfQogICAgICB9OwogICAgICAkLmFqYXgoc2V0dGluZ3MpLmRvbmUoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kcm91dGVyLmdvKF90aGlzMi4kcm91dGVyLmN1cnJlbnQpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRVc2VyOiBmdW5jdGlvbiBnZXRVc2VyKCkgewogICAgICB2YXIgX190aGlzID0gdGhpczsKCiAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICB1cmw6ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkwsICIvYWRtaW4vZ2V0X2Jsb2NrX3VzZXJzIiksCiAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICB0aW1lb3V0OiAwLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJCZWFyLVRva2VuIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXJUb2tlbiIpCiAgICAgICAgfQogICAgICB9OwogICAgICB2YXIgYmxvY2tVc2VycyA9IFtdOwogICAgICAkLmFqYXgoc2V0dGluZ3MpLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgYmxvY2tVc2VycyA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOwogICAgICAgIHNldHRpbmdzID0gewogICAgICAgICAgdXJsOiAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMLCAiL2FkbWluL3VzZXJzIiksCiAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgdGltZW91dDogMCwKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgIkJlYXItVG9rZW4iOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlclRva2VuIikKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgICQuYWpheChzZXR0aW5ncykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciBhID0gSlNPTi5wYXJzZShyZXNwb25zZSkucmVzcG9uc2U7CiAgICAgICAgICBhLmZvckVhY2goZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgaWYgKEFycmF5KGJsb2NrVXNlcnMpLmZpbmQoZnVuY3Rpb24gKGJsb2NrVXNlcikgewogICAgICAgICAgICAgIHJldHVybiB1c2VyLmVtYWlsID09IGJsb2NrVXNlcjsKICAgICAgICAgICAgfSkgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdXNlci5ibG9jayA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdXNlci5ibG9jayA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIF9fdGhpcy51c2VycyA9IGE7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5nZXRVc2VyKCk7CiAgfQp9Ow=="},{"version":3,"sources":["AdminUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div style=\"min-height:60%;\">\n        <div class=\"d-flex flex-wrap justify-center\">\n            <AdminItem type=\"UserHeader\" :width=\"'100vw'\" :height=\"'100px'\" :imgSize=\"'70px'\"\n                :items=\"['ID', 'Name', 'Email', 'Phone', 'Manager']\" />\n        </div>\n        <div class=\"d-flex flex-wrap justify-center\">\n            <div v-for=\"user in users\" :key=\"user.id\">\n                <AdminItem type=\"User\" :width=\"'100vw'\" :height=\"'100px'\" :imgSize=\"'70px'\"\n                    :items=\"[user.id, user.username, user.email, user.phoneNumber, user.manager, user.block]\"\n                    @onSubmit=\"toggleDeleteBtn(user.id)\" @onBlock=\"toggleBlockBtn(user.id)\" />\n            </div>\n        </div>\n        <ModalConfirm @toggleModalEvent=\"toggleDeleteBtn()\" :isOpen=\"this.isDeleteModalOpen\" :title=\"'Are you sure ?'\"\n            :content=\"'Do you want to delete this user ?'\" @callbackEvent=\"deleteUser\" />\n\n        <ModalConfirm @toggleModalEvent=\"toggleBlockBtn()\" :isOpen=\"this.isBlockModalOpen\" :title=\"'Are you sure ?'\"\n            :content=\"'Do you want to block this user ?'\" @callbackEvent=\"blockUser\" />\n    </div>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport AdminItem from \"../components/AdminItem.vue\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\nexport default {\n    name: \"adminUser\",\n    components: {\n        AdminItem,\n        ModalConfirm,\n    },\n    data() {\n        return {\n            isDeleteModalOpen: false,\n            isBlockModalOpen: false,\n            idUser: 0,\n            idUserBlock: 0,\n            users: [],\n        };\n    },\n    methods: {\n        // reloadPage() {\n        //     window.location.reload();\n        //     window.location.replace(\"http://localhost:8080/admin/user\");\n        // },\n\n        toggleDeleteBtn(id) {\n            this.isDeleteModalOpen = !this.isDeleteModalOpen;\n            this.idUser = id;\n        },\n\n        toggleBlockBtn(id) {\n            this.isBlockModalOpen = !this.isBlockModalOpen;\n            this.idUserBlock = id;\n        },\n\n        blockUser() {\n            var restURL = this.users[parseInt(this.idUserBlock) - 1].block ? \"unblock_user\" : \"block_user\";\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/${restURL}`,\n                method: \"POST\",\n                timeout: 0,\n                data: {\n                    email: this.users[parseInt(this.idUserBlock) - 1].email\n                },\n                headers: {\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                },\n            };\n            $.ajax(settings)\n                .done(() => {\n                    this.$router.go(this.$router.current);\n            });\n        },\n        deleteUser() {\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/delete_user/{${this.idUser}}`,\n                method: \"POST\",\n                timeout: 0,\n                headers: {\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                },\n            };\n\n            $.ajax(settings)\n                .done(() => {\n                    this.$router.go(this.$router.current)\n                })\n        },\n\n        getUser() {\n            const __this = this;\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/get_block_users`,\n                method: \"GET\",\n                timeout: 0,\n                headers: {\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                },\n            };\n            var blockUsers = [];\n            $.ajax(settings).done(function (response) {\n                blockUsers = JSON.parse(response).response;\n                settings = {\n                    url: `${process.env.VUE_APP_API_URL}/admin/users`,\n                    method: \"GET\",\n                    timeout: 0,\n                    headers: {\n                        \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                    },\n                };\n                $.ajax(settings)\n                    .done(function (response) {\n                        const a = JSON.parse(response).response;\n                        a.forEach(user => {\n                            if (Array(blockUsers).find(blockUser => user.email == blockUser) != undefined) {\n                                user.block = true;\n                            } else {\n                                user.block = false;\n                            }\n                        });\n                        __this.users = a;\n\n\n                    })\n            });\n\n\n        },\n    },\n    beforeMount() {\n        this.getUser();\n    },\n}\n</script>"],"sourceRoot":"src/pages"}]}