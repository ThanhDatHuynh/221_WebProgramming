{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/CartPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/CartPage.vue","mtime":1655258243209},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCdXR0b24gZnJvbSAiLi4vY29tcG9uZW50cy9CdXR0b24iOwoKaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsKLy8gaW1wb3J0IERpc2ggZnJvbSAiLi4vY29tcG9uZW50cy9EaXNoLnZ1ZSI7Ci8vIGltcG9ydCBCdXR0b24gZnJvbSAiLi4vY29tcG9uZW50cy9CdXR0b24udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIk1lbnVEZXRhaWxQYWdlIiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBCdXR0b24sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBkYXRhOiB7fSwKICAgICAgICB9OwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBnZXREYXRhKCkgewogICAgICAgICAgICBjb25zdCBfX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vbWVudWAsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgdGltZW91dDogMCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKQogICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKS5yZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICBfX3RoaXMuZGF0YSA9IGEuZmlsdGVyKChmb29kKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX3RoaXMuY2FydFtmb29kLmlkXSAmJiBfX3RoaXMuY2FydFtmb29kLmlkXSA+IDA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICBfX3RoaXMubG9jYWxDYXJ0ID0gX190aGlzLmNhcnQ7CiAgICAgICAgfSwKICAgICAgICBkZWNyRm9vZFF1YW50aXR5KGtleSkgewogICAgICAgICAgICBsZXQgY3VycmVudENhcnQgPSB0aGlzLmNhcnQ7CiAgICAgICAgICAgIGlmIChjdXJyZW50Q2FydFtrZXldID4gMCkgewogICAgICAgICAgICAgICAgLS1jdXJyZW50Q2FydFtrZXldOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDYXJ0W2tleV0gPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJyZW50Q2FydFtrZXldOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIoKGZvb2QpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFtmb29kLmlkXSAmJiB0aGlzLmNhcnRbZm9vZC5pZF0gPiAwOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYXJ0KGN1cnJlbnRDYXJ0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKICAgICAgICBpbmNyRm9vZFF1YW50aXR5KGtleSkgewogICAgICAgICAgICBsZXQgY3VycmVudENhcnQgPSB0aGlzLmNhcnQ7CiAgICAgICAgICAgICsrY3VycmVudENhcnRba2V5XTsKICAgICAgICAgICAgdGhpcy51cGRhdGVDYXJ0KGN1cnJlbnRDYXJ0KTsKICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uQ2xvc2VNb2RhbCgpIHsKICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5yZXNldENhcnQoKTsgLy8gRmx1c2gKICAgICAgICAgICAgdGhpcy4kdm0yLmNsb3NlKCdtb2RhbC0yJyk7CiAgICAgICAgICAgIGxldCBjdXJyZW50Q2FydCA9IHRoaXMuY2FydDsKICAgICAgICAgICAgZm9yICh2YXIgZW50cnkgaW4gY3VycmVudENhcnQpIGRlbGV0ZSBjdXJyZW50Q2FydFtlbnRyeV07CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FydChjdXJyZW50Q2FydCk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWVudSIpOwogICAgICAgIH0KICAgIH0sCiAgICBpbmplY3Q6IFsnY2FydCcsICd1cGRhdGVDYXJ0JywgJ3Jlc2V0Q2FydCddLAogICAgYmVmb3JlTW91bnQoKSB7CiAgICAgICAgdGhpcy5nZXREYXRhKCk7CiAgICB9LAp9Owo="},{"version":3,"sources":["CartPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div class=\"container\" style=\"min-height:60vh\">\n        <div class=\"title-wrapper\">\n            <div class=\"menu-title\">\n                <p>Your Cart</p>\n            </div>\n        </div>\n        <div v-if=\"data.length > 0\">\n            <div>\n                <div v-for=\"food in this.data\" :key=\"food.id\" class=\"row align-items-center justify-center rounded\"\n                    :v-show=\"cart[food.id] && cart[food.id] >= 0\" style=\"background-color:#f2f2f2; margin:5px\">\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ food.name }}</div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\"><img :src=\"food.image\"\n                            style=\"max-width:100px; border-radius:5px\" /></div>\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\n                        <button @click=\"() => decrFoodQuantity(food.id)\">\n                            <font-awesome-icon icon=\"fa-solid fa-circle-minus\" />\n                        </button>\n                    </div>\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\n                        {{ cart[food.id] }}\n                    </div>\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\n                        <button @click=\"() => incrFoodQuantity(food.id)\">\n                            <font-awesome-icon icon=\"fa-solid fa-circle-plus\" />\n                        </button>\n                    </div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ food.price *\n                    cart[food.id]\n                    }} $</div>\n                </div>\n            </div>\n            <div>\n                <div class=\"row align-items-center justify-center rounded\" style=\"background-color:#f2f2f2; margin:5px\">\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\">Total:\n                    </div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\"></div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\"></div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\">{{\n                    data.reduce((result,\n                    food) => result + (food.price * cart[food.id]), 0)\n                    }}$</div>\n                </div>\n            </div>\n            <div class=\"btn-wrapper d-flex flex-wrap justify-center\">\n                <Button @onClick=\"$vm2.open('modal-2')\" text=\"Order\" width=\"148px\" height=\"53px\" />\n            </div>\n            <modal-vue @on-close=\"onCloseModal\" name=\"modal-2\" :headerOptions=\"{\n                title: 'Notification',\n            }\" noFooter>\n                <p class=\"text-center\">Order successfully!</p>\n            </modal-vue>\n        </div>\n        <div v-else>\n            <div class=\"title-wrapper\">\n                <div class=\"menu-title\">\n                    <p>Please choose some food!</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport Button from \"../components/Button\";\n\nimport $ from \"jquery\";\n// import Dish from \"../components/Dish.vue\";\n// import Button from \"../components/Button.vue\";\nexport default {\n    name: \"MenuDetailPage\",\n    components: {\n        Button,\n    },\n    data() {\n        return {\n            data: {},\n        };\n    },\n    methods: {\n        getData() {\n            const __this = this;\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/menu`,\n                method: \"GET\",\n                timeout: 0,\n            };\n            $.ajax(settings)\n                .done(function (response) {\n                    let a = JSON.parse(response).response;\n                    __this.data = a.filter((food) => {\n                        return __this.cart[food.id] && __this.cart[food.id] > 0;\n                    });\n                })\n            __this.localCart = __this.cart;\n        },\n        decrFoodQuantity(key) {\n            let currentCart = this.cart;\n            if (currentCart[key] > 0) {\n                --currentCart[key];\n                if (currentCart[key] == 0) {\n                    delete currentCart[key];\n                    this.data = this.data.filter((food) => {\n                        return this.cart[food.id] && this.cart[food.id] > 0;\n                    });\n                }\n                this.updateCart(currentCart);\n            }\n            this.$forceUpdate()\n        },\n        incrFoodQuantity(key) {\n            let currentCart = this.cart;\n            ++currentCart[key];\n            this.updateCart(currentCart);\n            this.$forceUpdate();\n        },\n        async onCloseModal() {\n            // await this.resetCart(); // Flush\n            this.$vm2.close('modal-2');\n            let currentCart = this.cart;\n            for (var entry in currentCart) delete currentCart[entry];\n            this.updateCart(currentCart);\n            this.$router.push(\"/menu\");\n        }\n    },\n    inject: ['cart', 'updateCart', 'resetCart'],\n    beforeMount() {\n        this.getData();\n    },\n};\n</script>\n\n<style scoped>\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\n@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');\n\nbutton {\n    transition: transform .1.5s;\n    /* Animation */\n}\n\nbutton:hover {\n    transform: scale(1.5);\n    /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */\n}\n\n.title-wrapper {\n    margin-bottom: 4%;\n}\n\n.menu-title {\n    font-family: Oleo Script Swash Caps;\n    text-align: center;\n    font-size: 500%;\n    margin: 2% 0% -1% 0%;\n}\n\n.menu-description {\n    font-family: 'Roboto', sans-serif;\n    /*font-family: 'Hahmlet';*/\n    text-align: center;\n    margin: 0% 8% -1% 8%;\n}\n\n.btn-wrapper {\n    margin: 25px 0 65px 0;\n}\n</style>\n"]}]}