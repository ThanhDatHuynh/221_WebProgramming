{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/EditAccountPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/EditAccountPage.vue","mtime":1655271016379},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTaWRlQmFyIGZyb20gIi4uL2NvbXBvbmVudHMvU2lkZUJhci52dWUiOwppbXBvcnQgKiBhcyB5dXAgZnJvbSAieXVwIjsKaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsKaW1wb3J0IFJlc2VydmF0aW9uTm90ZSBmcm9tICIuLi9jb21wb25lbnRzL1Jlc2VydmF0aW9uTm90ZS52dWUiOwppbXBvcnQgTW9kYWxDb25maXJtIGZyb20gIi4uL2NvbXBvbmVudHMvTW9kYWxDb25maXJtLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkVkaXRBY2NvdW50UGFnZSIsCiAgY29tcG9uZW50czogeyBTaWRlQmFyLCBSZXNlcnZhdGlvbk5vdGUsIE1vZGFsQ29uZmlybSB9LAogIHByb3BzOiB7fSwKCiAgLyoqCiAgICogRGF0YQogICAqLwogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1N1Y2Nlc3M6IGZhbHNlLAogICAgICBub3RlczogewogICAgICAgICJOZXcgVXNlcm5hbWUiOiAiIiwKICAgICAgICAiTmV3IEVtYWlsIjogIiIsCiAgICAgICAgIk5ldyBQaG9uZSBOdW1iZXIiOiAiIiwKICAgICAgfSwKICAgICAgaXNMb2dvdXRNb2RhbE9wZW46IGZhbHNlLAogICAgICBpc0VkaXRQcm9maWxlTW9kYWxPcGVuOiBmYWxzZSwKICAgICAgaXNFZGl0UGFzc3dvcmRNb2RhbE9wZW46IGZhbHNlLAogICAgICBmb3JtVHlwZTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICBkZWZhdWx0OiAiIiwKICAgICAgfSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICAvLyBWdWUgT2JqZWN0IERhdGEgd2lsbCBiZSBjb252ZXJ0IGludG8gT2JzZXJ2ZXIKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBob25lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgbmV3UGFzc3dvcmQ6ICIiLAogICAgICAgIGNvbmZpcm1OZXdQYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIGVycm9yTWVzc2FnZXM6IHsKICAgICAgICAvLyBWdWUgT2JqZWN0IERhdGEgd2lsbCBiZSBjb252ZXJ0IGludG8gT2JzZXJ2ZXIKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBob25lOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgbmV3UGFzc3dvcmQ6ICIiLAogICAgICAgIGNvbmZpcm1OZXdQYXNzd29yZDogIiIsCiAgICAgIH0sCiAgICAgIHNjaGVtYTogeXVwLm9iamVjdCgpLnNoYXBlKHsKICAgICAgICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKCkubGFiZWwoIkVtYWlsIiksCiAgICAgICAgcGhvbmU6IHl1cAogICAgICAgICAgLnN0cmluZygpCiAgICAgICAgICAubWF0Y2hlcygvXlswLTldezEwfSQvLCAiUGhvbmUgbnVtYmVyIG11c3QgYmUgMTAgZGlnaXRzIiksCiAgICAgICAgZGF0ZTogeXVwCiAgICAgICAgICAuc3RyaW5nKCkKICAgICAgICAgIC5tYXRjaGVzKAogICAgICAgICAgICAvKFsxMl1cZHszfS0oMFsxLTldfDFbMC0yXSktKDBbMS05XXxbMTJdXGR8M1swMV0pKS8sCiAgICAgICAgICAgICJEYXRlIG11c3QgYmUgb2YgWVlZWS1NTS1ERCIKICAgICAgICAgICksCiAgICAgICAgdGltZTogeXVwCiAgICAgICAgICAuc3RyaW5nKCkKICAgICAgICAgIC5tYXRjaGVzKAogICAgICAgICAgICAvKD86WzAxXVxkfDJbMDEyM10pOig/OlswMTIzNDVdXGQpOig/OlswMTIzNDVdXGQpL2dtLAogICAgICAgICAgICAiVGltZSBtdXN0IGJlIG9mIEhIOk1NOlNTIgogICAgICAgICAgKSwKICAgICAgICB0b3RhbFBlb3BsZTogeXVwLm51bWJlcigpLm1pbigxKS5tYXgoMzApLmxhYmVsKCJOdW1iZXIgb2YgcGVyc29ucyIpLAogICAgICB9KSwKICAgIH07CiAgfSwKCiAgLyoqCiAgICogTWV0aG9kcwogICAqLwogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGhhbmRsZUlucHV0VmFsaWRhdGlvbih7IG5hbWUsIHZhbHVlIH0pIHsKICAgICAgbGV0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnNjaGVtYQogICAgICAgIC52YWxpZGF0ZSh7IFtuYW1lXTogdmFsdWUgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgfSk7CiAgICAgIGlmICh2YWxpZGF0aW9uUmVzdWx0LmVycm9ycykgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlc1tuYW1lXSA9IHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzWzBdOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlc1tuYW1lXSA9ICIiOwogICAgICB9CiAgICB9LAoKICAgIGhhbmRsZUZvcm1DaGFuZ2UobmV3RGF0YSkgewogICAgICB0aGlzLmZvcm1EYXRhW25ld0RhdGEubmFtZV0gPSBuZXdEYXRhLnZhbHVlOwogICAgICB0aGlzLmhhbmRsZUlucHV0VmFsaWRhdGlvbihuZXdEYXRhKTsKICAgIH0sCgogICAgdG9nZ2xlTW9kYWxPcGVuKHR5cGUpIHsKICAgICAgaWYgKHR5cGUgPT09ICJsb2dvdXQiKSB7CiAgICAgICAgdGhpcy5pc0xvZ291dE1vZGFsT3BlbiA9ICF0aGlzLmlzTG9nb3V0TW9kYWxPcGVuOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJwcm9maWxlIikgewogICAgICAgIHRoaXMuaXNFZGl0UHJvZmlsZU1vZGFsT3BlbiA9ICF0aGlzLmlzRWRpdFByb2ZpbGVNb2RhbE9wZW47CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInBhc3N3b3JkIikgewogICAgICAgIHRoaXMuaXNFZGl0UGFzc3dvcmRNb2RhbE9wZW4gPSAhdGhpcy5pc0VkaXRQYXNzd29yZE1vZGFsT3BlbjsKICAgICAgfQogICAgfSwKCiAgICBlZGl0Tm90ZXMocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc3QgeyBlbWFpbCwgdXNlcm5hbWUsIHBob25lTnVtYmVyIH0gPSByZXNwb25zZTsKICAgICAgICB0aGlzLm5vdGVzWyJOZXcgVXNlcm5hbWUiXSA9IHVzZXJuYW1lOwogICAgICAgIHRoaXMubm90ZXNbIk5ldyBFbWFpbCJdID0gZW1haWw7CiAgICAgICAgdGhpcy5ub3Rlc1siTmV3IFBob25lIE51bWJlciJdID0gcGhvbmVOdW1iZXI7CiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZTsKICAgICAgfQogICAgfSwKCiAgICByZWxvYWRQYWdlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICB0aGlzLiRyb3V0ZXIuZ28oIi8iKTsKICAgIH0sCgogICAgbG9nb3V0VXNlcigpIHsKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSAhPT0gIiIpIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiVXNlclRva2VuIik7CiAgICAgIH0KICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikgIT09ICIiKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIlVzZXIiKTsKICAgICAgfQogICAgICB0aGlzLnJlbG9hZFBhZ2UoKTsKICAgIH0sCgogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX190aGlzID0gdGhpczsKICAgICAgY29uc3QgZm9ybURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybURhdGEpKTsKCiAgICAgIGNvbnN0IFVzZXJUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKTsKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSA9PT0gIiIpIHsKICAgICAgICBhbGVydCgiUGxlYXNlIGxvZ2luIGJlZm9yZSB0byBlZGl0IHlvdXIgYWNjb3VudCBpbmZvIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qKgogICAgICAgKiBHZXQgTG9jYWxTdG9yYWdlIFVzZXJJbmZvIGZpbGwgaW4gdW5jaGFuZ2VkIGZpZWxkCiAgICAgICAqLwogICAgICBjb25zdCBVc2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXIiKSk7CgogICAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PT0gImVkaXRBY2NvdW50UHJvZmlsZSIpIHsKICAgICAgICAvKioKICAgICAgICAgKiBIYW5kbGUgRWRpdCBQcm9maWxlCiAgICAgICAgICovCiAgICAgICAgdGhpcy50b2dnbGVNb2RhbE9wZW4oInByb2ZpbGUiKTsKICAgICAgICBsZXQgc2V0dGluZ3MgPSB7CiAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYXV0aC91cGRhdGVfcHJvZmlsZWAsCiAgICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgIHVzZXJuYW1lOiBmb3JtRGF0YS51c2VybmFtZSwKICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGZvcm1EYXRhLnBob25lLAogICAgICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsCiAgICAgICAgICAgIGF2YXRhcjogVXNlckluZm8uYXZhdGFyLAogICAgICAgICAgICB1c2VySWQ6IFVzZXJJbmZvLnVzZXJJZCwKICAgICAgICAgIH0sCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICJCZWFyLVRva2VuIjogVXNlclRva2VuLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICAgICQuYWpheChzZXR0aW5ncykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHJlc3BvbnNlKSkpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgX190aGlzLiRyZWZzLm5vdGVUaXRsZS5pbm5lckhUTUwgPQogICAgICAgICAgICAgICJZb3VyIFByb2ZpbGUgSGFzIEJlZW4gVXBkYXRlZCEgUGxlYXNlIFJlY2hlY2sgQmVmb3JlIExlYXZpbmciOwogICAgICAgICAgICBfX3RoaXMuZWRpdE5vdGVzKHJlc3BvbnNlLnJlc3BvbnNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9fdGhpcy4kcmVmcy5ub3RlVGl0bGUuaW5uZXJIVE1MID0gcmVzcG9uc2UubWVzc2FnZTsKICAgICAgICAgICAgX190aGlzLmlzU3VjY2VzcyA9IHRydWU7CiAgICAgICAgICAgIF9fdGhpcy5lZGl0Tm90ZXMobnVsbCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUubmFtZSA9PT0gImVkaXRBY2NvdW50UGFzc3dvcmQiKSB7CiAgICAgICAgLyoqCiAgICAgICAgICogSGFuZGxlIEVkaXQgUGFzc3dvcmQKICAgICAgICAgKi8KICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsT3BlbigicGFzc3dvcmQiKTsKICAgICAgICBsZXQgc2V0dGluZ3MgPSB7CiAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYXV0aC91cGRhdGVfcGFzc3dvcmRgLAogICAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgICB0aW1lb3V0OiAwLAogICAgICAgICAgZGF0YTogewogICAgICAgICAgICBvbGRfcGFzc3dvcmQ6IGZvcm1EYXRhLnBhc3N3b3JkLAogICAgICAgICAgICBuZXdfcGFzc3dvcmQ6IGZvcm1EYXRhLm5ld1Bhc3N3b3JkLAogICAgICAgICAgICB2ZXJpZnlfcGFzc3dvcmQ6IGZvcm1EYXRhLmNvbmZpcm1OZXdQYXNzd29yZCwKICAgICAgICAgIH0sCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICJCZWFyLVRva2VuIjogVXNlclRva2VuLAogICAgICAgICAgfSwKICAgICAgICB9OwogICAgICAgICQuYWpheChzZXR0aW5ncykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHJlc3BvbnNlKSkpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgX190aGlzLiRyZWZzLm5vdGVUaXRsZS5pbm5lckhUTUwgPQogICAgICAgICAgICAgICJZb3VyIFBhc3N3b3JkIEhhcyBCZWVuIFVwZGF0ZWQhIFBsZWFzZSBSZWNoZWNrIEJlZm9yZSBMZWF2aW5nIjsKICAgICAgICAgICAgX190aGlzLmxvZ291dFVzZXIoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF9fdGhpcy4kcmVmcy5ub3RlVGl0bGUuaW5uZXJIVE1MID0gcmVzcG9uc2UubWVzc2FnZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAoKICAvKioKICAgKiBMaWZlY3ljbGUgSG9va3MKICAgKi8KICBiZWZvcmVNb3VudCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09PSAiZWRpdEFjY291bnQiKSB7CiAgICAgIHRoaXMuJHJvdXRlci5oaXN0b3J5LnB1c2goeyBuYW1lOiAiZWRpdEFjY291bnRQcm9maWxlIiB9KTsKICAgIH0KCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXIiKSAhPSAiIikgewogICAgICBjb25zdCBVc2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXIiKSk7CiAgICAgIHRoaXMuZm9ybURhdGEudXNlcm5hbWUgPSBVc2VySW5mb1sidXNlcm5hbWUiXTsKICAgICAgdGhpcy5mb3JtRGF0YS5lbWFpbCA9IFVzZXJJbmZvWyJlbWFpbCJdOwogICAgICB0aGlzLmZvcm1EYXRhLnBob25lID0gVXNlckluZm9bInBob25lTnVtYmVyIl07CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["EditAccountPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditAccountPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"edit-account-page-wrapper\">\n    <ModalConfirm\n      @toggleModalEvent=\"toggleModalOpen('logout')\"\n      :isOpen=\"this.isLogoutModalOpen\"\n      :title=\"'Logout Confirm'\"\n      :content=\"'You are about to logout ?'\"\n      @callbackEvent=\"logoutUser\"\n    />\n    <ModalConfirm\n      @toggleModalEvent=\"toggleModalOpen('profile')\"\n      :isOpen=\"this.isEditProfileModalOpen\"\n      :title=\"'Edit Profile Confirm'\"\n      :content=\"'You are about to edit your profile'\"\n      @callbackEvent=\"handleSubmit\"\n    />\n    <ModalConfirm\n      @toggleModalEvent=\"toggleModalOpen('password')\"\n      :isOpen=\"this.isEditPasswordModalOpen\"\n      :title=\"'Edit Password Confirm'\"\n      :content=\"'You are about to edit your password, please relogin if success'\"\n      @callbackEvent=\"handleSubmit\"\n    />\n    <SideBar @logoutEvent=\"toggleModalOpen('logout')\" />\n    <div class=\"update-form-wrapper\">\n      <div style=\"width: 80%; margin: auto\">\n        <router-view\n          :key=\"$route.path\"\n          :data=\"formData\"\n          @onFormChange=\"handleFormChange\"\n          @onSubmit=\"\n            $route.name === 'editAccountProfile'\n              ? toggleModalOpen('profile')\n              : toggleModalOpen('password')\n          \"\n          :errorMessages=\"errorMessages\"\n        />\n        <div v-show=\"isSuccess\" class=\"reservation-note\" ref=\"note\">\n          <div ref=\"noteTitle\" class=\"note-title\"></div>\n          <ReservationNote :notes=\"this.notes\" :isSuccess=\"isSuccess\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SideBar from \"../components/SideBar.vue\";\nimport * as yup from \"yup\";\nimport $ from \"jquery\";\nimport ReservationNote from \"../components/ReservationNote.vue\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\n\nexport default {\n  name: \"EditAccountPage\",\n  components: { SideBar, ReservationNote, ModalConfirm },\n  props: {},\n\n  /**\n   * Data\n   */\n  data() {\n    return {\n      isSuccess: false,\n      notes: {\n        \"New Username\": \"\",\n        \"New Email\": \"\",\n        \"New Phone Number\": \"\",\n      },\n      isLogoutModalOpen: false,\n      isEditProfileModalOpen: false,\n      isEditPasswordModalOpen: false,\n      formType: {\n        type: String,\n        default: \"\",\n      },\n      formData: {\n        // Vue Object Data will be convert into Observer\n        username: \"\",\n        email: \"\",\n        phone: \"\",\n        password: \"\",\n        newPassword: \"\",\n        confirmNewPassword: \"\",\n      },\n      errorMessages: {\n        // Vue Object Data will be convert into Observer\n        username: \"\",\n        email: \"\",\n        phone: \"\",\n        password: \"\",\n        newPassword: \"\",\n        confirmNewPassword: \"\",\n      },\n      schema: yup.object().shape({\n        email: yup.string().email().label(\"Email\"),\n        phone: yup\n          .string()\n          .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\n        date: yup\n          .string()\n          .matches(\n            /([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/,\n            \"Date must be of YYYY-MM-DD\"\n          ),\n        time: yup\n          .string()\n          .matches(\n            /(?:[01]\\d|2[0123]):(?:[012345]\\d):(?:[012345]\\d)/gm,\n            \"Time must be of HH:MM:SS\"\n          ),\n        totalPeople: yup.number().min(1).max(30).label(\"Number of persons\"),\n      }),\n    };\n  },\n\n  /**\n   * Methods\n   */\n  methods: {\n    async handleInputValidation({ name, value }) {\n      let validationResult = await this.schema\n        .validate({ [name]: value })\n        .catch((error) => {\n          return error;\n        });\n      if (validationResult.errors) {\n        this.errorMessages[name] = validationResult.errors[0];\n      } else {\n        this.errorMessages[name] = \"\";\n      }\n    },\n\n    handleFormChange(newData) {\n      this.formData[newData.name] = newData.value;\n      this.handleInputValidation(newData);\n    },\n\n    toggleModalOpen(type) {\n      if (type === \"logout\") {\n        this.isLogoutModalOpen = !this.isLogoutModalOpen;\n      } else if (type === \"profile\") {\n        this.isEditProfileModalOpen = !this.isEditProfileModalOpen;\n      } else if (type === \"password\") {\n        this.isEditPasswordModalOpen = !this.isEditPasswordModalOpen;\n      }\n    },\n\n    editNotes(response) {\n      if (response) {\n        const { email, username, phoneNumber } = response;\n        this.notes[\"New Username\"] = username;\n        this.notes[\"New Email\"] = email;\n        this.notes[\"New Phone Number\"] = phoneNumber;\n        this.isSuccess = true;\n      } else {\n        this.isSuccess = true;\n      }\n    },\n\n    reloadPage() {\n      this.$router.push(\"/\");\n      this.$router.go(\"/\");\n    },\n\n    logoutUser() {\n      if (localStorage.getItem(\"UserToken\") !== \"\") {\n        localStorage.removeItem(\"UserToken\");\n      }\n      if (localStorage.getItem(\"User\") !== \"\") {\n        localStorage.removeItem(\"User\");\n      }\n      this.reloadPage();\n    },\n\n    handleSubmit() {\n      var __this = this;\n      const formData = JSON.parse(JSON.stringify(this.formData));\n\n      const UserToken = localStorage.getItem(\"UserToken\");\n      if (localStorage.getItem(\"UserToken\") === \"\") {\n        alert(\"Please login before to edit your account info\");\n        return;\n      }\n      /**\n       * Get LocalStorage UserInfo fill in unchanged field\n       */\n      const UserInfo = JSON.parse(localStorage.getItem(\"User\"));\n\n      if (this.$route.name === \"editAccountProfile\") {\n        /**\n         * Handle Edit Profile\n         */\n        this.toggleModalOpen(\"profile\");\n        let settings = {\n          url: `${process.env.VUE_APP_API_URL}/auth/update_profile`,\n          method: \"post\",\n          timeout: 0,\n          data: {\n            username: formData.username,\n            phoneNumber: formData.phone,\n            email: formData.email,\n            avatar: UserInfo.avatar,\n            userId: UserInfo.userId,\n          },\n          headers: {\n            \"Bear-Token\": UserToken,\n          },\n        };\n        $.ajax(settings).done(function (response) {\n          response = JSON.parse(JSON.stringify(JSON.parse(response)));\n          if (response.status == 200) {\n            __this.$refs.noteTitle.innerHTML =\n              \"Your Profile Has Been Updated! Please Recheck Before Leaving\";\n            __this.editNotes(response.response);\n          } else {\n            __this.$refs.noteTitle.innerHTML = response.message;\n            __this.isSuccess = true;\n            __this.editNotes(null);\n          }\n        });\n      } else if (this.$route.name === \"editAccountPassword\") {\n        /**\n         * Handle Edit Password\n         */\n        this.toggleModalOpen(\"password\");\n        let settings = {\n          url: `${process.env.VUE_APP_API_URL}/auth/update_password`,\n          method: \"post\",\n          timeout: 0,\n          data: {\n            old_password: formData.password,\n            new_password: formData.newPassword,\n            verify_password: formData.confirmNewPassword,\n          },\n          headers: {\n            \"Bear-Token\": UserToken,\n          },\n        };\n        $.ajax(settings).done(function (response) {\n          response = JSON.parse(JSON.stringify(JSON.parse(response)));\n          if (response.status == 200) {\n            __this.$refs.noteTitle.innerHTML =\n              \"Your Password Has Been Updated! Please Recheck Before Leaving\";\n            __this.logoutUser();\n          } else {\n            __this.$refs.noteTitle.innerHTML = response.message;\n          }\n        });\n      }\n    },\n  },\n\n  /**\n   * Lifecycle Hooks\n   */\n  beforeMount() {\n    if (this.$route.name === \"editAccount\") {\n      this.$router.history.push({ name: \"editAccountProfile\" });\n    }\n\n    if (localStorage.getItem(\"User\") != \"\") {\n      const UserInfo = JSON.parse(localStorage.getItem(\"User\"));\n      this.formData.username = UserInfo[\"username\"];\n      this.formData.email = UserInfo[\"email\"];\n      this.formData.phone = UserInfo[\"phoneNumber\"];\n    }\n  },\n};\n</script>\n\n<style scoped>\n.edit-account-page-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.edit-options-wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  width: 30%;\n}\n\n.update-form-wrapper {\n  margin: 100px 0 100px 0;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  width: 60%;\n}\n\n.option-item {\n  margin: 20px 0 20px 0;\n  background: rgba(225, 101, 31, 0.25);\n  width: 100%;\n  height: 50px;\n  border-radius: 5px;\n}\n\n.reservation-note {\n  margin: 20px auto;\n  width: 100%;\n  border-radius: 20px;\n  background-color: #ededed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.reservation-note > * {\n  width: 100%;\n}\n\n.note-title {\n  font-family: Roboto, 'san-serif';\n  text-align: center;\n  font-size: 200%;\n  margin: 20px 0 20px 0;\n}\n\n@media screen and (max-width: 900px) {\n  .update-form-wrapper {\n    width: 100%;\n  }\n}\n</style>\n"]}]}