{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminAboutPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminAboutPage.vue","mtime":1655275222345},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGb3JtIGZyb20gIi4uL2NvbXBvbmVudHMvRm9ybS52dWUiOwppbXBvcnQgKiBhcyB5dXAgZnJvbSAieXVwIjsKaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsKaW1wb3J0IE1vZGFsQ29uZmlybSBmcm9tICIuLi9jb21wb25lbnRzL01vZGFsQ29uZmlybS52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkFkbWluQWJvdXRQYWdlIiwKICAgIGNvbXBvbmVudHM6IHsgRm9ybSwgTW9kYWxDb25maXJtIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlzRm9ybVN1Ym1pdGVkOiBmYWxzZSwKICAgICAgICAgICAgaXNNb2RhbE9wZW46IGZhbHNlLAogICAgICAgICAgICBmb3JtRGF0YTogewogICAgICAgICAgICAgICAgLy8gVnVlIE9iamVjdCBEYXRhIHdpbGwgYmUgY29udmVydCBpbnRvIE9ic2VydmVyCiAgICAgICAgICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgICAgICAgICBhZGRyZXNzOiAiIiwKICAgICAgICAgICAgICAgIG9wZW5UaW1lOiAiIiwKICAgICAgICAgICAgICAgIGNsb3NlVGltZTogIiIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVycm9yTWVzc2FnZXM6IHsKICAgICAgICAgICAgICAgIHBob25lOiAiIiwKICAgICAgICAgICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgICAgICAgICAgb3BlblRpbWU6ICIiLAogICAgICAgICAgICAgICAgY2xvc2VUaW1lOiAiIiwKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIEFkZCBmaWVsZCB3aXRoIG5hbWUgaW4gZXJyb3JNZXNzYWdlcyBmb3Igb3RoZXJzJyB2YWxpZGF0aW9uCiAgICAgICAgICAgIHNjaGVtYTogeXVwLm9iamVjdCgpLnNoYXBlKHsKICAgICAgICAgICAgICAgIHBob25lOiB5dXAKICAgICAgICAgICAgICAgICAgICAuc3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAubWF0Y2hlcygvXlswLTldezEwfSQvLCAiUGhvbmUgbnVtYmVyIG11c3QgYmUgMTAgZGlnaXRzIiksCiAgICAgICAgICAgICAgICBhZGRyZXNzOiB5dXAuc3RyaW5nKCksCiAgICAgICAgICAgICAgICBvcGVuVGltZTogeXVwLnN0cmluZygpLAogICAgICAgICAgICAgICAgY2xvc2VUaW1lOiB5dXAuc3RyaW5nKCksCiAgICAgICAgICAgIH0pLAogICAgICAgIH07CiAgICB9LAogICAgYmVmb3JlTW91bnQoKSB7CiAgICAgICAgdGhpcy5HZXRQdWJsaWNJbmZvKCkKICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIHRvZ2dsZU1vZGFsT3BlbigpIHsKICAgICAgICAgICAgdGhpcy5pc01vZGFsT3BlbiA9ICF0aGlzLmlzTW9kYWxPcGVuOwogICAgICAgIH0sCgogICAgICAgIEdldFB1YmxpY0luZm8oKSB7CiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICAgICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9nZXRfcHVibGljX2luZm9gLAogICAgICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgICAgICAgICBkYXRhOiB7fSwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHt9LAogICAgICAgICAgICB9OwoKICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgX190aGlzID0gdGhpczsKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSkucmVzcG9uc2U7CiAgICAgICAgICAgICAgICBfX3RoaXMuZm9ybURhdGEucGhvbmUgPSByZXNwb25zZS5waG9uZTsKICAgICAgICAgICAgICAgIF9fdGhpcy5mb3JtRGF0YS5hZGRyZXNzID0gcmVzcG9uc2UuYWRkcmVzczsKICAgICAgICAgICAgICAgIF9fdGhpcy5mb3JtRGF0YS5vcGVuVGltZSA9IHJlc3BvbnNlLm9wZW5fdGltZTsKICAgICAgICAgICAgICAgIF9fdGhpcy5mb3JtRGF0YS5jbG9zZVRpbWUgPSByZXNwb25zZS5jbG9zZV90aW1lOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBhc3luYyBoYW5kbGVJbnB1dFZhbGlkYXRpb24oeyBuYW1lLCB2YWx1ZSB9KSB7CiAgICAgICAgICAgIGxldCB2YWxpZGF0aW9uUmVzdWx0ID0gYXdhaXQgdGhpcy5zY2hlbWEKICAgICAgICAgICAgICAgIC52YWxpZGF0ZSh7IFtuYW1lXTogdmFsdWUgfSkKICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3I7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzKSB7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZXNbbmFtZV0gPSB2YWxpZGF0aW9uUmVzdWx0LmVycm9yc1swXTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlc1tuYW1lXSA9ICIiOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgaGFuZGxlRm9ybUNoYW5nZShuZXdEYXRhKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFbbmV3RGF0YS5uYW1lXSA9IG5ld0RhdGEudmFsdWU7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlSW5wdXRWYWxpZGF0aW9uKG5ld0RhdGEpOwogICAgICAgIH0sCgogICAgICAgIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgICAgICAgdmFyIF9fdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm1EYXRhKSk7CiAgICAgICAgICAgIGNvbnN0IFVzZXJUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKTsKICAgICAgICAgICAgaWYgKFVzZXJUb2tlbiA9PT0gIiIpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJQbGVhc2UgbG9naW4gYWRtaW4gYWNjb3VudCBiZWZvcmUgdG8gZWRpdCBvciBjcmVhdGUgYmxvZyIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmlzRm9ybVN1Ym1pdGVkID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy50b2dnbGVNb2RhbE9wZW4oKTsKICAgICAgICAgICAgbGV0IHNldHRpbmdzID0gewogICAgICAgICAgICAgICAgdXJsOiBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkx9L2FkbWluL2NoYW5nZV9wdWJsaWNfaW5mb2AsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgcGhvbmU6IGZvcm1EYXRhLnBob25lLAogICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGZvcm1EYXRhLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICAgb3BlblRpbWU6IGZvcm1EYXRhLm9wZW5UaW1lLAogICAgICAgICAgICAgICAgICAgIGNsb3NlVGltZTogZm9ybURhdGEuY2xvc2VUaW1lCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJCZWFyLVRva2VuIjogVXNlclRva2VuLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy9fX3RoaXMuJHJlZnMubm90ZVRpdGxlLmlubmVySFRNTCA9ICJZb3VyIFB1YmxpYyBJbmZvYXRpb24gSGF2ZSBCZWVuIEVkaXRlZCI7CiAgICAgICAgICAgICAgICAgICAgX190aGlzLiRyb3V0ZXIuZ28oX190aGlzLiRyb3V0ZXIuY3VycmVudCkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX190aGlzLiRyZWZzLm5vdGVUaXRsZS5pbm5lckhUTUwgPSByZXNwb25zZS5tZXNzYWdlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgfSwKICAgIH0sCn07Cg=="},{"version":3,"sources":["AdminAboutPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AdminAboutPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div class=\"edit-blog-wrapper\">\n        <ModalConfirm @toggleModalEvent=\"toggleModalOpen\" :isOpen=\"this.isModalOpen\" :title=\"'Change Confirm'\"\n            :content=\"'You are about to change public information?'\" @callbackEvent=\"handleSubmit\" />\n        <div class=\"reservation-title\">\n            <p>Public Infomation</p>\n        </div>\n        <div class=\"form-wrapper\">\n            <Form :type=\"'EditAbout'\" :data=\"formData\" :errorMessages=\"errorMessages\" @onFormChange=\"handleFormChange\"\n                @onSubmit=\"toggleModalOpen\" />\n            <div v-show=\"isFormSubmited\" class=\"reservation-note\" ref=\"note\">\n                <div ref=\"noteTitle\" class=\"note-title\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Form from \"../components/Form.vue\";\nimport * as yup from \"yup\";\nimport $ from \"jquery\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\n\nexport default {\n    name: \"AdminAboutPage\",\n    components: { Form, ModalConfirm },\n    data() {\n        return {\n            isFormSubmited: false,\n            isModalOpen: false,\n            formData: {\n                // Vue Object Data will be convert into Observer\n                phone: \"\",\n                address: \"\",\n                openTime: \"\",\n                closeTime: \"\",\n            },\n            errorMessages: {\n                phone: \"\",\n                address: \"\",\n                openTime: \"\",\n                closeTime: \"\",\n            },\n\n            // Add field with name in errorMessages for others' validation\n            schema: yup.object().shape({\n                phone: yup\n                    .string()\n                    .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\n                address: yup.string(),\n                openTime: yup.string(),\n                closeTime: yup.string(),\n            }),\n        };\n    },\n    beforeMount() {\n        this.GetPublicInfo()\n    },\n\n    methods: {\n        toggleModalOpen() {\n            this.isModalOpen = !this.isModalOpen;\n        },\n\n        GetPublicInfo() {\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/get_public_info`,\n                method: \"GET\",\n                timeout: 0,\n                data: {},\n                headers: {},\n            };\n\n            $.ajax(settings).then((response) => {\n                const __this = this;\n                response = JSON.parse(response).response;\n                __this.formData.phone = response.phone;\n                __this.formData.address = response.address;\n                __this.formData.openTime = response.open_time;\n                __this.formData.closeTime = response.close_time;\n            });\n        },\n\n        async handleInputValidation({ name, value }) {\n            let validationResult = await this.schema\n                .validate({ [name]: value })\n                .catch((error) => {\n                    return error;\n                });\n            if (validationResult.errors) {\n                this.errorMessages[name] = validationResult.errors[0];\n            } else {\n                this.errorMessages[name] = \"\";\n            }\n        },\n\n        handleFormChange(newData) {\n            this.formData[newData.name] = newData.value;\n            this.handleInputValidation(newData);\n        },\n\n        handleSubmit() {\n            var __this = this;\n            const formData = JSON.parse(JSON.stringify(this.formData));\n            const UserToken = localStorage.getItem(\"UserToken\");\n            if (UserToken === \"\") {\n                alert(\"Please login admin account before to edit or create blog\");\n                return;\n            }\n\n            this.isFormSubmited = true;\n            this.toggleModalOpen();\n            let settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/change_public_info`,\n                method: \"POST\",\n                timeout: 0,\n                data: {\n                    phone: formData.phone,\n                    address: formData.address,\n                    openTime: formData.openTime,\n                    closeTime: formData.closeTime\n                },\n                headers: {\n                    \"Bear-Token\": UserToken,\n                },\n            };\n            $.ajax(settings).done(function (response) {\n                console.log(response);\n                response = JSON.parse(response);\n                if (response.status == 200) {\n                    //__this.$refs.noteTitle.innerHTML = \"Your Public Infoation Have Been Edited\";\n                    __this.$router.go(__this.$router.current)\n                } else {\n                    __this.$refs.noteTitle.innerHTML = response.message;\n                }\n            });\n\n        },\n    },\n};\n</script>\n\n<style scoped>\n.edit-blog-wrapper {\n    margin: 50px 0 50px 0;\n}\n\n.reservation-title {\n    font-family: Oleo Script Swash Caps;\n    text-align: center;\n    font-size: 500%;\n    margin: 0px 0px 50px 0px;\n}\n\n.reservation-note {\n    margin: 20px auto;\n    width: 100%;\n    border-radius: 20px;\n    background-color: #ededed;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n}\n\n.reservation-note>* {\n    width: 100%;\n}\n\n.note-title {\n    font-family: Roboto, 'san-serif';\n    text-align: center;\n    font-size: 200%;\n    margin: 20px 0 20px 0;\n}\n\n.form-wrapper {\n    width: 50%;\n    margin: auto;\n}\n\n@media screen and (max-width: 1700px) {\n    .form-wrapper {\n        width: 60%;\n    }\n}\n\n@media screen and (max-width: 1400px) {\n    .form-wrapper {\n        width: 70%;\n    }\n}\n\n@media screen and (max-width: 1000px) {\n    .form-wrapper {\n        width: 80%;\n    }\n}\n\n@media screen and (max-width: 700px) {\n    .form-wrapper {\n        width: 90%;\n    }\n}\n</style>\n"]}]}