{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\EditAccountPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\EditAccountPage.vue","mtime":1655550438737},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2lkZUJhciBmcm9tICIuLi9jb21wb25lbnRzL1NpZGVCYXIudnVlIjsNCmltcG9ydCAqIGFzIHl1cCBmcm9tICJ5dXAiOw0KaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsNCmltcG9ydCBSZXNlcnZhdGlvbk5vdGUgZnJvbSAiLi4vY29tcG9uZW50cy9SZXNlcnZhdGlvbk5vdGUudnVlIjsNCmltcG9ydCBNb2RhbENvbmZpcm0gZnJvbSAiLi4vY29tcG9uZW50cy9Nb2RhbENvbmZpcm0udnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRWRpdEFjY291bnRQYWdlIiwNCiAgY29tcG9uZW50czogeyBTaWRlQmFyLCBSZXNlcnZhdGlvbk5vdGUsIE1vZGFsQ29uZmlybSB9LA0KICBwcm9wczoge30sDQoNCiAgLyoqDQogICAqIERhdGENCiAgICovDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzU3VjY2VzczogZmFsc2UsDQogICAgICBub3Rlczogew0KICAgICAgICAiTmV3IFVzZXJuYW1lIjogIiIsDQogICAgICAgICJOZXcgRW1haWwiOiAiIiwNCiAgICAgICAgIk5ldyBQaG9uZSBOdW1iZXIiOiAiIiwNCiAgICAgIH0sDQogICAgICBpc0xvZ291dE1vZGFsT3BlbjogZmFsc2UsDQogICAgICBpc0VkaXRQcm9maWxlTW9kYWxPcGVuOiBmYWxzZSwNCiAgICAgIGlzRWRpdFBhc3N3b3JkTW9kYWxPcGVuOiBmYWxzZSwNCiAgICAgIGZvcm1UeXBlOiB7DQogICAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgICAgZGVmYXVsdDogIiIsDQogICAgICB9LA0KICAgICAgZm9ybURhdGE6IHsNCiAgICAgICAgLy8gVnVlIE9iamVjdCBEYXRhIHdpbGwgYmUgY29udmVydCBpbnRvIE9ic2VydmVyDQogICAgICAgIHVzZXJuYW1lOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICBwaG9uZTogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgICAgbmV3UGFzc3dvcmQ6ICIiLA0KICAgICAgICBjb25maXJtTmV3UGFzc3dvcmQ6ICIiLA0KICAgICAgfSwNCiAgICAgIGVycm9yTWVzc2FnZXM6IHsNCiAgICAgICAgLy8gVnVlIE9iamVjdCBEYXRhIHdpbGwgYmUgY29udmVydCBpbnRvIE9ic2VydmVyDQogICAgICAgIHVzZXJuYW1lOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICBwaG9uZTogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgICAgbmV3UGFzc3dvcmQ6ICIiLA0KICAgICAgICBjb25maXJtTmV3UGFzc3dvcmQ6ICIiLA0KICAgICAgfSwNCiAgICAgIHNjaGVtYTogeXVwLm9iamVjdCgpLnNoYXBlKHsNCiAgICAgICAgdXNlcm5hbWU6IHl1cC5zdHJpbmcoKS5taW4oMSwgIlBsZWFzZSB0eXBlIHlvdXIgdXNlcm5hbWUhIikubGFiZWwoIlVzZXJuYW1lIiksDQogICAgICAgIHBhc3N3b3JkOiB5dXAuc3RyaW5nKCkubWluKDUpLmxhYmVsKCJQYXNzd29yZCIpLA0KICAgICAgICBuZXdQYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig1KS5sYWJlbCgiUGFzc3dvcmQiKSwNCiAgICAgICAgLy8gY29uZmlybU5ld1Bhc3N3b3JkOiB5dXAuc3RyaW5nKCkub25lT2YoDQogICAgICAgIC8vICAgW3l1cC5yZWYoIm5ld1Bhc3N3b3JkIildLA0KICAgICAgICAvLyAgICJCb3RoIHBhc3N3b3JkIG5lZWQgdG8gYmUgdGhlIHNhbWUiDQogICAgICAgIC8vICksDQogICAgICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkubWluKDEsICJQbGVhc2UgdHlwZSB5b3VyIGVtYWlsISIpLmVtYWlsKCkubGFiZWwoIkVtYWlsIiksDQogICAgICB9KSwNCiAgICB9Ow0KICB9LA0KDQogIC8qKg0KICAgKiBNZXRob2RzDQogICAqLw0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgaGFuZGxlSW5wdXRWYWxpZGF0aW9uKHsgbmFtZSwgdmFsdWUgfSkgew0KICAgICAgbGV0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB0aGlzLnNjaGVtYQ0KICAgICAgICAudmFsaWRhdGUoeyBbbmFtZV06IHZhbHVlIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICByZXR1cm4gZXJyb3I7DQogICAgICAgIH0pOw0KICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzKSB7DQogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlc1tuYW1lXSA9IHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzWzBdOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVycm9yTWVzc2FnZXNbbmFtZV0gPSAiIjsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgfSwNCg0KICAgIGhhbmRsZUZvcm1DaGFuZ2UobmV3RGF0YSkgew0KICAgICAgdGhpcy5mb3JtRGF0YVtuZXdEYXRhLm5hbWVdID0gbmV3RGF0YS52YWx1ZTsNCiAgICAgIHRoaXMuaGFuZGxlSW5wdXRWYWxpZGF0aW9uKG5ld0RhdGEpOw0KICAgIH0sDQoNCiAgICB0b2dnbGVNb2RhbE9wZW4odHlwZSkgew0KICAgICAgaWYgKHR5cGUgPT09ICJsb2dvdXQiKSB7DQogICAgICAgIHRoaXMuaXNMb2dvdXRNb2RhbE9wZW4gPSAhdGhpcy5pc0xvZ291dE1vZGFsT3BlbjsNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gInByb2ZpbGUiKSB7DQogICAgICAgIHRoaXMuaXNFZGl0UHJvZmlsZU1vZGFsT3BlbiA9ICF0aGlzLmlzRWRpdFByb2ZpbGVNb2RhbE9wZW47DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICJwYXNzd29yZCIpIHsNCiAgICAgICAgdGhpcy5pc0VkaXRQYXNzd29yZE1vZGFsT3BlbiA9ICF0aGlzLmlzRWRpdFBhc3N3b3JkTW9kYWxPcGVuOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBlZGl0Tm90ZXMocmVzcG9uc2UpIHsNCiAgICAgIGlmIChyZXNwb25zZSkgew0KICAgICAgICBjb25zdCB7IGVtYWlsLCB1c2VybmFtZSwgcGhvbmVOdW1iZXIgfSA9IHJlc3BvbnNlOw0KICAgICAgICB0aGlzLm5vdGVzWyJOZXcgVXNlcm5hbWUiXSA9IHVzZXJuYW1lOw0KICAgICAgICB0aGlzLm5vdGVzWyJOZXcgRW1haWwiXSA9IGVtYWlsOw0KICAgICAgICB0aGlzLm5vdGVzWyJOZXcgUGhvbmUgTnVtYmVyIl0gPSBwaG9uZU51bWJlcjsNCiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICByZWxvYWRQYWdlKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygiLyIpOw0KICAgIH0sDQoNCiAgICBsb2dvdXRVc2VyKCkgew0KICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSAhPT0gIiIpIHsNCiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oIlVzZXJUb2tlbiIpOw0KICAgICAgfQ0KICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikgIT09ICIiKSB7DQogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJVc2VyIik7DQogICAgICB9DQogICAgICB0aGlzLnJlbG9hZFBhZ2UoKTsNCiAgICB9LA0KDQogICAgYXN5bmMgaGFuZGxlU3VibWl0KCkgew0KICAgICAgdmFyIF9fdGhpcyA9IHRoaXM7DQogICAgICBjb25zdCBmb3JtRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtRGF0YSkpOw0KDQogICAgICBjb25zdCBVc2VyVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlclRva2VuIik7DQogICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXJUb2tlbiIpID09PSAiIikgew0KICAgICAgICBhbGVydCgiUGxlYXNlIGxvZ2luIGJlZm9yZSB0byBlZGl0IHlvdXIgYWNjb3VudCBpbmZvIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIC8qKg0KICAgICAgICogR2V0IExvY2FsU3RvcmFnZSBVc2VySW5mbyBmaWxsIGluIHVuY2hhbmdlZCBmaWVsZA0KICAgICAgICovDQogICAgICBjb25zdCBVc2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXIiKSk7DQoNCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09PSAiZWRpdEFjY291bnRQcm9maWxlIikgew0KICAgICAgICAvKioNCiAgICAgICAgICogSGFuZGxlIEVkaXQgUHJvZmlsZQ0KICAgICAgICAgKi8NCg0KICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsT3BlbigicHJvZmlsZSIpOw0KICAgICAgICBsZXQgdXNlcm5hbWVPSyA9IGF3YWl0IHRoaXMuaGFuZGxlSW5wdXRWYWxpZGF0aW9uKHtuYW1lOiAidXNlcm5hbWUiLCB2YWx1ZTogX190aGlzLmZvcm1EYXRhLnVzZXJuYW1lfSk7DQogICAgICAgIGxldCBwaG9uZU51bWJlck9LID0gYXdhaXQgdGhpcy5oYW5kbGVJbnB1dFZhbGlkYXRpb24oe25hbWU6ICJwaG9uZU51bWJlciIsIHZhbHVlOiBfX3RoaXMuZm9ybURhdGEucGhvbmVOdW1iZXJ9KTsNCiAgICAgICAgbGV0IGVtYWlsT0sgPSBhd2FpdCB0aGlzLmhhbmRsZUlucHV0VmFsaWRhdGlvbih7bmFtZTogImVtYWlsIiwgdmFsdWU6IF9fdGhpcy5mb3JtRGF0YS5lbWFpbH0pOw0KICAgICAgICBpZiAoIXVzZXJuYW1lT0sgfHwgISBwaG9uZU51bWJlck9LIHx8ICFlbWFpbE9LKSByZXR1cm47DQogICAgICAgIGxldCBzZXR0aW5ncyA9IHsNCiAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYXV0aC91cGRhdGVfcHJvZmlsZWAsDQogICAgICAgICAgbWV0aG9kOiAicG9zdCIsDQogICAgICAgICAgdGltZW91dDogMCwNCiAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICB1c2VybmFtZTogZm9ybURhdGEudXNlcm5hbWUsDQogICAgICAgICAgICBwaG9uZU51bWJlcjogZm9ybURhdGEucGhvbmUsDQogICAgICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsDQogICAgICAgICAgICBhdmF0YXI6IFVzZXJJbmZvLmF2YXRhciwNCiAgICAgICAgICAgIHVzZXJJZDogVXNlckluZm8udXNlcklkLA0KICAgICAgICAgIH0sDQogICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgIkJlYXItVG9rZW4iOiBVc2VyVG9rZW4sDQogICAgICAgICAgfSwNCiAgICAgICAgfTsNCiAgICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHJlc3BvbnNlKSkpOw0KICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgICAgICBfX3RoaXMuJHJlZnMubm90ZVRpdGxlLmlubmVySFRNTCA9DQogICAgICAgICAgICAgICJZb3VyIFByb2ZpbGUgSGFzIEJlZW4gVXBkYXRlZCEgUGxlYXNlIFJlY2hlY2sgQmVmb3JlIExlYXZpbmciOw0KICAgICAgICAgICAgX190aGlzLmVkaXROb3RlcyhyZXNwb25zZS5yZXNwb25zZSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIF9fdGhpcy4kcmVmcy5ub3RlVGl0bGUuaW5uZXJIVE1MID0gcmVzcG9uc2UubWVzc2FnZTsNCiAgICAgICAgICAgIF9fdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOw0KICAgICAgICAgICAgX190aGlzLmVkaXROb3RlcyhudWxsKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09PSAiZWRpdEFjY291bnRQYXNzd29yZCIpIHsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEhhbmRsZSBFZGl0IFBhc3N3b3JkDQogICAgICAgICAqLw0KICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsT3BlbigicGFzc3dvcmQiKTsNCiAgICAgICAgbGV0IHBhc3N3b3JkT0sgPSBhd2FpdCB0aGlzLmhhbmRsZUlucHV0VmFsaWRhdGlvbih7bmFtZTogInBhc3N3b3JkIiwgdmFsdWU6IF9fdGhpcy5mb3JtRGF0YS5wYXNzd29yZH0pOw0KICAgICAgICBsZXQgbmV3UGFzc3dvcmRPSyA9IGF3YWl0IHRoaXMuaGFuZGxlSW5wdXRWYWxpZGF0aW9uKHtuYW1lOiAibmV3UGFzc3dvcmQiLCB2YWx1ZTogX190aGlzLmZvcm1EYXRhLm5ld1Bhc3N3b3JkfSk7DQogICAgICAgIGlmIChfX3RoaXMuZm9ybURhdGEubmV3UGFzc3dvcmQgIT0gX190aGlzLmZvcm1EYXRhLmNvbmZpcm1OZXdQYXNzd29yZCkgew0KICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlcy5jb25maXJtTmV3UGFzc3dvcmQgPSAiUGFzc3dvcmQgaXMgbm90IG1hdGNoISI7DQogICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFwYXNzd29yZE9LIHx8ICFuZXdQYXNzd29yZE9LKSByZXR1cm47DQogICAgICAgIGxldCBzZXR0aW5ncyA9IHsNCiAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYXV0aC91cGRhdGVfcGFzc3dvcmRgLA0KICAgICAgICAgIG1ldGhvZDogInBvc3QiLA0KICAgICAgICAgIHRpbWVvdXQ6IDAsDQogICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgb2xkX3Bhc3N3b3JkOiBmb3JtRGF0YS5wYXNzd29yZCwNCiAgICAgICAgICAgIG5ld19wYXNzd29yZDogZm9ybURhdGEubmV3UGFzc3dvcmQsDQogICAgICAgICAgICB2ZXJpZnlfcGFzc3dvcmQ6IGZvcm1EYXRhLmNvbmZpcm1OZXdQYXNzd29yZCwNCiAgICAgICAgICB9LA0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICJCZWFyLVRva2VuIjogVXNlclRva2VuLA0KICAgICAgICAgIH0sDQogICAgICAgIH07DQogICAgICAgICQuYWpheChzZXR0aW5ncykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShyZXNwb25zZSkpKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkNCiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgICAgX190aGlzLiRyZWZzLm5vdGVUaXRsZS5pbm5lckhUTUwgPQ0KICAgICAgICAgICAgICAiWW91ciBQYXNzd29yZCBIYXMgQmVlbiBVcGRhdGVkISBQbGVhc2UgUmVjaGVjayBCZWZvcmUgTGVhdmluZyI7DQogICAgICAgICAgICAgIF9fdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOw0KICAgICAgICAgICAgX190aGlzLmxvZ291dFVzZXIoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy9fX3RoaXMuZWRpdE5vdGVzKHJlc3BvbnNlLm1lc3NhZ2UpOw0KICAgICAgICAgICAgX190aGlzLmlzU3VjY2VzcyA9IHRydWU7DQogICAgICAgICAgICBfX3RoaXMuJHJlZnMubm90ZVRpdGxlLmlubmVySFRNTCA9IHJlc3BvbnNlLm1lc3NhZ2U7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KDQogIC8qKg0KICAgKiBMaWZlY3ljbGUgSG9va3MNCiAgICovDQogIGJlZm9yZU1vdW50KCkgew0KICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09PSAiZWRpdEFjY291bnQiKSB7DQogICAgICB0aGlzLiRyb3V0ZXIuaGlzdG9yeS5wdXNoKHsgbmFtZTogImVkaXRBY2NvdW50UHJvZmlsZSIgfSk7DQogICAgfQ0KDQogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikgIT0gIiIpIHsNCiAgICAgIGNvbnN0IFVzZXJJbmZvID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlciIpKTsNCiAgICAgIHRoaXMuZm9ybURhdGEudXNlcm5hbWUgPSBVc2VySW5mb1sidXNlcm5hbWUiXTsNCiAgICAgIHRoaXMuZm9ybURhdGEuZW1haWwgPSBVc2VySW5mb1siZW1haWwiXTsNCiAgICAgIHRoaXMuZm9ybURhdGEucGhvbmUgPSBVc2VySW5mb1sicGhvbmVOdW1iZXIiXTsNCiAgICB9DQogIH0sDQp9Ow0K"},{"version":3,"sources":["EditAccountPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EditAccountPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div class=\"edit-account-page-wrapper\">\r\n    <ModalConfirm\r\n      @toggleModalEvent=\"toggleModalOpen('logout')\"\r\n      :isOpen=\"this.isLogoutModalOpen\"\r\n      :title=\"'Logout Confirm'\"\r\n      :content=\"'You are about to logout ?'\"\r\n      @callbackEvent=\"logoutUser\"\r\n    />\r\n    <ModalConfirm\r\n      @toggleModalEvent=\"toggleModalOpen('profile')\"\r\n      :isOpen=\"this.isEditProfileModalOpen\"\r\n      :title=\"'Edit Profile Confirm'\"\r\n      :content=\"'You are about to edit your profile'\"\r\n      @callbackEvent=\"handleSubmit\"\r\n    />\r\n    <ModalConfirm\r\n      @toggleModalEvent=\"toggleModalOpen('password')\"\r\n      :isOpen=\"this.isEditPasswordModalOpen\"\r\n      :title=\"'Edit Password Confirm'\"\r\n      :content=\"'You are about to edit your password, please relogin if success'\"\r\n      @callbackEvent=\"handleSubmit\"\r\n    />\r\n    <SideBar @logoutEvent=\"toggleModalOpen('logout')\" />\r\n    <div class=\"update-form-wrapper\">\r\n      <div style=\"width: 80%; margin: auto\">\r\n        <router-view\r\n          :key=\"$route.path\"\r\n          :data=\"formData\"\r\n          @onFormChange=\"handleFormChange\"\r\n          @onSubmit=\"\r\n            $route.name === 'editAccountProfile'\r\n              ? toggleModalOpen('profile')\r\n              : toggleModalOpen('password')\r\n          \"\r\n          :errorMessages=\"errorMessages\"\r\n        />\r\n        <div v-show=\"isSuccess\" class=\"reservation-note\" ref=\"note\">\r\n          <div ref=\"noteTitle\" class=\"note-title\"></div>\r\n          <ReservationNote :notes=\"this.notes\" :isSuccess=\"isSuccess\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SideBar from \"../components/SideBar.vue\";\r\nimport * as yup from \"yup\";\r\nimport $ from \"jquery\";\r\nimport ReservationNote from \"../components/ReservationNote.vue\";\r\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\r\n\r\nexport default {\r\n  name: \"EditAccountPage\",\r\n  components: { SideBar, ReservationNote, ModalConfirm },\r\n  props: {},\r\n\r\n  /**\r\n   * Data\r\n   */\r\n  data() {\r\n    return {\r\n      isSuccess: false,\r\n      notes: {\r\n        \"New Username\": \"\",\r\n        \"New Email\": \"\",\r\n        \"New Phone Number\": \"\",\r\n      },\r\n      isLogoutModalOpen: false,\r\n      isEditProfileModalOpen: false,\r\n      isEditPasswordModalOpen: false,\r\n      formType: {\r\n        type: String,\r\n        default: \"\",\r\n      },\r\n      formData: {\r\n        // Vue Object Data will be convert into Observer\r\n        username: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        password: \"\",\r\n        newPassword: \"\",\r\n        confirmNewPassword: \"\",\r\n      },\r\n      errorMessages: {\r\n        // Vue Object Data will be convert into Observer\r\n        username: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        password: \"\",\r\n        newPassword: \"\",\r\n        confirmNewPassword: \"\",\r\n      },\r\n      schema: yup.object().shape({\r\n        username: yup.string().min(1, \"Please type your username!\").label(\"Username\"),\r\n        password: yup.string().min(5).label(\"Password\"),\r\n        newPassword: yup.string().min(5).label(\"Password\"),\r\n        // confirmNewPassword: yup.string().oneOf(\r\n        //   [yup.ref(\"newPassword\")],\r\n        //   \"Both password need to be the same\"\r\n        // ),\r\n        email: yup.string().min(1, \"Please type your email!\").email().label(\"Email\"),\r\n      }),\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Methods\r\n   */\r\n  methods: {\r\n    async handleInputValidation({ name, value }) {\r\n      let validationResult = await this.schema\r\n        .validate({ [name]: value })\r\n        .catch((error) => {\r\n          return error;\r\n        });\r\n      if (validationResult.errors) {\r\n        this.errorMessages[name] = validationResult.errors[0];\r\n        return false;\r\n      } else {\r\n        this.errorMessages[name] = \"\";\r\n        return true;\r\n      }\r\n    },\r\n\r\n    handleFormChange(newData) {\r\n      this.formData[newData.name] = newData.value;\r\n      this.handleInputValidation(newData);\r\n    },\r\n\r\n    toggleModalOpen(type) {\r\n      if (type === \"logout\") {\r\n        this.isLogoutModalOpen = !this.isLogoutModalOpen;\r\n      } else if (type === \"profile\") {\r\n        this.isEditProfileModalOpen = !this.isEditProfileModalOpen;\r\n      } else if (type === \"password\") {\r\n        this.isEditPasswordModalOpen = !this.isEditPasswordModalOpen;\r\n      }\r\n    },\r\n\r\n    editNotes(response) {\r\n      if (response) {\r\n        const { email, username, phoneNumber } = response;\r\n        this.notes[\"New Username\"] = username;\r\n        this.notes[\"New Email\"] = email;\r\n        this.notes[\"New Phone Number\"] = phoneNumber;\r\n        this.isSuccess = true;\r\n      } else {\r\n        this.isSuccess = true;\r\n      }\r\n    },\r\n\r\n    reloadPage() {\r\n      this.$router.push(\"/\");\r\n      this.$router.go(\"/\");\r\n    },\r\n\r\n    logoutUser() {\r\n      if (localStorage.getItem(\"UserToken\") !== \"\") {\r\n        localStorage.removeItem(\"UserToken\");\r\n      }\r\n      if (localStorage.getItem(\"User\") !== \"\") {\r\n        localStorage.removeItem(\"User\");\r\n      }\r\n      this.reloadPage();\r\n    },\r\n\r\n    async handleSubmit() {\r\n      var __this = this;\r\n      const formData = JSON.parse(JSON.stringify(this.formData));\r\n\r\n      const UserToken = localStorage.getItem(\"UserToken\");\r\n      if (localStorage.getItem(\"UserToken\") === \"\") {\r\n        alert(\"Please login before to edit your account info\");\r\n        return;\r\n      }\r\n      /**\r\n       * Get LocalStorage UserInfo fill in unchanged field\r\n       */\r\n      const UserInfo = JSON.parse(localStorage.getItem(\"User\"));\r\n\r\n      if (this.$route.name === \"editAccountProfile\") {\r\n        /**\r\n         * Handle Edit Profile\r\n         */\r\n\r\n        this.toggleModalOpen(\"profile\");\r\n        let usernameOK = await this.handleInputValidation({name: \"username\", value: __this.formData.username});\r\n        let phoneNumberOK = await this.handleInputValidation({name: \"phoneNumber\", value: __this.formData.phoneNumber});\r\n        let emailOK = await this.handleInputValidation({name: \"email\", value: __this.formData.email});\r\n        if (!usernameOK || ! phoneNumberOK || !emailOK) return;\r\n        let settings = {\r\n          url: `${process.env.VUE_APP_API_URL}/auth/update_profile`,\r\n          method: \"post\",\r\n          timeout: 0,\r\n          data: {\r\n            username: formData.username,\r\n            phoneNumber: formData.phone,\r\n            email: formData.email,\r\n            avatar: UserInfo.avatar,\r\n            userId: UserInfo.userId,\r\n          },\r\n          headers: {\r\n            \"Bear-Token\": UserToken,\r\n          },\r\n        };\r\n        $.ajax(settings).done(function (response) {\r\n          response = JSON.parse(JSON.stringify(JSON.parse(response)));\r\n          if (response.status == 200) {\r\n            __this.$refs.noteTitle.innerHTML =\r\n              \"Your Profile Has Been Updated! Please Recheck Before Leaving\";\r\n            __this.editNotes(response.response);\r\n          } else {\r\n            __this.$refs.noteTitle.innerHTML = response.message;\r\n            __this.isSuccess = true;\r\n            __this.editNotes(null);\r\n          }\r\n        });\r\n      } else if (this.$route.name === \"editAccountPassword\") {\r\n        /**\r\n         * Handle Edit Password\r\n         */\r\n        this.toggleModalOpen(\"password\");\r\n        let passwordOK = await this.handleInputValidation({name: \"password\", value: __this.formData.password});\r\n        let newPasswordOK = await this.handleInputValidation({name: \"newPassword\", value: __this.formData.newPassword});\r\n        if (__this.formData.newPassword != __this.formData.confirmNewPassword) {\r\n          this.errorMessages.confirmNewPassword = \"Password is not match!\";\r\n          this.$forceUpdate();\r\n          return;\r\n        }\r\n        if (!passwordOK || !newPasswordOK) return;\r\n        let settings = {\r\n          url: `${process.env.VUE_APP_API_URL}/auth/update_password`,\r\n          method: \"post\",\r\n          timeout: 0,\r\n          data: {\r\n            old_password: formData.password,\r\n            new_password: formData.newPassword,\r\n            verify_password: formData.confirmNewPassword,\r\n          },\r\n          headers: {\r\n            \"Bear-Token\": UserToken,\r\n          },\r\n        };\r\n        $.ajax(settings).done(function (response) {\r\n          response = JSON.parse(JSON.stringify(JSON.parse(response)));\r\n          console.log(response)\r\n          if (response.status == 200) {\r\n            __this.$refs.noteTitle.innerHTML =\r\n              \"Your Password Has Been Updated! Please Recheck Before Leaving\";\r\n              __this.isSuccess = true;\r\n            __this.logoutUser();\r\n          } else {\r\n            //__this.editNotes(response.message);\r\n            __this.isSuccess = true;\r\n            __this.$refs.noteTitle.innerHTML = response.message;\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Lifecycle Hooks\r\n   */\r\n  beforeMount() {\r\n    if (this.$route.name === \"editAccount\") {\r\n      this.$router.history.push({ name: \"editAccountProfile\" });\r\n    }\r\n\r\n    if (localStorage.getItem(\"User\") != \"\") {\r\n      const UserInfo = JSON.parse(localStorage.getItem(\"User\"));\r\n      this.formData.username = UserInfo[\"username\"];\r\n      this.formData.email = UserInfo[\"email\"];\r\n      this.formData.phone = UserInfo[\"phoneNumber\"];\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-account-page-wrapper {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-around;\r\n}\r\n\r\n.edit-options-wrapper {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  width: 30%;\r\n}\r\n\r\n.update-form-wrapper {\r\n  margin: 100px 0 100px 0;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  width: 60%;\r\n}\r\n\r\n.option-item {\r\n  margin: 20px 0 20px 0;\r\n  background: rgba(225, 101, 31, 0.25);\r\n  width: 100%;\r\n  height: 50px;\r\n  border-radius: 5px;\r\n}\r\n\r\n.reservation-note {\r\n  margin: 20px auto;\r\n  width: 100%;\r\n  border-radius: 20px;\r\n  background-color: #ededed;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.reservation-note > * {\r\n  width: 100%;\r\n}\r\n\r\n.note-title {\r\n  font-family: Roboto, 'san-serif';\r\n  text-align: center;\r\n  font-size: 200%;\r\n  margin: 20px 0 20px 0;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n  .update-form-wrapper {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"]}]}