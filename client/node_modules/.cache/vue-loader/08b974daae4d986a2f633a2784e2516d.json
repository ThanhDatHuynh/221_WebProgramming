{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/CartPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/CartPage.vue","mtime":1655147867992},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vaW1wb3J0IEJ1dHRvbiBmcm9tICIuLi9jb21wb25lbnRzL0J1dHRvbiI7CgppbXBvcnQgJCBmcm9tICJqcXVlcnkiOwovLyBpbXBvcnQgRGlzaCBmcm9tICIuLi9jb21wb25lbnRzL0Rpc2gudnVlIjsKLy8gaW1wb3J0IEJ1dHRvbiBmcm9tICIuLi9jb21wb25lbnRzL0J1dHRvbi52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiTWVudURldGFpbFBhZ2UiLAogICAgY29tcG9uZW50czogewogICAgICAgIC8vQnV0dG9uLAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbG9jYWxDYXJ0OiB7fSwgLy8gZm9yIHVwZGF0ZQogICAgICAgICAgICBkYXRhOiB7fSwKICAgICAgICB9OwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBnZXREYXRhKCkgewogICAgICAgICAgICBjb25zdCBfX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vbWVudWAsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgdGltZW91dDogMCwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKQogICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKS5yZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICBfX3RoaXMuZGF0YSA9IGEuZmlsdGVyKChmb29kKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX3RoaXMuY2FydFtmb29kLmlkXSAmJiBfX3RoaXMuY2FydFtmb29kLmlkXSA+IDA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICBfX3RoaXMubG9jYWxDYXJ0ID0gX190aGlzLmNhcnQ7CiAgICAgICAgfSwKICAgICAgICBkZWNyRm9vZFF1YW50aXR5KGtleSkgewogICAgICAgICAgICBsZXQgY3VycmVudENhcnQgPSB0aGlzLmNhcnQ7CiAgICAgICAgICAgIGlmIChjdXJyZW50Q2FydFtrZXldID4gMCkgewogICAgICAgICAgICAgICAgLS1jdXJyZW50Q2FydFtrZXldOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDYXJ0W2tleV0gPT0gMCkgewogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjdXJyZW50Q2FydFtrZXldOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIoKGZvb2QpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFtmb29kLmlkXSAmJiB0aGlzLmNhcnRbZm9vZC5pZF0gPiAwOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5jYXJ0ID0gY3VycmVudENhcnQ7CiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsQ2FydCA9IHRoaXMuY2FydDsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FydChjdXJyZW50Q2FydCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgIH0sCiAgICAgICAgaW5jckZvb2RRdWFudGl0eShrZXkpIHsKICAgICAgICAgICAgbGV0IGN1cnJlbnRDYXJ0ID0gdGhpcy5jYXJ0OwogICAgICAgICAgICArK2N1cnJlbnRDYXJ0W2tleV07CiAgICAgICAgICAgIHRoaXMuY2FydCA9IGN1cnJlbnRDYXJ0OwogICAgICAgICAgICB0aGlzLmxvY2FsQ2FydCA9IHRoaXMuY2FydDsKICAgICAgICAgICAgdGhpcy51cGRhdGVDYXJ0KGN1cnJlbnRDYXJ0KTsKICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsKICAgICAgICB9LAogICAgfSwKICAgIGluamVjdDogWydjYXJ0JywgJ3VwZGF0ZUNhcnQnXSwKICAgIGJlZm9yZU1vdW50KCkgewogICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgfSwKfTsK"},{"version":3,"sources":["CartPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div class=\"container\" style=\"min-height:60vh\">\n        <div class=\"title-wrapper\">\n            <div class=\"menu-title\">\n                <p>Your Cart</p>\n            </div>\n        </div>\n        <div v-if=\"data.length > 0\">\n            <div>\n                <div v-for=\"food in this.data\" :key=\"food.id\" class=\"row align-items-center justify-center rounded\"\n                    :v-show=\"cart[food.id] >= 0\" style=\"background-color:#f2f2f2; margin:5px\">\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ food.name }}</div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\"><img :src=\"food.image\"\n                            style=\"max-width:100px; border-radius:5px\" /></div>\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\n                        <span @click=\"() => decrFoodQuantity(food.id)\">\n                            <font-awesome-icon icon=\"fa-solid fa-circle-minus\" />\n                        </span>\n                    </div>\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\n                        {{ cart[food.id] }}\n                    </div>\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\n                        <span @click=\"() => incrFoodQuantity(food.id)\">\n                            <font-awesome-icon icon=\"fa-solid fa-circle-plus\" />\n                        </span>\n                    </div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ food.price *\n                            cart[food.id]\n                    }} $</div>\n                </div>\n            </div>\n            <div>\n                <div class=\"row align-items-center justify-center rounded\" style=\"background-color:#f2f2f2; margin:5px\">\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">Total:</div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\"></div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\"></div>\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ data.reduce((result,\n                            food) => result + (food.price * cart[food.id]), 0)\n                    }}$</div>\n                </div>\n            </div>\n        </div>\n        <div v-else>\n            <div class=\"title-wrapper\">\n                <div class=\"menu-title\">\n                    <p>Please choose some food!</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\n//import Button from \"../components/Button\";\n\nimport $ from \"jquery\";\n// import Dish from \"../components/Dish.vue\";\n// import Button from \"../components/Button.vue\";\nexport default {\n    name: \"MenuDetailPage\",\n    components: {\n        //Button,\n    },\n    data() {\n        return {\n            localCart: {}, // for update\n            data: {},\n        };\n    },\n    methods: {\n        getData() {\n            const __this = this;\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/menu`,\n                method: \"GET\",\n                timeout: 0,\n            };\n            $.ajax(settings)\n                .done(function (response) {\n                    let a = JSON.parse(response).response;\n                    __this.data = a.filter((food) => {\n                        return __this.cart[food.id] && __this.cart[food.id] > 0;\n                    });\n                })\n            __this.localCart = __this.cart;\n        },\n        decrFoodQuantity(key) {\n            let currentCart = this.cart;\n            if (currentCart[key] > 0) {\n                --currentCart[key];\n                if (currentCart[key] == 0) {\n                    delete currentCart[key];\n                    this.data = this.data.filter((food) => {\n                        return this.cart[food.id] && this.cart[food.id] > 0;\n                    });\n                }\n                this.cart = currentCart;\n                this.localCart = this.cart;\n                this.updateCart(currentCart);\n            }\n            this.$forceUpdate()\n        },\n        incrFoodQuantity(key) {\n            let currentCart = this.cart;\n            ++currentCart[key];\n            this.cart = currentCart;\n            this.localCart = this.cart;\n            this.updateCart(currentCart);\n            this.$forceUpdate();\n        },\n    },\n    inject: ['cart', 'updateCart'],\n    beforeMount() {\n        this.getData();\n    },\n};\n</script>\n\n<style scoped>\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\n\n.title-wrapper {\n    margin-bottom: 4%;\n}\n\n.menu-title {\n    font-family: Oleo Script Swash Caps;\n    text-align: center;\n    font-size: 500%;\n    margin: 2% 0% -1% 0%;\n}\n\n.menu-description {\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n        Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n    text-align: center;\n    margin: 0% 8% -1% 8%;\n}\n\n.btn-wrapper {\n    margin: 25px 0 65px 0;\n}\n</style>\n"]}]}