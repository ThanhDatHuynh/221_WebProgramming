{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminAboutPage.vue?vue&type=style&index=0&id=2a575b5e&scoped=true&lang=css&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminAboutPage.vue","mtime":1655275222345},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/css-loader/dist/cjs.js","mtime":1654787308129},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1654787310467},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/postcss-loader/src/index.js","mtime":1654787310108},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWRpdC1ibG9nLXdyYXBwZXIgewogICAgbWFyZ2luOiA1MHB4IDAgNTBweCAwOwp9CgoucmVzZXJ2YXRpb24tdGl0bGUgewogICAgZm9udC1mYW1pbHk6IE9sZW8gU2NyaXB0IFN3YXNoIENhcHM7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBmb250LXNpemU6IDUwMCU7CiAgICBtYXJnaW46IDBweCAwcHggNTBweCAwcHg7Cn0KCi5yZXNlcnZhdGlvbi1ub3RlIHsKICAgIG1hcmdpbjogMjBweCBhdXRvOwogICAgd2lkdGg6IDEwMCU7CiAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2VkZWRlZDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBmbGV4LXdyYXA6IHdyYXA7Cn0KCi5yZXNlcnZhdGlvbi1ub3RlPiogewogICAgd2lkdGg6IDEwMCU7Cn0KCi5ub3RlLXRpdGxlIHsKICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sICdzYW4tc2VyaWYnOwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgZm9udC1zaXplOiAyMDAlOwogICAgbWFyZ2luOiAyMHB4IDAgMjBweCAwOwp9CgouZm9ybS13cmFwcGVyIHsKICAgIHdpZHRoOiA1MCU7CiAgICBtYXJnaW46IGF1dG87Cn0KCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDE3MDBweCkgewogICAgLmZvcm0td3JhcHBlciB7CiAgICAgICAgd2lkdGg6IDYwJTsKICAgIH0KfQoKQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTQwMHB4KSB7CiAgICAuZm9ybS13cmFwcGVyIHsKICAgICAgICB3aWR0aDogNzAlOwogICAgfQp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMDAwcHgpIHsKICAgIC5mb3JtLXdyYXBwZXIgewogICAgICAgIHdpZHRoOiA4MCU7CiAgICB9Cn0KCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDcwMHB4KSB7CiAgICAuZm9ybS13cmFwcGVyIHsKICAgICAgICB3aWR0aDogOTAlOwogICAgfQp9Cg=="},{"version":3,"sources":["AdminAboutPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"AdminAboutPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div class=\"edit-blog-wrapper\">\n        <ModalConfirm @toggleModalEvent=\"toggleModalOpen\" :isOpen=\"this.isModalOpen\" :title=\"'Change Confirm'\"\n            :content=\"'You are about to change public information?'\" @callbackEvent=\"handleSubmit\" />\n        <div class=\"reservation-title\">\n            <p>Public Infomation</p>\n        </div>\n        <div class=\"form-wrapper\">\n            <Form :type=\"'EditAbout'\" :data=\"formData\" :errorMessages=\"errorMessages\" @onFormChange=\"handleFormChange\"\n                @onSubmit=\"toggleModalOpen\" />\n            <div v-show=\"isFormSubmited\" class=\"reservation-note\" ref=\"note\">\n                <div ref=\"noteTitle\" class=\"note-title\"></div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport Form from \"../components/Form.vue\";\nimport * as yup from \"yup\";\nimport $ from \"jquery\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\n\nexport default {\n    name: \"AdminAboutPage\",\n    components: { Form, ModalConfirm },\n    data() {\n        return {\n            isFormSubmited: false,\n            isModalOpen: false,\n            formData: {\n                // Vue Object Data will be convert into Observer\n                phone: \"\",\n                address: \"\",\n                openTime: \"\",\n                closeTime: \"\",\n            },\n            errorMessages: {\n                phone: \"\",\n                address: \"\",\n                openTime: \"\",\n                closeTime: \"\",\n            },\n\n            // Add field with name in errorMessages for others' validation\n            schema: yup.object().shape({\n                phone: yup\n                    .string()\n                    .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\n                address: yup.string(),\n                openTime: yup.string(),\n                closeTime: yup.string(),\n            }),\n        };\n    },\n    beforeMount() {\n        this.GetPublicInfo()\n    },\n\n    methods: {\n        toggleModalOpen() {\n            this.isModalOpen = !this.isModalOpen;\n        },\n\n        GetPublicInfo() {\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/get_public_info`,\n                method: \"GET\",\n                timeout: 0,\n                data: {},\n                headers: {},\n            };\n\n            $.ajax(settings).then((response) => {\n                const __this = this;\n                response = JSON.parse(response).response;\n                __this.formData.phone = response.phone;\n                __this.formData.address = response.address;\n                __this.formData.openTime = response.open_time;\n                __this.formData.closeTime = response.close_time;\n            });\n        },\n\n        async handleInputValidation({ name, value }) {\n            let validationResult = await this.schema\n                .validate({ [name]: value })\n                .catch((error) => {\n                    return error;\n                });\n            if (validationResult.errors) {\n                this.errorMessages[name] = validationResult.errors[0];\n            } else {\n                this.errorMessages[name] = \"\";\n            }\n        },\n\n        handleFormChange(newData) {\n            this.formData[newData.name] = newData.value;\n            this.handleInputValidation(newData);\n        },\n\n        handleSubmit() {\n            var __this = this;\n            const formData = JSON.parse(JSON.stringify(this.formData));\n            const UserToken = localStorage.getItem(\"UserToken\");\n            if (UserToken === \"\") {\n                alert(\"Please login admin account before to edit or create blog\");\n                return;\n            }\n\n            this.isFormSubmited = true;\n            this.toggleModalOpen();\n            let settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/change_public_info`,\n                method: \"POST\",\n                timeout: 0,\n                data: {\n                    phone: formData.phone,\n                    address: formData.address,\n                    openTime: formData.openTime,\n                    closeTime: formData.closeTime\n                },\n                headers: {\n                    \"Bear-Token\": UserToken,\n                },\n            };\n            $.ajax(settings).done(function (response) {\n                console.log(response);\n                response = JSON.parse(response);\n                if (response.status == 200) {\n                    //__this.$refs.noteTitle.innerHTML = \"Your Public Infoation Have Been Edited\";\n                    __this.$router.go(__this.$router.current)\n                } else {\n                    __this.$refs.noteTitle.innerHTML = response.message;\n                }\n            });\n\n        },\n    },\n};\n</script>\n\n<style scoped>\n.edit-blog-wrapper {\n    margin: 50px 0 50px 0;\n}\n\n.reservation-title {\n    font-family: Oleo Script Swash Caps;\n    text-align: center;\n    font-size: 500%;\n    margin: 0px 0px 50px 0px;\n}\n\n.reservation-note {\n    margin: 20px auto;\n    width: 100%;\n    border-radius: 20px;\n    background-color: #ededed;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n}\n\n.reservation-note>* {\n    width: 100%;\n}\n\n.note-title {\n    font-family: Roboto, 'san-serif';\n    text-align: center;\n    font-size: 200%;\n    margin: 20px 0 20px 0;\n}\n\n.form-wrapper {\n    width: 50%;\n    margin: auto;\n}\n\n@media screen and (max-width: 1700px) {\n    .form-wrapper {\n        width: 60%;\n    }\n}\n\n@media screen and (max-width: 1400px) {\n    .form-wrapper {\n        width: 70%;\n    }\n}\n\n@media screen and (max-width: 1000px) {\n    .form-wrapper {\n        width: 80%;\n    }\n}\n\n@media screen and (max-width: 700px) {\n    .form-wrapper {\n        width: 90%;\n    }\n}\n</style>\n"]}]}