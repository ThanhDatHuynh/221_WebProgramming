{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\CartPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\CartPage.vue","mtime":1655541372413},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQnV0dG9uIGZyb20gIi4uL2NvbXBvbmVudHMvQnV0dG9uIjsNCg0KaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsNCi8vIGltcG9ydCBEaXNoIGZyb20gIi4uL2NvbXBvbmVudHMvRGlzaC52dWUiOw0KLy8gaW1wb3J0IEJ1dHRvbiBmcm9tICIuLi9jb21wb25lbnRzL0J1dHRvbi52dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJNZW51RGV0YWlsUGFnZSIsDQogICAgY29tcG9uZW50czogew0KICAgICAgICBCdXR0b24sDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgZGF0YToge30sDQogICAgICAgIH07DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGdldERhdGEoKSB7DQogICAgICAgICAgICBjb25zdCBfX3RoaXMgPSB0aGlzOw0KICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gew0KICAgICAgICAgICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9tZW51YCwNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLA0KICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKQ0KICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgYSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOw0KICAgICAgICAgICAgICAgICAgICBfX3RoaXMuZGF0YSA9IGEuZmlsdGVyKChmb29kKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX190aGlzLmNhcnRbZm9vZC5pZF0gJiYgX190aGlzLmNhcnRbZm9vZC5pZF0gPiAwOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgX190aGlzLmxvY2FsQ2FydCA9IF9fdGhpcy5jYXJ0Ow0KICAgICAgICB9LA0KICAgICAgICBkZWNyRm9vZFF1YW50aXR5KGtleSkgew0KICAgICAgICAgICAgbGV0IGN1cnJlbnRDYXJ0ID0gdGhpcy5jYXJ0Ow0KICAgICAgICAgICAgaWYgKGN1cnJlbnRDYXJ0W2tleV0gPiAwKSB7DQogICAgICAgICAgICAgICAgLS1jdXJyZW50Q2FydFtrZXldOw0KICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2FydFtrZXldID09IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGN1cnJlbnRDYXJ0W2tleV07DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5maWx0ZXIoKGZvb2QpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRbZm9vZC5pZF0gJiYgdGhpcy5jYXJ0W2Zvb2QuaWRdID4gMDsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FydChjdXJyZW50Q2FydCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpDQogICAgICAgIH0sDQogICAgICAgIGluY3JGb29kUXVhbnRpdHkoa2V5KSB7DQogICAgICAgICAgICBsZXQgY3VycmVudENhcnQgPSB0aGlzLmNhcnQ7DQogICAgICAgICAgICArK2N1cnJlbnRDYXJ0W2tleV07DQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNhcnQoY3VycmVudENhcnQpOw0KICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgb25DbG9zZU1vZGFsKCkgew0KICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5yZXNldENhcnQoKTsgLy8gRmx1c2gNCiAgICAgICAgICAgIHRoaXMuJHZtMi5jbG9zZSgnbW9kYWwtMicpOw0KICAgICAgICAgICAgbGV0IGN1cnJlbnRDYXJ0ID0gdGhpcy5jYXJ0Ow0KICAgICAgICAgICAgZm9yICh2YXIgZW50cnkgaW4gY3VycmVudENhcnQpIGRlbGV0ZSBjdXJyZW50Q2FydFtlbnRyeV07DQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNhcnQoY3VycmVudENhcnQpOw0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tZW51Iik7DQogICAgICAgIH0NCiAgICB9LA0KICAgIGluamVjdDogWydjYXJ0JywgJ3VwZGF0ZUNhcnQnLCAncmVzZXRDYXJ0J10sDQogICAgYmVmb3JlTW91bnQoKSB7DQogICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgIH0sDQp9Ow0K"},{"version":3,"sources":["CartPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"container\" style=\"min-height:60vh\">\r\n        <div class=\"title-wrapper\">\r\n            <div class=\"menu-title\">\r\n                <p>Your Cart</p>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"data.length > 0\">\r\n            <div>\r\n                <div v-for=\"food in this.data\" :key=\"food.id\" class=\"row align-items-center justify-center rounded\"\r\n                    :v-show=\"cart[food.id] && cart[food.id] >= 0\" style=\"background-color:#f2f2f2; margin:5px\">\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ food.name }}</div>\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\"><img :src=\"food.image\"\r\n                            style=\"max-width:100px; border-radius:5px\" /></div>\r\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\r\n                        <button @click=\"() => decrFoodQuantity(food.id)\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-circle-minus\" />\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\r\n                        {{ cart[food.id] }}\r\n                    </div>\r\n                    <div class=\"col-1 text-center\" style=\"flex-wrap:wrap; align-self:center\">\r\n                        <button @click=\"() => incrFoodQuantity(food.id)\">\r\n                            <font-awesome-icon icon=\"fa-solid fa-circle-plus\" />\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center\">{{ food.price *\r\n                    cart[food.id]\r\n                    }} $</div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div class=\"row align-items-center justify-center rounded\" style=\"background-color:#f2f2f2; margin:5px\">\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\">Total:\r\n                    </div>\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\"></div>\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\"></div>\r\n                    <div class=\"col-3 text-center\" style=\"flex-wrap:wrap; align-self:center; font-weight:bold\">{{\r\n                    data.reduce((result,\r\n                    food) => result + (food.price * cart[food.id]), 0)\r\n                    }}$</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"btn-wrapper d-flex flex-wrap justify-center\">\r\n                <Button @onClick=\"$vm2.open('modal-2')\" text=\"Order\" width=\"148px\" height=\"53px\" />\r\n            </div>\r\n            <modal-vue @on-close=\"onCloseModal\" name=\"modal-2\" :headerOptions=\"{\r\n                title: 'Notification',\r\n            }\" noFooter>\r\n                <p class=\"text-center\">Order successfully!</p>\r\n            </modal-vue>\r\n        </div>\r\n        <div v-else>\r\n            <div class=\"title-wrapper\">\r\n                <div class=\"menu-title\">\r\n                    <p>Please choose some food!</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Button from \"../components/Button\";\r\n\r\nimport $ from \"jquery\";\r\n// import Dish from \"../components/Dish.vue\";\r\n// import Button from \"../components/Button.vue\";\r\nexport default {\r\n    name: \"MenuDetailPage\",\r\n    components: {\r\n        Button,\r\n    },\r\n    data() {\r\n        return {\r\n            data: {},\r\n        };\r\n    },\r\n    methods: {\r\n        getData() {\r\n            const __this = this;\r\n            var settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/menu`,\r\n                method: \"GET\",\r\n                timeout: 0,\r\n            };\r\n            $.ajax(settings)\r\n                .done(function (response) {\r\n                    let a = JSON.parse(response).response;\r\n                    __this.data = a.filter((food) => {\r\n                        return __this.cart[food.id] && __this.cart[food.id] > 0;\r\n                    });\r\n                })\r\n            __this.localCart = __this.cart;\r\n        },\r\n        decrFoodQuantity(key) {\r\n            let currentCart = this.cart;\r\n            if (currentCart[key] > 0) {\r\n                --currentCart[key];\r\n                if (currentCart[key] == 0) {\r\n                    delete currentCart[key];\r\n                    this.data = this.data.filter((food) => {\r\n                        return this.cart[food.id] && this.cart[food.id] > 0;\r\n                    });\r\n                }\r\n                this.updateCart(currentCart);\r\n            }\r\n            this.$forceUpdate()\r\n        },\r\n        incrFoodQuantity(key) {\r\n            let currentCart = this.cart;\r\n            ++currentCart[key];\r\n            this.updateCart(currentCart);\r\n            this.$forceUpdate();\r\n        },\r\n        async onCloseModal() {\r\n            // await this.resetCart(); // Flush\r\n            this.$vm2.close('modal-2');\r\n            let currentCart = this.cart;\r\n            for (var entry in currentCart) delete currentCart[entry];\r\n            this.updateCart(currentCart);\r\n            this.$router.push(\"/menu\");\r\n        }\r\n    },\r\n    inject: ['cart', 'updateCart', 'resetCart'],\r\n    beforeMount() {\r\n        this.getData();\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\r\n@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');\r\n\r\nbutton {\r\n    transition: transform .1.5s;\r\n    /* Animation */\r\n}\r\n\r\nbutton:hover {\r\n    transform: scale(1.5);\r\n    /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */\r\n}\r\n\r\n.title-wrapper {\r\n    margin-bottom: 4%;\r\n}\r\n\r\n.menu-title {\r\n    font-family: Oleo Script Swash Caps;\r\n    text-align: center;\r\n    font-size: 500%;\r\n    margin: 2% 0% -1% 0%;\r\n}\r\n\r\n.menu-description {\r\n    font-family: 'Roboto', sans-serif;\r\n    /*font-family: 'Hahmlet';*/\r\n    text-align: center;\r\n    margin: 0% 8% -1% 8%;\r\n}\r\n\r\n.btn-wrapper {\r\n    margin: 25px 0 65px 0;\r\n}\r\n</style>\r\n"]}]}