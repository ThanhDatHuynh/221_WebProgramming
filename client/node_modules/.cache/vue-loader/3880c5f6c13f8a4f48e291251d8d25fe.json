{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\AdminUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\AdminUser.vue","mtime":1655549024888},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJCBmcm9tICJqcXVlcnkiOw0KaW1wb3J0IEFkbWluSXRlbSBmcm9tICIuLi9jb21wb25lbnRzL0FkbWluSXRlbS52dWUiOw0KaW1wb3J0IE1vZGFsQ29uZmlybSBmcm9tICIuLi9jb21wb25lbnRzL01vZGFsQ29uZmlybS52dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJhZG1pblVzZXIiLA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgQWRtaW5JdGVtLA0KICAgICAgICBNb2RhbENvbmZpcm0sDQogICAgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgcGFnZTogMSwNCiAgICAgICAgICAgIGlzRGVsZXRlTW9kYWxPcGVuOiBmYWxzZSwNCiAgICAgICAgICAgIGlzQmxvY2tNb2RhbE9wZW46IGZhbHNlLA0KICAgICAgICAgICAgaWRVc2VyOiAwLA0KICAgICAgICAgICAgaWRVc2VyQmxvY2s6IDAsDQogICAgICAgICAgICB1c2VyczogW10sDQogICAgICAgIH07DQogICAgfSwgY29tcHV0ZWQ6IHsNCiAgICAgICAgbW9kZWxQYWdlOiB7DQogICAgICAgICAgICBnZXQoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFnZTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBzZXQodmFsdWUpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnBhZ2UgPSB2YWx1ZTsNCiAgICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIC8vIHJlbG9hZFBhZ2UoKSB7DQogICAgICAgIC8vICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgIC8vICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FkbWluL3VzZXIiKTsNCiAgICAgICAgLy8gfSwNCg0KICAgICAgICB0b2dnbGVEZWxldGVCdG4oaWQpIHsNCiAgICAgICAgICAgIHRoaXMuaXNEZWxldGVNb2RhbE9wZW4gPSAhdGhpcy5pc0RlbGV0ZU1vZGFsT3BlbjsNCiAgICAgICAgICAgIHRoaXMuaWRVc2VyID0gaWQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgdG9nZ2xlQmxvY2tCdG4oaWQpIHsNCiAgICAgICAgICAgIHRoaXMuaXNCbG9ja01vZGFsT3BlbiA9ICF0aGlzLmlzQmxvY2tNb2RhbE9wZW47DQogICAgICAgICAgICB0aGlzLmlkVXNlckJsb2NrID0gaWQ7DQogICAgICAgIH0sDQoNCiAgICAgICAgYmxvY2tVc2VyKCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy51c2Vyc1twYXJzZUludCh0aGlzLmlkVXNlckJsb2NrKSAtIDFdKQ0KICAgICAgICAgICAgdmFyIHJlc3RVUkwgPSB0aGlzLnVzZXJzW3BhcnNlSW50KHRoaXMuaWRVc2VyQmxvY2spIC0gMV0uYmxvY2sgPyAidW5ibG9ja191c2VyIiA6ICJibG9ja191c2VyIjsNCiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHsNCiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vJHtyZXN0VVJMfWAsDQogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICAgICAgdGltZW91dDogMCwNCiAgICAgICAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnVzZXJzW3BhcnNlSW50KHRoaXMuaWRVc2VyQmxvY2spIC0gMV0uZW1haWwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgICAgIkJlYXItVG9rZW4iOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlclRva2VuIiksDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBjb25zb2xlLmxvZygiVGhpcyBydW4iKQ0KICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKQ0KICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKHRoaXMuJHJvdXRlci5jdXJyZW50KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlVXNlcigpIHsNCiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHsNCiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vZGVsZXRlX3VzZXIveyR7dGhpcy5pZFVzZXJ9fWAsDQogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICAgICAgdGltZW91dDogMCwNCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICJCZWFyLVRva2VuIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXJUb2tlbiIpLA0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAkLmFqYXgoc2V0dGluZ3MpDQogICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28odGhpcy4kcm91dGVyLmN1cnJlbnQpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCg0KICAgICAgICBnZXRVc2VyKCkgew0KICAgICAgICAgICAgY29uc3QgX190aGlzID0gdGhpczsNCiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHsNCiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vZ2V0X2Jsb2NrX3VzZXJzYCwNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLA0KICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsDQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAiQmVhci1Ub2tlbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIHZhciBibG9ja1VzZXJzID0gW107DQogICAgICAgICAgICAkLmFqYXgoc2V0dGluZ3MpLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgYmxvY2tVc2VycyA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOw0KICAgICAgICAgICAgICAgIHNldHRpbmdzID0gew0KICAgICAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vdXNlcnNgLA0KICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLA0KICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAwLA0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAiQmVhci1Ub2tlbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICQuYWpheChzZXR0aW5ncykNCiAgICAgICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gSlNPTi5wYXJzZShyZXNwb25zZSkucmVzcG9uc2U7DQogICAgICAgICAgICAgICAgICAgICAgICBhLmZvckVhY2godXNlciA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5KGJsb2NrVXNlcnMpLmZpbmQoYmxvY2tVc2VyID0+IHVzZXIuZW1haWwgPT0gYmxvY2tVc2VyKSAhPSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5ibG9jayA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5ibG9jayA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgX190aGlzLnVzZXJzID0gYTsNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pOw0KDQoNCiAgICAgICAgfSwNCiAgICB9LA0KICAgIGJlZm9yZU1vdW50KCkgew0KICAgICAgICB0aGlzLmdldFVzZXIoKTsNCiAgICB9LA0KfQ0K"},{"version":3,"sources":["AdminUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"AdminUser.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div style=\"min-height:65%;\">\r\n        <div class=\"d-flex flex-wrap justify-center\">\r\n            <AdminItem type=\"UserHeader\" :width=\"'100vw'\" :height=\"'100px'\" :imgSize=\"'70px'\"\r\n                :items=\"['ID', 'Name', 'Email', 'Phone', 'Manager']\" />\r\n        </div>\r\n        <div class=\"d-flex flex-wrap justify-center\">\r\n            <div v-for=\"user in users.filter(\r\n                (_, index) => index >= (page - 1) * 5 && index <= page * 5 - 1\r\n            )\" :key=\"user.id\">\r\n                <AdminItem type=\"User\" :width=\"'100vw'\" :height=\"'100px'\" :imgSize=\"'70px'\"\r\n                    :items=\"[user.id, user.username, user.email, user.phoneNumber, user.manager, user.block]\"\r\n                    @onSubmit=\"toggleDeleteBtn(user.id)\" @onBlock=\"toggleBlockBtn(user.id)\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"text-center\">\r\n            <v-pagination class=\"mt-4 mb-8\" v-model=\"modelPage\" color=\"#e1651f\" :length=\"\r\n                users.length % 5 === 0\r\n                    ? Math.floor(users.length / 5)\r\n                    : Math.floor(users.length / 5) + 1\r\n            \" circle></v-pagination>\r\n        </div>\r\n        <ModalConfirm @toggleModalEvent=\"toggleDeleteBtn()\" :isOpen=\"this.isDeleteModalOpen\" :title=\"'Are you sure ?'\"\r\n            :content=\"'Do you want to delete this user?'\" @callbackEvent=\"deleteUser\" />\r\n\r\n        <ModalConfirm @toggleModalEvent=\"toggleBlockBtn()\" :isOpen=\"this.isBlockModalOpen\" :title=\"'Are you sure ?'\"\r\n            :content=\"'Do you want to do this?'\" @callbackEvent=\"blockUser\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport AdminItem from \"../components/AdminItem.vue\";\r\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\r\nexport default {\r\n    name: \"adminUser\",\r\n    components: {\r\n        AdminItem,\r\n        ModalConfirm,\r\n    },\r\n    data() {\r\n        return {\r\n            page: 1,\r\n            isDeleteModalOpen: false,\r\n            isBlockModalOpen: false,\r\n            idUser: 0,\r\n            idUserBlock: 0,\r\n            users: [],\r\n        };\r\n    }, computed: {\r\n        modelPage: {\r\n            get() {\r\n                return this.page;\r\n            },\r\n            set(value) {\r\n                this.page = value;\r\n            },\r\n        },\r\n    },\r\n    methods: {\r\n        // reloadPage() {\r\n        //     window.location.reload();\r\n        //     window.location.replace(\"http://localhost:8080/admin/user\");\r\n        // },\r\n\r\n        toggleDeleteBtn(id) {\r\n            this.isDeleteModalOpen = !this.isDeleteModalOpen;\r\n            this.idUser = id;\r\n        },\r\n\r\n        toggleBlockBtn(id) {\r\n            this.isBlockModalOpen = !this.isBlockModalOpen;\r\n            this.idUserBlock = id;\r\n        },\r\n\r\n        blockUser() {\r\n            console.log(this.users[parseInt(this.idUserBlock) - 1])\r\n            var restURL = this.users[parseInt(this.idUserBlock) - 1].block ? \"unblock_user\" : \"block_user\";\r\n            var settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/admin/${restURL}`,\r\n                method: \"POST\",\r\n                timeout: 0,\r\n                data: {\r\n                    email: this.users[parseInt(this.idUserBlock) - 1].email\r\n                },\r\n                headers: {\r\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\r\n                },\r\n            };\r\n            console.log(\"This run\")\r\n            $.ajax(settings)\r\n                .done(() => {\r\n                    this.$router.go(this.$router.current);\r\n                });\r\n        },\r\n        deleteUser() {\r\n            var settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/admin/delete_user/{${this.idUser}}`,\r\n                method: \"POST\",\r\n                timeout: 0,\r\n                headers: {\r\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\r\n                },\r\n            };\r\n\r\n            $.ajax(settings)\r\n                .done(() => {\r\n                    this.$router.go(this.$router.current)\r\n                })\r\n        },\r\n\r\n        getUser() {\r\n            const __this = this;\r\n            var settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/admin/get_block_users`,\r\n                method: \"GET\",\r\n                timeout: 0,\r\n                headers: {\r\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\r\n                },\r\n            };\r\n            var blockUsers = [];\r\n            $.ajax(settings).done(function (response) {\r\n                blockUsers = JSON.parse(response).response;\r\n                settings = {\r\n                    url: `${process.env.VUE_APP_API_URL}/admin/users`,\r\n                    method: \"GET\",\r\n                    timeout: 0,\r\n                    headers: {\r\n                        \"Bear-Token\": localStorage.getItem(\"UserToken\"),\r\n                    },\r\n                };\r\n                $.ajax(settings)\r\n                    .done(function (response) {\r\n                        const a = JSON.parse(response).response;\r\n                        a.forEach(user => {\r\n                            if (Array(blockUsers).find(blockUser => user.email == blockUser) != undefined) {\r\n                                user.block = true;\r\n                            } else {\r\n                                user.block = false;\r\n                            }\r\n                        });\r\n                        __this.users = a;\r\n                    })\r\n            });\r\n\r\n\r\n        },\r\n    },\r\n    beforeMount() {\r\n        this.getUser();\r\n    },\r\n}\r\n</script>"]}]}