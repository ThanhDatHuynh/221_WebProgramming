{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/BlogDetailPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/BlogDetailPage.vue","mtime":1654786669533},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb21tZW50IGZyb20gIi4uL2NvbXBvbmVudHMvQ29tbWVudC52dWUiOwppbXBvcnQgUGFyYWdyYXBoIGZyb20gIi4uL2NvbXBvbmVudHMvUGFyYWdyYXBoLnZ1ZSI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBDb21tZW50TGlzdEl0ZW0gZnJvbSAiLi4vY29tcG9uZW50cy9Db21tZW50TGlzdEl0ZW0udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgUGFyYWdyYXBoLCBDb21tZW50LCBDb21tZW50TGlzdEl0ZW0gfSwKICBuYW1lOiAiYmxvZ0RldGFpbCIsCiAgZGF0YSgpIHsKICAgIHZhciBtYW5hZ2VyVmFsdWUgPSAiMCI7CiAgICB2YXIgdXNlclZhbHVlID0gbnVsbDsKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlciIpICE9IG51bGwpIHsKICAgICAgbWFuYWdlclZhbHVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlciIpKS5tYW5hZ2VyOwogICAgICB1c2VyVmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikpOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICAvLyBWdWUgT2JqZWN0IERhdGEgd2lsbCBiZSBjb252ZXJ0IGludG8gT2JzZXJ2ZXIKICAgICAgfSwKICAgICAgaXRlbTogW10sCiAgICAgIGNvbW1lbnRzOiBbXSwKICAgICAgbnVtQmxvZzogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICBtYW5hZ2VyOiBtYW5hZ2VyVmFsdWUsCiAgICAgIHVzZXI6IHVzZXJWYWx1ZSwKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgcmVsb2FkUGFnZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ibG9nIik7CiAgICB9LAoKICAgIHJvdXRlVG9FZGl0QmxvZygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJhZG1pbkVkaXRCbG9nIiwKICAgICAgICBwYXJhbXM6IHsgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCB9LAogICAgICB9KTsKICAgIH0sCgogICAgZGVsZXRlUG9zdCgpIHsKICAgICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlclRva2VuIik7CiAgICAgIHZhciBfX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHNldHRpbmdzID0gewogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9hZG1pbi9kZWxldGVfYmxvZy97JHt0aGlzLm51bUJsb2d9fWAsCiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgdGltZW91dDogMCwKICAgICAgICBkYXRhOiB7fSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQmVhci1Ub2tlbiI6IHRva2VuLAogICAgICAgIH0sCiAgICAgIH07CgogICAgICAkLmFqYXgoc2V0dGluZ3MpLnRoZW4oKCkgPT4gewogICAgICAgIF9fdGhpcy5yZWxvYWRQYWdlKCk7CiAgICAgIH0pOwogICAgfSwKCiAgICBHZXRCbG9nRGF0YSgpIHsKICAgICAgdmFyIHNldHRpbmdzID0gewogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9ibG9nL3ske3RoaXMubnVtQmxvZ319YCwKICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgZGF0YToge30sCiAgICAgICAgaGVhZGVyczoge30sCiAgICAgIH07CgogICAgICAkLmFqYXgoc2V0dGluZ3MpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICBjb25zdCBhID0gSlNPTi5wYXJzZShyZXNwb25zZSkucmVzcG9uc2U7CiAgICAgICAgdGhpcy5pdGVtID0gYTsKICAgICAgICB0aGlzLmNvbW1lbnRzID0gdGhpcy5pdGVtLmNvbW1lbnRzOwogICAgICB9KTsKICAgIH0sCiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgIHRoaXMuR2V0QmxvZ0RhdGEoKTsKICB9LAp9Owo="},{"version":3,"sources":["BlogDetailPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogDetailPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div v-if=\"!isLoading\" id=\"blog-detail\">\n    <v-container>\n      <v-layout align-center justify-space-around>\n        <h1>{{ item.blog.title }}</h1>\n        <v-btn\n          v-show=\"manager == '1'\"\n          @click=\"this.deletePost\"\n          width=\"7vw\"\n          height=\"2.5vw\"\n          color=\"#e1651f\"\n        >\n          <span class=\"linkText\">Delete</span>\n        </v-btn>\n        <v-btn\n          v-show=\"manager == '1'\"\n          @click=\"this.routeToEditBlog\"\n          width=\"7vw\"\n          height=\"2.5vw\"\n          color=\"#e1651f\"\n        >\n          <span class=\"linkText\">Edit</span>\n        </v-btn>\n      </v-layout>\n      <v-layout align-center justify-center>\n        <v-img\n          max-height=\"30vw\"\n          max-width=\"100vw\"\n          :src=\"item.blog.image\"\n        ></v-img>\n      </v-layout>\n    </v-container>\n\n    <div class=\"blogContent\">\n      <h3>WRITTEN ON {{ item.blog.date }}</h3>\n\n      <paragraph :content=\"item.blog.content\"></paragraph>\n    </div>\n\n    <div class=\"reply\">\n      <h2>Reply</h2>\n      <comment v-if=\"user !== null\" :id=\"item.blog.id\" />\n      <div v-for=\"comment in comments.slice().reverse()\" :key=\"comment.id\">\n        <comment-list-item :comment=\"comment\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Comment from \"../components/Comment.vue\";\nimport Paragraph from \"../components/Paragraph.vue\";\nimport $ from \"jquery\";\nimport CommentListItem from \"../components/CommentListItem.vue\";\nexport default {\n  components: { Paragraph, Comment, CommentListItem },\n  name: \"blogDetail\",\n  data() {\n    var managerValue = \"0\";\n    var userValue = null;\n    if (localStorage.getItem(\"User\") != null) {\n      managerValue = JSON.parse(localStorage.getItem(\"User\")).manager;\n      userValue = JSON.parse(localStorage.getItem(\"User\"));\n    }\n    return {\n      isLoading: false,\n      formData: {\n        // Vue Object Data will be convert into Observer\n      },\n      item: [],\n      comments: [],\n      numBlog: this.$route.params.id,\n      manager: managerValue,\n      user: userValue,\n    };\n  },\n\n  methods: {\n    reloadPage() {\n      this.$router.push(\"/blog\");\n    },\n\n    routeToEditBlog() {\n      this.$router.push({\n        name: \"adminEditBlog\",\n        params: { id: this.$route.params.id },\n      });\n    },\n\n    deletePost() {\n      const token = localStorage.getItem(\"UserToken\");\n      var __this = this;\n\n      var settings = {\n        url: `${process.env.VUE_APP_API_URL}/admin/delete_blog/{${this.numBlog}}`,\n        method: \"POST\",\n        timeout: 0,\n        data: {},\n        headers: {\n          \"Bear-Token\": token,\n        },\n      };\n\n      $.ajax(settings).then(() => {\n        __this.reloadPage();\n      });\n    },\n\n    GetBlogData() {\n      var settings = {\n        url: `${process.env.VUE_APP_API_URL}/blog/{${this.numBlog}}`,\n        method: \"GET\",\n        timeout: 0,\n        data: {},\n        headers: {},\n      };\n\n      $.ajax(settings).then((response) => {\n        this.isLoading = false;\n        const a = JSON.parse(response).response;\n        this.item = a;\n        this.comments = this.item.comments;\n      });\n    },\n  },\n  beforeMount() {\n    this.isLoading = true;\n    this.GetBlogData();\n  },\n};\n</script>\n\n<style scoped>\n.blogContent {\n  padding: 5vw;\n}\n.reply {\n  padding: 0vw 5vw 5vw 5vw;\n}\n\n.linkText {\n  color: white;\n  font-size: 1vw;\n}\n.title {\n  min-height: 70px;\n}\n</style>\n"]}]}