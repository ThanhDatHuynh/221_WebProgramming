{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\AdminAboutPage.vue?vue&type=style&index=0&id=2a575b5e&scoped=true&lang=css&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\AdminAboutPage.vue","mtime":1655544293891},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":1655541768209},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655541769422},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":1655541769225},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZWRpdC1ibG9nLXdyYXBwZXIgew0KICAgIG1hcmdpbjogNTBweCAwIDUwcHggMDsNCn0NCg0KLnJlc2VydmF0aW9uLXRpdGxlIHsNCiAgICBmb250LWZhbWlseTogT2xlbyBTY3JpcHQgU3dhc2ggQ2FwczsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgZm9udC1zaXplOiA1MDAlOw0KICAgIG1hcmdpbjogMHB4IDBweCA1MHB4IDBweDsNCn0NCg0KLnJlc2VydmF0aW9uLW5vdGUgew0KICAgIG1hcmdpbjogMjBweCBhdXRvOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgYmFja2dyb3VuZC1jb2xvcjogI2VkZWRlZDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgZmxleC13cmFwOiB3cmFwOw0KfQ0KDQoucmVzZXJ2YXRpb24tbm90ZT4qIHsNCiAgICB3aWR0aDogMTAwJTsNCn0NCg0KLm5vdGUtdGl0bGUgew0KICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sICdzYW4tc2VyaWYnOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBmb250LXNpemU6IDIwMCU7DQogICAgbWFyZ2luOiAyMHB4IDAgMjBweCAwOw0KfQ0KDQouZm9ybS13cmFwcGVyIHsNCiAgICB3aWR0aDogNTAlOw0KICAgIG1hcmdpbjogYXV0bzsNCn0NCg0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTcwMHB4KSB7DQogICAgLmZvcm0td3JhcHBlciB7DQogICAgICAgIHdpZHRoOiA2MCU7DQogICAgfQ0KfQ0KDQpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxNDAwcHgpIHsNCiAgICAuZm9ybS13cmFwcGVyIHsNCiAgICAgICAgd2lkdGg6IDcwJTsNCiAgICB9DQp9DQoNCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMDBweCkgew0KICAgIC5mb3JtLXdyYXBwZXIgew0KICAgICAgICB3aWR0aDogODAlOw0KICAgIH0NCn0NCg0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzAwcHgpIHsNCiAgICAuZm9ybS13cmFwcGVyIHsNCiAgICAgICAgd2lkdGg6IDkwJTsNCiAgICB9DQp9DQo="},{"version":3,"sources":["AdminAboutPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"AdminAboutPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"edit-blog-wrapper\">\r\n        <ModalConfirm @toggleModalEvent=\"toggleModalOpen\" :isOpen=\"this.isModalOpen\" :title=\"'Change Confirm'\"\r\n            :content=\"'You are about to change public information?'\" @callbackEvent=\"handleSubmit\" />\r\n        <div class=\"reservation-title\">\r\n            <p>Public Infomation</p>\r\n        </div>\r\n        <div class=\"form-wrapper\">\r\n            <Form :type=\"'EditAbout'\" :data=\"formData\" :errorMessages=\"errorMessages\" @onFormChange=\"handleFormChange\"\r\n                @onSubmit=\"toggleModalOpen\" />\r\n            <div v-show=\"isFormSubmited\" class=\"reservation-note\" ref=\"note\">\r\n                <div ref=\"noteTitle\" class=\"note-title\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Form from \"../components/Form.vue\";\r\nimport * as yup from \"yup\";\r\nimport $ from \"jquery\";\r\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\r\n\r\nexport default {\r\n    name: \"AdminAboutPage\",\r\n    components: { Form, ModalConfirm },\r\n    data() {\r\n        return {\r\n            isFormSubmited: false,\r\n            isModalOpen: false,\r\n            formData: {\r\n                // Vue Object Data will be convert into Observer\r\n                phone: \"\",\r\n                address: \"\",\r\n                openTime: \"\",\r\n                closeTime: \"\",\r\n            },\r\n            errorMessages: {\r\n                phone: \"\",\r\n                address: \"\",\r\n                openTime: \"\",\r\n                closeTime: \"\",\r\n            },\r\n\r\n            // Add field with name in errorMessages for others' validation\r\n            schema: yup.object().shape({\r\n                phone: yup\r\n                    .string()\r\n                    .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\r\n                address: yup.string().min(1).label(\"Address\"),\r\n                openTime: yup.string(),\r\n                closeTime: yup.string(),\r\n            }),\r\n        };\r\n    },\r\n    beforeMount() {\r\n        this.GetPublicInfo()\r\n    },\r\n\r\n    methods: {\r\n        toggleModalOpen() {\r\n            this.isModalOpen = !this.isModalOpen;\r\n        },\r\n\r\n        GetPublicInfo() {\r\n            var settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/get_public_info`,\r\n                method: \"GET\",\r\n                timeout: 0,\r\n                data: {},\r\n                headers: {},\r\n            };\r\n\r\n            $.ajax(settings).then((response) => {\r\n                const __this = this;\r\n                response = JSON.parse(response).response;\r\n                __this.formData.phone = response.phone;\r\n                __this.formData.address = response.address;\r\n                __this.formData.openTime = response.open_time;\r\n                __this.formData.closeTime = response.close_time;\r\n            });\r\n        },\r\n\r\n        async handleInputValidation({ name, value }) {\r\n            let validationResult = await this.schema\r\n                .validate({ [name]: value })\r\n                .catch((error) => {\r\n                    return error;\r\n                });\r\n            if (validationResult.errors) {\r\n                this.errorMessages[name] = validationResult.errors[0];\r\n                return false;\r\n            } else {\r\n                this.errorMessages[name] = \"\";\r\n                return true;\r\n            }\r\n        },\r\n\r\n        handleFormChange(newData) {\r\n            this.formData[newData.name] = newData.value;\r\n            this.handleInputValidation(newData);\r\n        },\r\n\r\n        async handleSubmit() {\r\n            var __this = this;\r\n            let phoneOK = await this.handleInputValidation({name: \"phone\", value: __this.formData.phone});\r\n            let addressOK = await this.handleInputValidation({name: \"address\", value: __this.formData.address});\r\n            if (!phoneOK || !addressOK) {this.toggleModalOpen();return;}\r\n            const formData = JSON.parse(JSON.stringify(this.formData));\r\n            const UserToken = localStorage.getItem(\"UserToken\");\r\n            if (UserToken === \"\") {\r\n                alert(\"Please login admin account before to edit or create blog\");\r\n                return;\r\n            }\r\n\r\n            this.isFormSubmited = true;\r\n            this.toggleModalOpen();\r\n            let settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/admin/change_public_info`,\r\n                method: \"POST\",\r\n                timeout: 0,\r\n                data: {\r\n                    phone: formData.phone,\r\n                    address: formData.address,\r\n                    openTime: formData.openTime,\r\n                    closeTime: formData.closeTime\r\n                },\r\n                headers: {\r\n                    \"Bear-Token\": UserToken,\r\n                },\r\n            };\r\n            $.ajax(settings).done(function (response) {\r\n                console.log(response);\r\n                response = JSON.parse(response);\r\n                if (response.status == 200) {\r\n                    //__this.$refs.noteTitle.innerHTML = \"Your Public Infoation Have Been Edited\";\r\n                    __this.$router.go(__this.$router.current)\r\n                } else {\r\n                    __this.$refs.noteTitle.innerHTML = response.message;\r\n                }\r\n            });\r\n\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-blog-wrapper {\r\n    margin: 50px 0 50px 0;\r\n}\r\n\r\n.reservation-title {\r\n    font-family: Oleo Script Swash Caps;\r\n    text-align: center;\r\n    font-size: 500%;\r\n    margin: 0px 0px 50px 0px;\r\n}\r\n\r\n.reservation-note {\r\n    margin: 20px auto;\r\n    width: 100%;\r\n    border-radius: 20px;\r\n    background-color: #ededed;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.reservation-note>* {\r\n    width: 100%;\r\n}\r\n\r\n.note-title {\r\n    font-family: Roboto, 'san-serif';\r\n    text-align: center;\r\n    font-size: 200%;\r\n    margin: 20px 0 20px 0;\r\n}\r\n\r\n.form-wrapper {\r\n    width: 50%;\r\n    margin: auto;\r\n}\r\n\r\n@media screen and (max-width: 1700px) {\r\n    .form-wrapper {\r\n        width: 60%;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1400px) {\r\n    .form-wrapper {\r\n        width: 70%;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1000px) {\r\n    .form-wrapper {\r\n        width: 80%;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 700px) {\r\n    .form-wrapper {\r\n        width: 90%;\r\n    }\r\n}\r\n</style>\r\n"]}]}