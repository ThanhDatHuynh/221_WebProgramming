{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\AdminAboutPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\AdminAboutPage.vue","mtime":1655544293891},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRm9ybSBmcm9tICIuLi9jb21wb25lbnRzL0Zvcm0udnVlIjsNCmltcG9ydCAqIGFzIHl1cCBmcm9tICJ5dXAiOw0KaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsNCmltcG9ydCBNb2RhbENvbmZpcm0gZnJvbSAiLi4vY29tcG9uZW50cy9Nb2RhbENvbmZpcm0udnVlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICJBZG1pbkFib3V0UGFnZSIsDQogICAgY29tcG9uZW50czogeyBGb3JtLCBNb2RhbENvbmZpcm0gfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaXNGb3JtU3VibWl0ZWQ6IGZhbHNlLA0KICAgICAgICAgICAgaXNNb2RhbE9wZW46IGZhbHNlLA0KICAgICAgICAgICAgZm9ybURhdGE6IHsNCiAgICAgICAgICAgICAgICAvLyBWdWUgT2JqZWN0IERhdGEgd2lsbCBiZSBjb252ZXJ0IGludG8gT2JzZXJ2ZXINCiAgICAgICAgICAgICAgICBwaG9uZTogIiIsDQogICAgICAgICAgICAgICAgYWRkcmVzczogIiIsDQogICAgICAgICAgICAgICAgb3BlblRpbWU6ICIiLA0KICAgICAgICAgICAgICAgIGNsb3NlVGltZTogIiIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZXJyb3JNZXNzYWdlczogew0KICAgICAgICAgICAgICAgIHBob25lOiAiIiwNCiAgICAgICAgICAgICAgICBhZGRyZXNzOiAiIiwNCiAgICAgICAgICAgICAgICBvcGVuVGltZTogIiIsDQogICAgICAgICAgICAgICAgY2xvc2VUaW1lOiAiIiwNCiAgICAgICAgICAgIH0sDQoNCiAgICAgICAgICAgIC8vIEFkZCBmaWVsZCB3aXRoIG5hbWUgaW4gZXJyb3JNZXNzYWdlcyBmb3Igb3RoZXJzJyB2YWxpZGF0aW9uDQogICAgICAgICAgICBzY2hlbWE6IHl1cC5vYmplY3QoKS5zaGFwZSh7DQogICAgICAgICAgICAgICAgcGhvbmU6IHl1cA0KICAgICAgICAgICAgICAgICAgICAuc3RyaW5nKCkNCiAgICAgICAgICAgICAgICAgICAgLm1hdGNoZXMoL15bMC05XXsxMH0kLywgIlBob25lIG51bWJlciBtdXN0IGJlIDEwIGRpZ2l0cyIpLA0KICAgICAgICAgICAgICAgIGFkZHJlc3M6IHl1cC5zdHJpbmcoKS5taW4oMSkubGFiZWwoIkFkZHJlc3MiKSwNCiAgICAgICAgICAgICAgICBvcGVuVGltZTogeXVwLnN0cmluZygpLA0KICAgICAgICAgICAgICAgIGNsb3NlVGltZTogeXVwLnN0cmluZygpLA0KICAgICAgICAgICAgfSksDQogICAgICAgIH07DQogICAgfSwNCiAgICBiZWZvcmVNb3VudCgpIHsNCiAgICAgICAgdGhpcy5HZXRQdWJsaWNJbmZvKCkNCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgICB0b2dnbGVNb2RhbE9wZW4oKSB7DQogICAgICAgICAgICB0aGlzLmlzTW9kYWxPcGVuID0gIXRoaXMuaXNNb2RhbE9wZW47DQogICAgICAgIH0sDQoNCiAgICAgICAgR2V0UHVibGljSW5mbygpIHsNCiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHsNCiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vZ2V0X3B1YmxpY19pbmZvYCwNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLA0KICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsDQogICAgICAgICAgICAgICAgZGF0YToge30sDQogICAgICAgICAgICAgICAgaGVhZGVyczoge30sDQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICAkLmFqYXgoc2V0dGluZ3MpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgX190aGlzID0gdGhpczsNCiAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOw0KICAgICAgICAgICAgICAgIF9fdGhpcy5mb3JtRGF0YS5waG9uZSA9IHJlc3BvbnNlLnBob25lOw0KICAgICAgICAgICAgICAgIF9fdGhpcy5mb3JtRGF0YS5hZGRyZXNzID0gcmVzcG9uc2UuYWRkcmVzczsNCiAgICAgICAgICAgICAgICBfX3RoaXMuZm9ybURhdGEub3BlblRpbWUgPSByZXNwb25zZS5vcGVuX3RpbWU7DQogICAgICAgICAgICAgICAgX190aGlzLmZvcm1EYXRhLmNsb3NlVGltZSA9IHJlc3BvbnNlLmNsb3NlX3RpbWU7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICBhc3luYyBoYW5kbGVJbnB1dFZhbGlkYXRpb24oeyBuYW1lLCB2YWx1ZSB9KSB7DQogICAgICAgICAgICBsZXQgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMuc2NoZW1hDQogICAgICAgICAgICAgICAgLnZhbGlkYXRlKHsgW25hbWVdOiB2YWx1ZSB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VzW25hbWVdID0gdmFsaWRhdGlvblJlc3VsdC5lcnJvcnNbMF07DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZXNbbmFtZV0gPSAiIjsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgICAgICBoYW5kbGVGb3JtQ2hhbmdlKG5ld0RhdGEpIHsNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFbbmV3RGF0YS5uYW1lXSA9IG5ld0RhdGEudmFsdWU7DQogICAgICAgICAgICB0aGlzLmhhbmRsZUlucHV0VmFsaWRhdGlvbihuZXdEYXRhKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBhc3luYyBoYW5kbGVTdWJtaXQoKSB7DQogICAgICAgICAgICB2YXIgX190aGlzID0gdGhpczsNCiAgICAgICAgICAgIGxldCBwaG9uZU9LID0gYXdhaXQgdGhpcy5oYW5kbGVJbnB1dFZhbGlkYXRpb24oe25hbWU6ICJwaG9uZSIsIHZhbHVlOiBfX3RoaXMuZm9ybURhdGEucGhvbmV9KTsNCiAgICAgICAgICAgIGxldCBhZGRyZXNzT0sgPSBhd2FpdCB0aGlzLmhhbmRsZUlucHV0VmFsaWRhdGlvbih7bmFtZTogImFkZHJlc3MiLCB2YWx1ZTogX190aGlzLmZvcm1EYXRhLmFkZHJlc3N9KTsNCiAgICAgICAgICAgIGlmICghcGhvbmVPSyB8fCAhYWRkcmVzc09LKSB7dGhpcy50b2dnbGVNb2RhbE9wZW4oKTtyZXR1cm47fQ0KICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybURhdGEpKTsNCiAgICAgICAgICAgIGNvbnN0IFVzZXJUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKTsNCiAgICAgICAgICAgIGlmIChVc2VyVG9rZW4gPT09ICIiKSB7DQogICAgICAgICAgICAgICAgYWxlcnQoIlBsZWFzZSBsb2dpbiBhZG1pbiBhY2NvdW50IGJlZm9yZSB0byBlZGl0IG9yIGNyZWF0ZSBibG9nIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLmlzRm9ybVN1Ym1pdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMudG9nZ2xlTW9kYWxPcGVuKCk7DQogICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB7DQogICAgICAgICAgICAgICAgdXJsOiBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkx9L2FkbWluL2NoYW5nZV9wdWJsaWNfaW5mb2AsDQogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgICAgICAgICAgdGltZW91dDogMCwNCiAgICAgICAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICAgICAgICAgIHBob25lOiBmb3JtRGF0YS5waG9uZSwNCiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogZm9ybURhdGEuYWRkcmVzcywNCiAgICAgICAgICAgICAgICAgICAgb3BlblRpbWU6IGZvcm1EYXRhLm9wZW5UaW1lLA0KICAgICAgICAgICAgICAgICAgICBjbG9zZVRpbWU6IGZvcm1EYXRhLmNsb3NlVGltZQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAgICAgICAiQmVhci1Ub2tlbiI6IFVzZXJUb2tlbiwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICQuYWpheChzZXR0aW5ncykuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICAvL19fdGhpcy4kcmVmcy5ub3RlVGl0bGUuaW5uZXJIVE1MID0gIllvdXIgUHVibGljIEluZm9hdGlvbiBIYXZlIEJlZW4gRWRpdGVkIjsNCiAgICAgICAgICAgICAgICAgICAgX190aGlzLiRyb3V0ZXIuZ28oX190aGlzLiRyb3V0ZXIuY3VycmVudCkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBfX3RoaXMuJHJlZnMubm90ZVRpdGxlLmlubmVySFRNTCA9IHJlc3BvbnNlLm1lc3NhZ2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgfSwNCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["AdminAboutPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AdminAboutPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"edit-blog-wrapper\">\r\n        <ModalConfirm @toggleModalEvent=\"toggleModalOpen\" :isOpen=\"this.isModalOpen\" :title=\"'Change Confirm'\"\r\n            :content=\"'You are about to change public information?'\" @callbackEvent=\"handleSubmit\" />\r\n        <div class=\"reservation-title\">\r\n            <p>Public Infomation</p>\r\n        </div>\r\n        <div class=\"form-wrapper\">\r\n            <Form :type=\"'EditAbout'\" :data=\"formData\" :errorMessages=\"errorMessages\" @onFormChange=\"handleFormChange\"\r\n                @onSubmit=\"toggleModalOpen\" />\r\n            <div v-show=\"isFormSubmited\" class=\"reservation-note\" ref=\"note\">\r\n                <div ref=\"noteTitle\" class=\"note-title\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Form from \"../components/Form.vue\";\r\nimport * as yup from \"yup\";\r\nimport $ from \"jquery\";\r\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\r\n\r\nexport default {\r\n    name: \"AdminAboutPage\",\r\n    components: { Form, ModalConfirm },\r\n    data() {\r\n        return {\r\n            isFormSubmited: false,\r\n            isModalOpen: false,\r\n            formData: {\r\n                // Vue Object Data will be convert into Observer\r\n                phone: \"\",\r\n                address: \"\",\r\n                openTime: \"\",\r\n                closeTime: \"\",\r\n            },\r\n            errorMessages: {\r\n                phone: \"\",\r\n                address: \"\",\r\n                openTime: \"\",\r\n                closeTime: \"\",\r\n            },\r\n\r\n            // Add field with name in errorMessages for others' validation\r\n            schema: yup.object().shape({\r\n                phone: yup\r\n                    .string()\r\n                    .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\r\n                address: yup.string().min(1).label(\"Address\"),\r\n                openTime: yup.string(),\r\n                closeTime: yup.string(),\r\n            }),\r\n        };\r\n    },\r\n    beforeMount() {\r\n        this.GetPublicInfo()\r\n    },\r\n\r\n    methods: {\r\n        toggleModalOpen() {\r\n            this.isModalOpen = !this.isModalOpen;\r\n        },\r\n\r\n        GetPublicInfo() {\r\n            var settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/get_public_info`,\r\n                method: \"GET\",\r\n                timeout: 0,\r\n                data: {},\r\n                headers: {},\r\n            };\r\n\r\n            $.ajax(settings).then((response) => {\r\n                const __this = this;\r\n                response = JSON.parse(response).response;\r\n                __this.formData.phone = response.phone;\r\n                __this.formData.address = response.address;\r\n                __this.formData.openTime = response.open_time;\r\n                __this.formData.closeTime = response.close_time;\r\n            });\r\n        },\r\n\r\n        async handleInputValidation({ name, value }) {\r\n            let validationResult = await this.schema\r\n                .validate({ [name]: value })\r\n                .catch((error) => {\r\n                    return error;\r\n                });\r\n            if (validationResult.errors) {\r\n                this.errorMessages[name] = validationResult.errors[0];\r\n                return false;\r\n            } else {\r\n                this.errorMessages[name] = \"\";\r\n                return true;\r\n            }\r\n        },\r\n\r\n        handleFormChange(newData) {\r\n            this.formData[newData.name] = newData.value;\r\n            this.handleInputValidation(newData);\r\n        },\r\n\r\n        async handleSubmit() {\r\n            var __this = this;\r\n            let phoneOK = await this.handleInputValidation({name: \"phone\", value: __this.formData.phone});\r\n            let addressOK = await this.handleInputValidation({name: \"address\", value: __this.formData.address});\r\n            if (!phoneOK || !addressOK) {this.toggleModalOpen();return;}\r\n            const formData = JSON.parse(JSON.stringify(this.formData));\r\n            const UserToken = localStorage.getItem(\"UserToken\");\r\n            if (UserToken === \"\") {\r\n                alert(\"Please login admin account before to edit or create blog\");\r\n                return;\r\n            }\r\n\r\n            this.isFormSubmited = true;\r\n            this.toggleModalOpen();\r\n            let settings = {\r\n                url: `${process.env.VUE_APP_API_URL}/admin/change_public_info`,\r\n                method: \"POST\",\r\n                timeout: 0,\r\n                data: {\r\n                    phone: formData.phone,\r\n                    address: formData.address,\r\n                    openTime: formData.openTime,\r\n                    closeTime: formData.closeTime\r\n                },\r\n                headers: {\r\n                    \"Bear-Token\": UserToken,\r\n                },\r\n            };\r\n            $.ajax(settings).done(function (response) {\r\n                console.log(response);\r\n                response = JSON.parse(response);\r\n                if (response.status == 200) {\r\n                    //__this.$refs.noteTitle.innerHTML = \"Your Public Infoation Have Been Edited\";\r\n                    __this.$router.go(__this.$router.current)\r\n                } else {\r\n                    __this.$refs.noteTitle.innerHTML = response.message;\r\n                }\r\n            });\r\n\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-blog-wrapper {\r\n    margin: 50px 0 50px 0;\r\n}\r\n\r\n.reservation-title {\r\n    font-family: Oleo Script Swash Caps;\r\n    text-align: center;\r\n    font-size: 500%;\r\n    margin: 0px 0px 50px 0px;\r\n}\r\n\r\n.reservation-note {\r\n    margin: 20px auto;\r\n    width: 100%;\r\n    border-radius: 20px;\r\n    background-color: #ededed;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.reservation-note>* {\r\n    width: 100%;\r\n}\r\n\r\n.note-title {\r\n    font-family: Roboto, 'san-serif';\r\n    text-align: center;\r\n    font-size: 200%;\r\n    margin: 20px 0 20px 0;\r\n}\r\n\r\n.form-wrapper {\r\n    width: 50%;\r\n    margin: auto;\r\n}\r\n\r\n@media screen and (max-width: 1700px) {\r\n    .form-wrapper {\r\n        width: 60%;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1400px) {\r\n    .form-wrapper {\r\n        width: 70%;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1000px) {\r\n    .form-wrapper {\r\n        width: 80%;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 700px) {\r\n    .form-wrapper {\r\n        width: 90%;\r\n    }\r\n}\r\n</style>\r\n"]}]}