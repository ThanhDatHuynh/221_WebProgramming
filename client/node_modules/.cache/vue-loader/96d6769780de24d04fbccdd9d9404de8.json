{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\BlogDetailPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\BlogDetailPage.vue","mtime":1655551292988},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbWVudCBmcm9tICIuLi9jb21wb25lbnRzL0NvbW1lbnQudnVlIjsNCmltcG9ydCBQYXJhZ3JhcGggZnJvbSAiLi4vY29tcG9uZW50cy9QYXJhZ3JhcGgudnVlIjsNCmltcG9ydCAkIGZyb20gImpxdWVyeSI7DQppbXBvcnQgQ29tbWVudExpc3RJdGVtIGZyb20gIi4uL2NvbXBvbmVudHMvQ29tbWVudExpc3RJdGVtLnZ1ZSI7DQppbXBvcnQgTW9kYWxDb25maXJtIGZyb20gIi4uL2NvbXBvbmVudHMvTW9kYWxDb25maXJtLnZ1ZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgUGFyYWdyYXBoLCBDb21tZW50LCBDb21tZW50TGlzdEl0ZW0sIE1vZGFsQ29uZmlybSB9LA0KICBuYW1lOiAiYmxvZ0RldGFpbCIsDQogIGRhdGEoKSB7DQogICAgdmFyIG1hbmFnZXJWYWx1ZSA9ICIwIjsNCiAgICB2YXIgdXNlclZhbHVlID0gbnVsbDsNCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXIiKSAhPSBudWxsKSB7DQogICAgICBtYW5hZ2VyVmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikpLm1hbmFnZXI7DQogICAgICB1c2VyVmFsdWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikpOw0KICAgIH0NCiAgICByZXR1cm4gew0KICAgICAgcGFnZTogMSwNCiAgICAgIGlzTG9hZGluZzogZmFsc2UsDQogICAgICBmb3JtRGF0YTogew0KICAgICAgICAvLyBWdWUgT2JqZWN0IERhdGEgd2lsbCBiZSBjb252ZXJ0IGludG8gT2JzZXJ2ZXINCiAgICAgIH0sDQogICAgICBpdGVtOiBbXSwNCiAgICAgIGNvbW1lbnRzOiBbXSwNCiAgICAgIG51bUJsb2c6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwNCiAgICAgIG1hbmFnZXI6IG1hbmFnZXJWYWx1ZSwNCiAgICAgIHVzZXI6IHVzZXJWYWx1ZSwNCiAgICAgIGlzTW9kYWxPcGVuOiBmYWxzZSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIG1vZGVsUGFnZTogew0KICAgICAgZ2V0KCkgew0KICAgICAgICByZXR1cm4gdGhpcy5wYWdlOw0KICAgICAgfSwNCiAgICAgIHNldCh2YWx1ZSkgew0KICAgICAgICB0aGlzLnBhZ2UgPSB2YWx1ZTsNCiAgICAgIH0sDQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHRvZ2dsZURlbGV0ZUJ0bigpIHsNCiAgICAgIHRoaXMuaXNNb2RhbE9wZW4gPSAhdGhpcy5pc01vZGFsT3BlbjsNCiAgICB9LA0KICAgIHJlbG9hZFBhZ2UoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2Jsb2ciKTsNCiAgICB9LA0KDQogICAgcm91dGVUb0VkaXRCbG9nKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAiYWRtaW5FZGl0QmxvZyIsDQogICAgICAgIHBhcmFtczogeyBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkIH0sDQogICAgICB9KTsNCiAgICB9LA0KDQogICAgZGVsZXRlUG9zdCgpIHsNCiAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXJUb2tlbiIpOw0KICAgICAgdmFyIF9fdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBzZXR0aW5ncyA9IHsNCiAgICAgICAgdXJsOiBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkx9L2FkbWluL2RlbGV0ZV9ibG9nL3ske3RoaXMubnVtQmxvZ319YCwNCiAgICAgICAgbWV0aG9kOiAiUE9TVCIsDQogICAgICAgIHRpbWVvdXQ6IDAsDQogICAgICAgIGRhdGE6IHt9LA0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgIkJlYXItVG9rZW4iOiB0b2tlbiwNCiAgICAgICAgfSwNCiAgICAgIH07DQoNCiAgICAgICQuYWpheChzZXR0aW5ncykudGhlbigoKSA9PiB7DQogICAgICAgIF9fdGhpcy5yZWxvYWRQYWdlKCk7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgR2V0QmxvZ0RhdGEoKSB7DQogICAgICB2YXIgc2V0dGluZ3MgPSB7DQogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9ibG9nL3ske3RoaXMubnVtQmxvZ319YCwNCiAgICAgICAgbWV0aG9kOiAiR0VUIiwNCiAgICAgICAgdGltZW91dDogMCwNCiAgICAgICAgZGF0YToge30sDQogICAgICAgIGhlYWRlcnM6IHt9LA0KICAgICAgfTsNCg0KICAgICAgJC5hamF4KHNldHRpbmdzKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICBjb25zdCBhID0gSlNPTi5wYXJzZShyZXNwb25zZSkucmVzcG9uc2U7DQogICAgICAgIHRoaXMuaXRlbSA9IGE7DQogICAgICAgIHRoaXMuY29tbWVudHMgPSB0aGlzLml0ZW0uY29tbWVudHM7DQogICAgICB9KTsNCiAgICB9LA0KICB9LA0KICBiZWZvcmVNb3VudCgpIHsNCiAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7DQogICAgdGhpcy5HZXRCbG9nRGF0YSgpOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["BlogDetailPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogDetailPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div v-if=\"!isLoading\" id=\"blog-detail\">\r\n    <v-container>\r\n      <v-layout align-center justify-space-around style=\"flex-wrap:wrap\">\r\n        <h1 class=\"text-center mt-10\">{{ item.blog.title }}</h1>\r\n        <div style=\"width:100%;display:flex;justify-content:center; margin: 20px 0px 20px 0;\">\r\n          <v-btn v-show=\"manager == '1'\" @click=\"toggleDeleteBtn()\" width=\"7vw\" height=\"2.5vw\" color=\"#e1651f\">\r\n            <span class=\"linkText\">Delete</span>\r\n            <ModalConfirm @toggleModalEvent=\"toggleDeleteBtn()\" :isOpen=\"this.isModalOpen\" :title=\"'Are you sure ?'\"\r\n            :content=\"'Do you want to delete this user?'\" @callbackEvent=\"deletePost\" />\r\n          </v-btn>\r\n          <div style=\"width:5%\"></div>\r\n          <v-btn v-show=\"manager == '1'\" @click=\"this.routeToEditBlog\" width=\"7vw\" height=\"2.5vw\" color=\"#e1651f\">\r\n            <span class=\"linkText\">Edit</span>\r\n          </v-btn>\r\n        </div>\r\n      </v-layout>\r\n      <v-layout align-center justify-center>\r\n        <v-img max-height=\"30vw\" max-width=\"70vw\" :src=\"item.blog.image\" style=\"border-radius:10px;\"></v-img>\r\n      </v-layout>\r\n    </v-container>\r\n\r\n    <div class=\"blog-content\">\r\n      <h3>WRITTEN ON {{ item.blog.date }}</h3>\r\n      <paragraph class=\"text-justify\" style='font-family: \"Roboto\", \"sans-serif\";' :content=\"item.blog.content\">\r\n      </paragraph>\r\n    </div>\r\n\r\n    <div class=\"reply\">\r\n      <h2>Reply</h2>\r\n      <comment v-if=\"user !== null\" :id=\"item.blog.id\" />\r\n      <div v-for=\"comment in comments.slice().reverse().filter(\r\n        (_, index) => index >= (page - 1) * 2 && index <= page * 2 - 1\r\n      )\" :key=\"comment.id\">\r\n        <comment-list-item :comment=\"comment\" />\r\n      </div>\r\n      <div class=\"text-center\">\r\n        <v-pagination class=\"mt-4 mb-8\" v-model=\"modelPage\" color=\"#e1651f\" :length=\"\r\n          comments.length % 2 === 0\r\n            ? Math.floor(comments.length / 2)\r\n            : Math.floor(comments.length / 2) + 1\r\n        \" circle></v-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Comment from \"../components/Comment.vue\";\r\nimport Paragraph from \"../components/Paragraph.vue\";\r\nimport $ from \"jquery\";\r\nimport CommentListItem from \"../components/CommentListItem.vue\";\r\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\r\nexport default {\r\n  components: { Paragraph, Comment, CommentListItem, ModalConfirm },\r\n  name: \"blogDetail\",\r\n  data() {\r\n    var managerValue = \"0\";\r\n    var userValue = null;\r\n    if (localStorage.getItem(\"User\") != null) {\r\n      managerValue = JSON.parse(localStorage.getItem(\"User\")).manager;\r\n      userValue = JSON.parse(localStorage.getItem(\"User\"));\r\n    }\r\n    return {\r\n      page: 1,\r\n      isLoading: false,\r\n      formData: {\r\n        // Vue Object Data will be convert into Observer\r\n      },\r\n      item: [],\r\n      comments: [],\r\n      numBlog: this.$route.params.id,\r\n      manager: managerValue,\r\n      user: userValue,\r\n      isModalOpen: false,\r\n    };\r\n  },\r\n  computed: {\r\n    modelPage: {\r\n      get() {\r\n        return this.page;\r\n      },\r\n      set(value) {\r\n        this.page = value;\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    toggleDeleteBtn() {\r\n      this.isModalOpen = !this.isModalOpen;\r\n    },\r\n    reloadPage() {\r\n      this.$router.push(\"/blog\");\r\n    },\r\n\r\n    routeToEditBlog() {\r\n      this.$router.push({\r\n        name: \"adminEditBlog\",\r\n        params: { id: this.$route.params.id },\r\n      });\r\n    },\r\n\r\n    deletePost() {\r\n      const token = localStorage.getItem(\"UserToken\");\r\n      var __this = this;\r\n\r\n      var settings = {\r\n        url: `${process.env.VUE_APP_API_URL}/admin/delete_blog/{${this.numBlog}}`,\r\n        method: \"POST\",\r\n        timeout: 0,\r\n        data: {},\r\n        headers: {\r\n          \"Bear-Token\": token,\r\n        },\r\n      };\r\n\r\n      $.ajax(settings).then(() => {\r\n        __this.reloadPage();\r\n      });\r\n    },\r\n\r\n    GetBlogData() {\r\n      var settings = {\r\n        url: `${process.env.VUE_APP_API_URL}/blog/{${this.numBlog}}`,\r\n        method: \"GET\",\r\n        timeout: 0,\r\n        data: {},\r\n        headers: {},\r\n      };\r\n\r\n      $.ajax(settings).then((response) => {\r\n        this.isLoading = false;\r\n        const a = JSON.parse(response).response;\r\n        this.item = a;\r\n        this.comments = this.item.comments;\r\n      });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.isLoading = true;\r\n    this.GetBlogData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\r\n@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');\r\n\r\n.blog-content {\r\n  padding: 5vw;\r\n  font-family: \"Roboto\", \"sans-serif\";\r\n}\r\n\r\n.reply {\r\n  padding: 0vw 5vw 5vw 5vw;\r\n}\r\n\r\n.linkText {\r\n  color: white;\r\n  font-size: 1vw;\r\n}\r\n\r\n.title {\r\n  min-height: 70px;\r\n}\r\n</style>\r\n"]}]}