{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\BlogDetailPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\BlogDetailPage.vue","mtime":1655541372413},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQ29tbWVudCBmcm9tICIuLi9jb21wb25lbnRzL0NvbW1lbnQudnVlIjsNCmltcG9ydCBQYXJhZ3JhcGggZnJvbSAiLi4vY29tcG9uZW50cy9QYXJhZ3JhcGgudnVlIjsNCmltcG9ydCAkIGZyb20gImpxdWVyeSI7DQppbXBvcnQgQ29tbWVudExpc3RJdGVtIGZyb20gIi4uL2NvbXBvbmVudHMvQ29tbWVudExpc3RJdGVtLnZ1ZSI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgUGFyYWdyYXBoLCBDb21tZW50LCBDb21tZW50TGlzdEl0ZW0gfSwNCiAgbmFtZTogImJsb2dEZXRhaWwiLA0KICBkYXRhKCkgew0KICAgIHZhciBtYW5hZ2VyVmFsdWUgPSAiMCI7DQogICAgdmFyIHVzZXJWYWx1ZSA9IG51bGw7DQogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyIikgIT0gbnVsbCkgew0KICAgICAgbWFuYWdlclZhbHVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlciIpKS5tYW5hZ2VyOw0KICAgICAgdXNlclZhbHVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiVXNlciIpKTsNCiAgICB9DQogICAgcmV0dXJuIHsNCiAgICAgIHBhZ2U6IDEsDQogICAgICBpc0xvYWRpbmc6IGZhbHNlLA0KICAgICAgZm9ybURhdGE6IHsNCiAgICAgICAgLy8gVnVlIE9iamVjdCBEYXRhIHdpbGwgYmUgY29udmVydCBpbnRvIE9ic2VydmVyDQogICAgICB9LA0KICAgICAgaXRlbTogW10sDQogICAgICBjb21tZW50czogW10sDQogICAgICBudW1CbG9nOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsDQogICAgICBtYW5hZ2VyOiBtYW5hZ2VyVmFsdWUsDQogICAgICB1c2VyOiB1c2VyVmFsdWUsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBtb2RlbFBhZ2U6IHsNCiAgICAgIGdldCgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMucGFnZTsNCiAgICAgIH0sDQogICAgICBzZXQodmFsdWUpIHsNCiAgICAgICAgdGhpcy5wYWdlID0gdmFsdWU7DQogICAgICB9LA0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByZWxvYWRQYWdlKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ibG9nIik7DQogICAgfSwNCg0KICAgIHJvdXRlVG9FZGl0QmxvZygpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgbmFtZTogImFkbWluRWRpdEJsb2ciLA0KICAgICAgICBwYXJhbXM6IHsgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCB9LA0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIGRlbGV0ZVBvc3QoKSB7DQogICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKTsNCiAgICAgIHZhciBfX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgc2V0dGluZ3MgPSB7DQogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9hZG1pbi9kZWxldGVfYmxvZy97JHt0aGlzLm51bUJsb2d9fWAsDQogICAgICAgIG1ldGhvZDogIlBPU1QiLA0KICAgICAgICB0aW1lb3V0OiAwLA0KICAgICAgICBkYXRhOiB7fSwNCiAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICJCZWFyLVRva2VuIjogdG9rZW4sDQogICAgICAgIH0sDQogICAgICB9Ow0KDQogICAgICAkLmFqYXgoc2V0dGluZ3MpLnRoZW4oKCkgPT4gew0KICAgICAgICBfX3RoaXMucmVsb2FkUGFnZSgpOw0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIEdldEJsb2dEYXRhKCkgew0KICAgICAgdmFyIHNldHRpbmdzID0gew0KICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYmxvZy97JHt0aGlzLm51bUJsb2d9fWAsDQogICAgICAgIG1ldGhvZDogIkdFVCIsDQogICAgICAgIHRpbWVvdXQ6IDAsDQogICAgICAgIGRhdGE6IHt9LA0KICAgICAgICBoZWFkZXJzOiB7fSwNCiAgICAgIH07DQoNCiAgICAgICQuYWpheChzZXR0aW5ncykudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgY29uc3QgYSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOw0KICAgICAgICB0aGlzLml0ZW0gPSBhOw0KICAgICAgICB0aGlzLmNvbW1lbnRzID0gdGhpcy5pdGVtLmNvbW1lbnRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCiAgYmVmb3JlTW91bnQoKSB7DQogICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOw0KICAgIHRoaXMuR2V0QmxvZ0RhdGEoKTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["BlogDetailPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogDetailPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div v-if=\"!isLoading\" id=\"blog-detail\">\r\n    <v-container>\r\n      <v-layout align-center justify-space-around style=\"flex-wrap:wrap\">\r\n        <h1 class=\"text-center mt-10\">{{ item.blog.title }}</h1>\r\n        <div style=\"width:100%;display:flex;justify-content:center; margin: 20px 0px 20px 0;\">\r\n          <v-btn v-show=\"manager == '1'\" @click=\"this.deletePost\" width=\"7vw\" height=\"2.5vw\" color=\"#e1651f\">\r\n            <span class=\"linkText\">Delete</span>\r\n          </v-btn>\r\n          <div style=\"width:5%\"></div>\r\n          <v-btn v-show=\"manager == '1'\" @click=\"this.routeToEditBlog\" width=\"7vw\" height=\"2.5vw\" color=\"#e1651f\">\r\n            <span class=\"linkText\">Edit</span>\r\n          </v-btn>\r\n        </div>\r\n      </v-layout>\r\n      <v-layout align-center justify-center>\r\n        <v-img max-height=\"30vw\" max-width=\"70vw\" :src=\"item.blog.image\" style=\"border-radius:10px;\"></v-img>\r\n      </v-layout>\r\n    </v-container>\r\n\r\n    <div class=\"blog-content\">\r\n      <h3>WRITTEN ON {{ item.blog.date }}</h3>\r\n      <paragraph class=\"text-justify\" style='font-family: \"Roboto\", \"sans-serif\";' :content=\"item.blog.content\">\r\n      </paragraph>\r\n    </div>\r\n\r\n    <div class=\"reply\">\r\n      <h2>Reply</h2>\r\n      <comment v-if=\"user !== null\" :id=\"item.blog.id\" />\r\n      <div v-for=\"comment in comments.slice().reverse().filter(\r\n        (_, index) => index >= (page - 1) * 2 && index <= page * 2 - 1\r\n      )\" :key=\"comment.id\">\r\n        <comment-list-item :comment=\"comment\" />\r\n      </div>\r\n      <div class=\"text-center\">\r\n        <v-pagination class=\"mt-4 mb-8\" v-model=\"modelPage\" color=\"#e1651f\" :length=\"\r\n          comments.length % 2 === 0\r\n            ? Math.floor(comments.length / 2)\r\n            : Math.floor(comments.length / 2) + 1\r\n        \" circle></v-pagination>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Comment from \"../components/Comment.vue\";\r\nimport Paragraph from \"../components/Paragraph.vue\";\r\nimport $ from \"jquery\";\r\nimport CommentListItem from \"../components/CommentListItem.vue\";\r\nexport default {\r\n  components: { Paragraph, Comment, CommentListItem },\r\n  name: \"blogDetail\",\r\n  data() {\r\n    var managerValue = \"0\";\r\n    var userValue = null;\r\n    if (localStorage.getItem(\"User\") != null) {\r\n      managerValue = JSON.parse(localStorage.getItem(\"User\")).manager;\r\n      userValue = JSON.parse(localStorage.getItem(\"User\"));\r\n    }\r\n    return {\r\n      page: 1,\r\n      isLoading: false,\r\n      formData: {\r\n        // Vue Object Data will be convert into Observer\r\n      },\r\n      item: [],\r\n      comments: [],\r\n      numBlog: this.$route.params.id,\r\n      manager: managerValue,\r\n      user: userValue,\r\n    };\r\n  },\r\n  computed: {\r\n    modelPage: {\r\n      get() {\r\n        return this.page;\r\n      },\r\n      set(value) {\r\n        this.page = value;\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    reloadPage() {\r\n      this.$router.push(\"/blog\");\r\n    },\r\n\r\n    routeToEditBlog() {\r\n      this.$router.push({\r\n        name: \"adminEditBlog\",\r\n        params: { id: this.$route.params.id },\r\n      });\r\n    },\r\n\r\n    deletePost() {\r\n      const token = localStorage.getItem(\"UserToken\");\r\n      var __this = this;\r\n\r\n      var settings = {\r\n        url: `${process.env.VUE_APP_API_URL}/admin/delete_blog/{${this.numBlog}}`,\r\n        method: \"POST\",\r\n        timeout: 0,\r\n        data: {},\r\n        headers: {\r\n          \"Bear-Token\": token,\r\n        },\r\n      };\r\n\r\n      $.ajax(settings).then(() => {\r\n        __this.reloadPage();\r\n      });\r\n    },\r\n\r\n    GetBlogData() {\r\n      var settings = {\r\n        url: `${process.env.VUE_APP_API_URL}/blog/{${this.numBlog}}`,\r\n        method: \"GET\",\r\n        timeout: 0,\r\n        data: {},\r\n        headers: {},\r\n      };\r\n\r\n      $.ajax(settings).then((response) => {\r\n        this.isLoading = false;\r\n        const a = JSON.parse(response).response;\r\n        this.item = a;\r\n        this.comments = this.item.comments;\r\n      });\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.isLoading = true;\r\n    this.GetBlogData();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\r\n@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');\r\n\r\n.blog-content {\r\n  padding: 5vw;\r\n  font-family: \"Roboto\", \"sans-serif\";\r\n}\r\n\r\n.reply {\r\n  padding: 0vw 5vw 5vw 5vw;\r\n}\r\n\r\n.linkText {\r\n  color: white;\r\n  font-size: 1vw;\r\n}\r\n\r\n.title {\r\n  min-height: 70px;\r\n}\r\n</style>\r\n"]}]}