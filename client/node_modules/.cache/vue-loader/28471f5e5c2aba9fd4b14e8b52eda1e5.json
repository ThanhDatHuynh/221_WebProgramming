{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminUser.vue","mtime":1655228923730},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBBZG1pbkl0ZW0gZnJvbSAiLi4vY29tcG9uZW50cy9BZG1pbkl0ZW0udnVlIjsKaW1wb3J0IE1vZGFsQ29uZmlybSBmcm9tICIuLi9jb21wb25lbnRzL01vZGFsQ29uZmlybS52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiYWRtaW5Vc2VyIiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBBZG1pbkl0ZW0sCiAgICAgICAgTW9kYWxDb25maXJtLAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNEZWxldGVNb2RhbE9wZW46IGZhbHNlLAogICAgICAgICAgICBpc0Jsb2NrTW9kYWxPcGVuOiBmYWxzZSwKICAgICAgICAgICAgaWRVc2VyOiAwLAogICAgICAgICAgICBpZFVzZXJCbG9jazogMCwKICAgICAgICAgICAgdXNlcnM6IFtdLAogICAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8vIHJlbG9hZFBhZ2UoKSB7CiAgICAgICAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAvLyAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hZG1pbi91c2VyIik7CiAgICAgICAgLy8gfSwKCiAgICAgICAgdG9nZ2xlRGVsZXRlQnRuKGlkKSB7CiAgICAgICAgICAgIHRoaXMuaXNEZWxldGVNb2RhbE9wZW4gPSAhdGhpcy5pc0RlbGV0ZU1vZGFsT3BlbjsKICAgICAgICAgICAgdGhpcy5pZFVzZXIgPSBpZDsKICAgICAgICB9LAoKICAgICAgICB0b2dnbGVCbG9ja0J0bihpZCkgewogICAgICAgICAgICB0aGlzLmlzQmxvY2tNb2RhbE9wZW4gPSAhdGhpcy5pc0Jsb2NrTW9kYWxPcGVuOwogICAgICAgICAgICB0aGlzLmlkVXNlckJsb2NrID0gaWQ7CiAgICAgICAgfSwKCiAgICAgICAgYmxvY2tVc2VyKCkgewogICAgICAgICAgICB2YXIgcmVzdFVSTCA9IHRoaXMudXNlcnNbcGFyc2VJbnQodGhpcy5pZFVzZXJCbG9jaykgLSAxXS5ibG9jayA/ICJ1bmJsb2NrX3VzZXIiIDogImJsb2NrX3VzZXIiOwogICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vJHtyZXN0VVJMfWAsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMudXNlcnNbcGFyc2VJbnQodGhpcy5pZFVzZXJCbG9jaykgLSAxXS5lbWFpbAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQmVhci1Ub2tlbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CiAgICAgICAgICAgICQuYWpheChzZXR0aW5ncykKICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28odGhpcy4kcm91dGVyLmN1cnJlbnQpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZVVzZXIoKSB7CiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICAgICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9hZG1pbi9kZWxldGVfdXNlci97JHt0aGlzLmlkVXNlcn19YCwKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgdGltZW91dDogMCwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQmVhci1Ub2tlbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH07CgogICAgICAgICAgICAkLmFqYXgoc2V0dGluZ3MpCiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKHRoaXMuJHJvdXRlci5jdXJyZW50KQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAoKICAgICAgICBnZXRVc2VyKCkgewogICAgICAgICAgICBjb25zdCBfX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vZ2V0X2Jsb2NrX3VzZXJzYCwKICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAwLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICJCZWFyLVRva2VuIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oIlVzZXJUb2tlbiIpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGJsb2NrVXNlcnMgPSBbXTsKICAgICAgICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgYmxvY2tVc2VycyA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB7CiAgICAgICAgICAgICAgICAgICAgdXJsOiBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSV9VUkx9L2FkbWluL3VzZXJzYCwKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAiQmVhci1Ub2tlbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICQuYWpheChzZXR0aW5ncykKICAgICAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgICAgICBhLmZvckVhY2godXNlciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2tVc2Vycy5maW5kKGJsb2NrVXNlciA9PiB1c2VyLmVtYWlsID09IGJsb2NrVXNlcikgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5ibG9jayA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIuYmxvY2sgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF9fdGhpcy51c2VycyA9IGE7CgoKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKCgogICAgICAgIH0sCiAgICB9LAogICAgYmVmb3JlTW91bnQoKSB7CiAgICAgICAgdGhpcy5nZXRVc2VyKCk7CiAgICB9LAp9Cg=="},{"version":3,"sources":["AdminUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA","file":"AdminUser.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div style=\"min-height:60%;\">\n        <div class=\"d-flex flex-wrap justify-center\">\n            <AdminItem type=\"UserHeader\" :width=\"'100vw'\" :height=\"'100px'\" :imgSize=\"'70px'\"\n                :items=\"['ID', 'Name', 'Email', 'Phone', 'Manager']\" />\n        </div>\n        <div class=\"d-flex flex-wrap justify-center\">\n            <div v-for=\"user in users\" :key=\"user.id\">\n                <AdminItem type=\"User\" :width=\"'100vw'\" :height=\"'100px'\" :imgSize=\"'70px'\"\n                    :items=\"[user.id, user.username, user.email, user.phoneNumber, user.manager, user.block]\"\n                    @onSubmit=\"toggleDeleteBtn(user.id)\" @onBlock=\"toggleBlockBtn(user.id)\" />\n            </div>\n        </div>\n        <ModalConfirm @toggleModalEvent=\"toggleDeleteBtn()\" :isOpen=\"this.isDeleteModalOpen\" :title=\"'Are you sure ?'\"\n            :content=\"'Do you want to delete this user ?'\" @callbackEvent=\"deleteUser\" />\n\n        <ModalConfirm @toggleModalEvent=\"toggleBlockBtn()\" :isOpen=\"this.isBlockModalOpen\" :title=\"'Are you sure ?'\"\n            :content=\"'Do you want to block this user ?'\" @callbackEvent=\"blockUser\" />\n    </div>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport AdminItem from \"../components/AdminItem.vue\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\nexport default {\n    name: \"adminUser\",\n    components: {\n        AdminItem,\n        ModalConfirm,\n    },\n    data() {\n        return {\n            isDeleteModalOpen: false,\n            isBlockModalOpen: false,\n            idUser: 0,\n            idUserBlock: 0,\n            users: [],\n        };\n    },\n    methods: {\n        // reloadPage() {\n        //     window.location.reload();\n        //     window.location.replace(\"http://localhost:8080/admin/user\");\n        // },\n\n        toggleDeleteBtn(id) {\n            this.isDeleteModalOpen = !this.isDeleteModalOpen;\n            this.idUser = id;\n        },\n\n        toggleBlockBtn(id) {\n            this.isBlockModalOpen = !this.isBlockModalOpen;\n            this.idUserBlock = id;\n        },\n\n        blockUser() {\n            var restURL = this.users[parseInt(this.idUserBlock) - 1].block ? \"unblock_user\" : \"block_user\";\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/${restURL}`,\n                method: \"POST\",\n                timeout: 0,\n                data: {\n                    email: this.users[parseInt(this.idUserBlock) - 1].email\n                },\n                headers: {\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                },\n            };\n            $.ajax(settings)\n                .done(() => {\n                    this.$router.go(this.$router.current);\n            });\n        },\n        deleteUser() {\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/delete_user/{${this.idUser}}`,\n                method: \"POST\",\n                timeout: 0,\n                headers: {\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                },\n            };\n\n            $.ajax(settings)\n                .done(() => {\n                    this.$router.go(this.$router.current)\n                })\n        },\n\n        getUser() {\n            const __this = this;\n            var settings = {\n                url: `${process.env.VUE_APP_API_URL}/admin/get_block_users`,\n                method: \"GET\",\n                timeout: 0,\n                headers: {\n                    \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                },\n            };\n            var blockUsers = [];\n            $.ajax(settings).done(function (response) {\n                blockUsers = JSON.parse(response).response;\n                settings = {\n                    url: `${process.env.VUE_APP_API_URL}/admin/users`,\n                    method: \"GET\",\n                    timeout: 0,\n                    headers: {\n                        \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n                    },\n                };\n                $.ajax(settings)\n                    .done(function (response) {\n                        const a = JSON.parse(response).response;\n                        a.forEach(user => {\n                            if (blockUsers.find(blockUser => user.email == blockUser) != undefined) {\n                                user.block = true;\n                            } else {\n                                user.block = false;\n                            }\n                        });\n                        __this.users = a;\n\n\n                    })\n            });\n\n\n        },\n    },\n    beforeMount() {\n        this.getUser();\n    },\n}\n</script>"]}]}