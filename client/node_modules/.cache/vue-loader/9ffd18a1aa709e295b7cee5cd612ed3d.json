{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/ReservationPage.vue?vue&type=style&index=0&id=1f6dc607&scoped=true&lang=css&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/ReservationPage.vue","mtime":1655106226550},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/css-loader/dist/cjs.js","mtime":1654787308129},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1654787310467},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/postcss-loader/src/index.js","mtime":1654787310108},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCB1cmwoImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9T2xlbytTY3JpcHQrU3dhc2grQ2FwcyZkaXNwbGF5PXN3YXAiKTsKLnRpdGxlLXdyYXBwZXIgewogIG1hcmdpbi1ib3R0b206IDQlOwp9Ci5yZXNlcnZhdGlvbi10aXRsZSB7CiAgZm9udC1mYW1pbHk6IE9sZW8gU2NyaXB0IFN3YXNoIENhcHM7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGZvbnQtc2l6ZTogNTAwJTsKICBtYXJnaW46IDIlIDAlIC0xJSAwJTsKfQoucmVzZXJ2YXRpb24tZGVzY3JpcHRpb24gewogIGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsIFJvYm90bywgT3h5Z2VuLAogICAgVWJ1bnR1LCBDYW50YXJlbGwsICJPcGVuIFNhbnMiLCAiSGVsdmV0aWNhIE5ldWUiLCBzYW5zLXNlcmlmOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoucmVzZXJ2YXRpb24tZm9ybS13cmFwcGVyIHsKICB3aWR0aDogMTAwJTsKfQoucmVzZXJ2YXRpb24tcGFnZS13cmFwcGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGZsZXgtd3JhcDogd3JhcDsKICB3aWR0aDogNTAlOwogIG1hcmdpbjogMCBhdXRvOwp9Ci5yZXNlcnZhdGlvbi1ub3RlIHsKICBtYXJnaW46IDIwcHggYXV0bzsKICB3aWR0aDogMTAwJTsKICBib3JkZXItcmFkaXVzOiAyMHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNlZGVkZWQ7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGZsZXgtd3JhcDogd3JhcDsKfQoKLnJlc2VydmF0aW9uLW5vdGUgPiAqIHsKICB3aWR0aDogMTAwJTsKfQoKLm5vdGUtdGl0bGUgewogIGZvbnQtZmFtaWx5OiBPbGVvIFNjcmlwdCBTd2FzaCBDYXBzOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBmb250LXNpemU6IDIwMCU7CiAgbWFyZ2luOiAyMHB4IDAgMjBweCAwOwp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxNzAwcHgpIHsKICAucmVzZXJ2YXRpb24tcGFnZS13cmFwcGVyIHsKICAgIHdpZHRoOiA2MCU7CiAgfQp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxNDAwcHgpIHsKICAucmVzZXJ2YXRpb24tcGFnZS13cmFwcGVyIHsKICAgIHdpZHRoOiA3MCU7CiAgfQp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDEwMDBweCkgewogIC5yZXNlcnZhdGlvbi1wYWdlLXdyYXBwZXIgewogICAgd2lkdGg6IDgwJTsKICB9Cn0KQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogODAwcHgpIHsKICAucmVzZXJ2YXRpb24tcGFnZS13cmFwcGVyIHsKICAgIHdpZHRoOiA5MCU7CiAgfQp9Cg=="},{"version":3,"sources":["ReservationPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReservationPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"reservation-page-wrapper\">\n    <div class=\"title-wrapper\">\n      <div class=\"reservation-title\">\n        <p>Make Reservation</p>\n      </div>\n      <div class=\"reservation-description\">\n        <p>\n          Fish is one of the most wholesome foods that man can eat. In fact,\n          people have been eating fish throughout human.\n        </p>\n      </div>\n    </div>\n    <div class=\"reservation-form-wrapper\">\n      <Form\n        :type=\"'Reservation'\"\n        :data=\"formData\"\n        :errorMessages=\"errorMessages\"\n        @onFormChange=\"handleFormChange\"\n        @onSubmit=\"handleSubmit\"\n      />\n    </div>\n    <div :style=\"style\" class=\"reservation-note\" ref=\"note\">\n      <div ref=\"noteTitle\" class=\"note-title\"></div>\n      <ReservationNote :notes=\"this.notes\" :isSuccess=\"isSuccess\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Form from \"../components/Form.vue\";\nimport $ from \"jquery\";\nimport ReservationNote from \"../components/ReservationNote.vue\";\nimport * as yup from \"yup\";\n\nexport default {\n  name: \"ReservationPage\",\n  components: { Form, ReservationNote },\n  props: {},\n  data() {\n    return {\n      isSuccess: false,\n      formData: {\n        // Vue Object Data will be convert into Observer\n        fullname: \"\",\n        totalPeople: \"\",\n        date: \"\",\n        time: \"\",\n        message: \"\",\n        email: \"\",\n        phone: \"\",\n      },\n      errorMessages: {\n        // Vue Object Data will be convert into Observer\n        fullname: \"\",\n        totalPeople: \"\",\n        date: \"\",\n        time: \"\",\n        message: \"\",\n        email: \"\",\n        phone: \"\",\n      },\n\n      notes: {\n        \"Full name\": \"\",\n        \"Number of persons\": \"\",\n        \"Reservation ID\": \"\",\n        \"Date Time\": \"\",\n        \"Phone Number\": \"\",\n        Email: \"\",\n        \"Your Message\": \"\",\n      },\n      style: {\n        display: \"none\",\n      },\n\n      schema: yup.object().shape({\n        email: yup\n          .string()\n          .email()\n          .label(\"Email\"),\n        phone: yup\n          .string()\n          .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\n        date: yup\n          .string()\n          .matches(\n            /([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))/,\n            \"Date must be of YYYY-MM-DD\"\n          ),\n        time: yup\n          .string()\n          .matches(\n            /(?:[01]\\d|2[0123]):(?:[012345]\\d):(?:[012345]\\d)/gm,\n            \"Time must be of HH:MM:SS\"\n          ),\n        totalPeople: yup\n          .number()\n          .min(1)\n          .max(30)\n          .label(\"Number of persons\"),\n      }),\n    };\n  },\n  methods: {\n    async handleInputValidation({ name, value }) {\n      let validationResult = await this.schema\n        .validate({ [name]: value })\n        .catch((error) => {\n          return error;\n        });\n      if (validationResult.errors) {\n        this.errorMessages[name] = validationResult.errors[0];\n      } else {\n        this.errorMessages[name] = \"\";\n      }\n    },\n\n    handleFormChange(newData) {\n      this.formData[newData.name] = newData.value;\n      this.handleInputValidation(newData);\n    },\n\n    editNotes(response) {\n      if (response) {\n        const {\n          NoP,\n          date,\n          time,\n          description,\n          email,\n          id,\n          name,\n          phoneNumber,\n        } = response;\n        this.notes[\"Full name\"] = name;\n        this.notes[\"Number of persons\"] = NoP;\n        this.notes[\"Reservation ID\"] = id;\n        this.notes[\"Email\"] = email;\n        this.notes[\"Date Time\"] = date + \" at \" + time;\n        this.notes[\"Phone Number\"] = phoneNumber;\n        this.notes[\"Your Message\"] = description;\n        this.isSuccess = true;\n      } else {\n        this.isSuccess = false;\n      }\n    },\n\n    handleSubmit() {\n      var __this = this;\n      const formData = JSON.parse(JSON.stringify(this.formData));\n\n      var settings = {\n        url: `${process.env.VUE_APP_API_URL}/reservation`,\n        method: \"post\",\n        timeout: 0,\n        data: {\n          name: formData.fullname,\n          description: formData.message,\n          NoP: parseInt(formData.totalPeople),\n          date: formData.date,\n          time: formData.time,\n          phoneNumber: formData.phone,\n          email: formData.email,\n        },\n        headers: {\n          // Admin\n          // \"Bear-Token\":\n          //   \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ik1pbmgxMjM0NTYiLCJpZCI6IjEiLCJtYW5hZ2VyIjoiMSIsImV4cCI6MTYzOTIxMTI2OX0.r8CwtgUQcMg8TjstE8EhmbZMFOD6jKB6hT4T-WHyc3A\",\n        },\n      };\n  \n      $.ajax(settings).done(function(response) {\n        response = JSON.parse(JSON.stringify(JSON.parse(response)));\n        __this.$refs.note.style.display = \"flex\";\n        if (response.status == 200) {\n          __this.$refs.noteTitle.innerHTML = \"Your Reservation Is Submitted\";\n          __this.editNotes(response.response);\n        } else {\n          __this.$refs.noteTitle.innerHTML = response.message;\n          __this.editNotes(null);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\n.title-wrapper {\n  margin-bottom: 4%;\n}\n.reservation-title {\n  font-family: Oleo Script Swash Caps;\n  text-align: center;\n  font-size: 500%;\n  margin: 2% 0% -1% 0%;\n}\n.reservation-description {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n  text-align: center;\n}\n.reservation-form-wrapper {\n  width: 100%;\n}\n.reservation-page-wrapper {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  width: 50%;\n  margin: 0 auto;\n}\n.reservation-note {\n  margin: 20px auto;\n  width: 100%;\n  border-radius: 20px;\n  background-color: #ededed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.reservation-note > * {\n  width: 100%;\n}\n\n.note-title {\n  font-family: Oleo Script Swash Caps;\n  text-align: center;\n  font-size: 200%;\n  margin: 20px 0 20px 0;\n}\n\n@media screen and (max-width: 1700px) {\n  .reservation-page-wrapper {\n    width: 60%;\n  }\n}\n\n@media screen and (max-width: 1400px) {\n  .reservation-page-wrapper {\n    width: 70%;\n  }\n}\n@media screen and (max-width: 1000px) {\n  .reservation-page-wrapper {\n    width: 80%;\n  }\n}\n@media screen and (max-width: 800px) {\n  .reservation-page-wrapper {\n    width: 90%;\n  }\n}\n</style>\n"]}]}