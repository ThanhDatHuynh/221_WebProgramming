{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/ReservationPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/ReservationPage.vue","mtime":1655271075855},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGb3JtIGZyb20gIi4uL2NvbXBvbmVudHMvRm9ybS52dWUiOwppbXBvcnQgJCBmcm9tICJqcXVlcnkiOwppbXBvcnQgUmVzZXJ2YXRpb25Ob3RlIGZyb20gIi4uL2NvbXBvbmVudHMvUmVzZXJ2YXRpb25Ob3RlLnZ1ZSI7CmltcG9ydCAqIGFzIHl1cCBmcm9tICJ5dXAiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZXNlcnZhdGlvblBhZ2UiLAogIGNvbXBvbmVudHM6IHsgRm9ybSwgUmVzZXJ2YXRpb25Ob3RlIH0sCiAgcHJvcHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1N1Y2Nlc3M6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIC8vIFZ1ZSBPYmplY3QgRGF0YSB3aWxsIGJlIGNvbnZlcnQgaW50byBPYnNlcnZlcgogICAgICAgIGZ1bGxuYW1lOiAiIiwKICAgICAgICB0b3RhbFBlb3BsZTogIiIsCiAgICAgICAgZGF0ZTogIiIsCiAgICAgICAgdGltZTogIiIsCiAgICAgICAgbWVzc2FnZTogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBob25lOiAiIiwKICAgICAgfSwKICAgICAgZXJyb3JNZXNzYWdlczogewogICAgICAgIC8vIFZ1ZSBPYmplY3QgRGF0YSB3aWxsIGJlIGNvbnZlcnQgaW50byBPYnNlcnZlcgogICAgICAgIGZ1bGxuYW1lOiAiIiwKICAgICAgICB0b3RhbFBlb3BsZTogIiIsCiAgICAgICAgZGF0ZTogIiIsCiAgICAgICAgdGltZTogIiIsCiAgICAgICAgbWVzc2FnZTogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBob25lOiAiIiwKICAgICAgfSwKCiAgICAgIG5vdGVzOiB7CiAgICAgICAgIkZ1bGwgbmFtZSI6ICIiLAogICAgICAgICJOdW1iZXIgb2YgcGVyc29ucyI6ICIiLAogICAgICAgICJSZXNlcnZhdGlvbiBJRCI6ICIiLAogICAgICAgICJEYXRlIFRpbWUiOiAiIiwKICAgICAgICAiUGhvbmUgTnVtYmVyIjogIiIsCiAgICAgICAgRW1haWw6ICIiLAogICAgICAgICJZb3VyIE1lc3NhZ2UiOiAiIiwKICAgICAgfSwKICAgICAgc3R5bGU6IHsKICAgICAgICBkaXNwbGF5OiAibm9uZSIsCiAgICAgIH0sCgogICAgICBzY2hlbWE6IHl1cC5vYmplY3QoKS5zaGFwZSh7CiAgICAgICAgZW1haWw6IHl1cAogICAgICAgICAgLnN0cmluZygpCiAgICAgICAgICAuZW1haWwoKQogICAgICAgICAgLmxhYmVsKCJFbWFpbCIpLAogICAgICAgIHBob25lOiB5dXAKICAgICAgICAgIC5zdHJpbmcoKQogICAgICAgICAgLm1hdGNoZXMoL15bMC05XXsxMH0kLywgIlBob25lIG51bWJlciBtdXN0IGJlIDEwIGRpZ2l0cyIpLAogICAgICAgIGRhdGU6IHl1cAogICAgICAgICAgLnN0cmluZygpLAogICAgICAgIHRpbWU6IHl1cAogICAgICAgICAgLnN0cmluZygpLAogICAgICAgIHRvdGFsUGVvcGxlOiB5dXAKICAgICAgICAgIC5udW1iZXIoKQogICAgICAgICAgLm1pbigxKQogICAgICAgICAgLm1heCgzMCkKICAgICAgICAgIC5sYWJlbCgiTnVtYmVyIG9mIHBlcnNvbnMiKSwKICAgICAgfSksCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgaGFuZGxlSW5wdXRWYWxpZGF0aW9uKHsgbmFtZSwgdmFsdWUgfSkgewogICAgICBsZXQgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMuc2NoZW1hCiAgICAgICAgLnZhbGlkYXRlKHsgW25hbWVdOiB2YWx1ZSB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHJldHVybiBlcnJvcjsKICAgICAgICB9KTsKICAgICAgaWYgKHZhbGlkYXRpb25SZXN1bHQuZXJyb3JzKSB7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VzW25hbWVdID0gdmFsaWRhdGlvblJlc3VsdC5lcnJvcnNbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VzW25hbWVdID0gIiI7CiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlRm9ybUNoYW5nZShuZXdEYXRhKSB7CiAgICAgIHRoaXMuZm9ybURhdGFbbmV3RGF0YS5uYW1lXSA9IG5ld0RhdGEudmFsdWU7CiAgICAgIHRoaXMuaGFuZGxlSW5wdXRWYWxpZGF0aW9uKG5ld0RhdGEpOwogICAgfSwKCiAgICBlZGl0Tm90ZXMocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgTm9QLAogICAgICAgICAgZGF0ZSwKICAgICAgICAgIHRpbWUsCiAgICAgICAgICBkZXNjcmlwdGlvbiwKICAgICAgICAgIGVtYWlsLAogICAgICAgICAgaWQsCiAgICAgICAgICBuYW1lLAogICAgICAgICAgcGhvbmVOdW1iZXIsCiAgICAgICAgfSA9IHJlc3BvbnNlOwogICAgICAgIHRoaXMubm90ZXNbIkZ1bGwgbmFtZSJdID0gbmFtZTsKICAgICAgICB0aGlzLm5vdGVzWyJOdW1iZXIgb2YgcGVyc29ucyJdID0gTm9QOwogICAgICAgIHRoaXMubm90ZXNbIlJlc2VydmF0aW9uIElEIl0gPSBpZDsKICAgICAgICB0aGlzLm5vdGVzWyJFbWFpbCJdID0gZW1haWw7CiAgICAgICAgdGhpcy5ub3Rlc1siRGF0ZSBUaW1lIl0gPSBkYXRlICsgIiBhdCAiICsgdGltZTsKICAgICAgICB0aGlzLm5vdGVzWyJQaG9uZSBOdW1iZXIiXSA9IHBob25lTnVtYmVyOwogICAgICAgIHRoaXMubm90ZXNbIllvdXIgTWVzc2FnZSJdID0gZGVzY3JpcHRpb247CiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX190aGlzID0gdGhpczsKICAgICAgY29uc3QgZm9ybURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybURhdGEpKTsKCiAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vcmVzZXJ2YXRpb25gLAogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgICAgZGF0YTogewogICAgICAgICAgbmFtZTogZm9ybURhdGEuZnVsbG5hbWUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogZm9ybURhdGEubWVzc2FnZSwKICAgICAgICAgIE5vUDogcGFyc2VJbnQoZm9ybURhdGEudG90YWxQZW9wbGUpLAogICAgICAgICAgZGF0ZTogZm9ybURhdGEuZGF0ZSwKICAgICAgICAgIHRpbWU6IGZvcm1EYXRhLnRpbWUsCiAgICAgICAgICBwaG9uZU51bWJlcjogZm9ybURhdGEucGhvbmUsCiAgICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsCiAgICAgICAgfSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAvLyBBZG1pbgogICAgICAgICAgLy8gIkJlYXItVG9rZW4iOgogICAgICAgICAgLy8gICAiZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SjFjMlZ5Ym1GdFpTSTZJazFwYm1neE1qTTBOVFlpTENKcFpDSTZJakVpTENKdFlXNWhaMlZ5SWpvaU1TSXNJbVY0Y0NJNk1UWXpPVEl4TVRJMk9YMC5yOEN3dGdVUWNNZzhUanN0RThFaG1iWk1GT0Q2aktCNmhUNFQtV0h5YzNBIiwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHJlc3BvbnNlKSkpOwogICAgICAgIF9fdGhpcy4kcmVmcy5ub3RlLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIF9fdGhpcy4kcmVmcy5ub3RlVGl0bGUuaW5uZXJIVE1MID0gIllvdXIgUmVzZXJ2YXRpb24gSXMgU3VibWl0dGVkIjsKICAgICAgICAgIF9fdGhpcy5lZGl0Tm90ZXMocmVzcG9uc2UucmVzcG9uc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfX3RoaXMuJHJlZnMubm90ZVRpdGxlLmlubmVySFRNTCA9IHJlc3BvbnNlLm1lc3NhZ2U7CiAgICAgICAgICBfX3RoaXMuZWRpdE5vdGVzKG51bGwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["ReservationPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReservationPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"reservation-page-wrapper\">\n    <div class=\"title-wrapper\">\n      <div class=\"reservation-title\">\n        <p>Make Reservation</p>\n      </div>\n      <div class=\"reservation-description\">\n        <p>\n          Fish is one of the most wholesome foods that man can eat. In fact,\n          people have been eating fish throughout human.\n        </p>\n      </div>\n    </div>\n    <div class=\"reservation-form-wrapper\">\n      <Form :type=\"'Reservation'\" :data=\"formData\" :errorMessages=\"errorMessages\" @onFormChange=\"handleFormChange\"\n        @onSubmit=\"handleSubmit\" />\n    </div>\n    <div :style=\"style\" class=\"reservation-note\" ref=\"note\">\n      <div ref=\"noteTitle\" class=\"note-title\"></div>\n      <ReservationNote :notes=\"this.notes\" :isSuccess=\"isSuccess\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Form from \"../components/Form.vue\";\nimport $ from \"jquery\";\nimport ReservationNote from \"../components/ReservationNote.vue\";\nimport * as yup from \"yup\";\n\nexport default {\n  name: \"ReservationPage\",\n  components: { Form, ReservationNote },\n  props: {},\n  data() {\n    return {\n      isSuccess: false,\n      formData: {\n        // Vue Object Data will be convert into Observer\n        fullname: \"\",\n        totalPeople: \"\",\n        date: \"\",\n        time: \"\",\n        message: \"\",\n        email: \"\",\n        phone: \"\",\n      },\n      errorMessages: {\n        // Vue Object Data will be convert into Observer\n        fullname: \"\",\n        totalPeople: \"\",\n        date: \"\",\n        time: \"\",\n        message: \"\",\n        email: \"\",\n        phone: \"\",\n      },\n\n      notes: {\n        \"Full name\": \"\",\n        \"Number of persons\": \"\",\n        \"Reservation ID\": \"\",\n        \"Date Time\": \"\",\n        \"Phone Number\": \"\",\n        Email: \"\",\n        \"Your Message\": \"\",\n      },\n      style: {\n        display: \"none\",\n      },\n\n      schema: yup.object().shape({\n        email: yup\n          .string()\n          .email()\n          .label(\"Email\"),\n        phone: yup\n          .string()\n          .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\n        date: yup\n          .string(),\n        time: yup\n          .string(),\n        totalPeople: yup\n          .number()\n          .min(1)\n          .max(30)\n          .label(\"Number of persons\"),\n      }),\n    };\n  },\n  methods: {\n    async handleInputValidation({ name, value }) {\n      let validationResult = await this.schema\n        .validate({ [name]: value })\n        .catch((error) => {\n          return error;\n        });\n      if (validationResult.errors) {\n        this.errorMessages[name] = validationResult.errors[0];\n      } else {\n        this.errorMessages[name] = \"\";\n      }\n    },\n\n    handleFormChange(newData) {\n      this.formData[newData.name] = newData.value;\n      this.handleInputValidation(newData);\n    },\n\n    editNotes(response) {\n      if (response) {\n        const {\n          NoP,\n          date,\n          time,\n          description,\n          email,\n          id,\n          name,\n          phoneNumber,\n        } = response;\n        this.notes[\"Full name\"] = name;\n        this.notes[\"Number of persons\"] = NoP;\n        this.notes[\"Reservation ID\"] = id;\n        this.notes[\"Email\"] = email;\n        this.notes[\"Date Time\"] = date + \" at \" + time;\n        this.notes[\"Phone Number\"] = phoneNumber;\n        this.notes[\"Your Message\"] = description;\n        this.isSuccess = true;\n      } else {\n        this.isSuccess = false;\n      }\n    },\n\n    handleSubmit() {\n      var __this = this;\n      const formData = JSON.parse(JSON.stringify(this.formData));\n\n      var settings = {\n        url: `${process.env.VUE_APP_API_URL}/reservation`,\n        method: \"post\",\n        timeout: 0,\n        data: {\n          name: formData.fullname,\n          description: formData.message,\n          NoP: parseInt(formData.totalPeople),\n          date: formData.date,\n          time: formData.time,\n          phoneNumber: formData.phone,\n          email: formData.email,\n        },\n        headers: {\n          // Admin\n          // \"Bear-Token\":\n          //   \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ik1pbmgxMjM0NTYiLCJpZCI6IjEiLCJtYW5hZ2VyIjoiMSIsImV4cCI6MTYzOTIxMTI2OX0.r8CwtgUQcMg8TjstE8EhmbZMFOD6jKB6hT4T-WHyc3A\",\n        },\n      };\n\n      $.ajax(settings).done(function (response) {\n        response = JSON.parse(JSON.stringify(JSON.parse(response)));\n        __this.$refs.note.style.display = \"flex\";\n        if (response.status == 200) {\n          __this.$refs.noteTitle.innerHTML = \"Your Reservation Is Submitted\";\n          __this.editNotes(response.response);\n        } else {\n          __this.$refs.noteTitle.innerHTML = response.message;\n          __this.editNotes(null);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\n\n.title-wrapper {\n  margin-bottom: 4%;\n}\n\n.reservation-title {\n  font-family: Oleo Script Swash Caps;\n  text-align: center;\n  font-size: 500%;\n  margin: 2% 0% -1% 0%;\n}\n\n.reservation-description {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n  text-align: center;\n}\n\n.reservation-form-wrapper {\n  width: 100%;\n}\n\n.reservation-page-wrapper {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  width: 50%;\n  margin: 0 auto;\n}\n\n.reservation-note {\n  margin: 20px auto;\n  width: 100%;\n  border-radius: 20px;\n  background-color: #ededed;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n\n.reservation-note>* {\n  width: 100%;\n}\n\n.note-title {\n  font-family: Roboto, 'san-serif';\n  text-align: center;\n  font-size: 200%;\n  margin: 20px 0 20px 0;\n}\n\n@media screen and (max-width: 1700px) {\n  .reservation-page-wrapper {\n    width: 60%;\n  }\n}\n\n@media screen and (max-width: 1400px) {\n  .reservation-page-wrapper {\n    width: 70%;\n  }\n}\n\n@media screen and (max-width: 1000px) {\n  .reservation-page-wrapper {\n    width: 80%;\n  }\n}\n\n@media screen and (max-width: 800px) {\n  .reservation-page-wrapper {\n    width: 90%;\n  }\n}\n</style>\n"]}]}