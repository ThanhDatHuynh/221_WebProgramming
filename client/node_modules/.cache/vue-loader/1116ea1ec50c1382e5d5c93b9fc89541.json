{"remainingRequest":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/src/pages/AdminMenu.vue","mtime":1654786669533},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/babel-loader/lib/index.js","mtime":1654787234061},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/cache-loader/dist/cjs.js","mtime":1654787234194},{"path":"/home/dathuynh/Workspace/221_Web_Programming/client/node_modules/vue-loader/lib/index.js","mtime":1654787310467}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBBZG1pbkl0ZW0gZnJvbSAiLi4vY29tcG9uZW50cy9BZG1pbkl0ZW0udnVlIjsKaW1wb3J0IE1vZGFsQ29uZmlybSBmcm9tICIuLi9jb21wb25lbnRzL01vZGFsQ29uZmlybS52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkbWluTWVudSIsCiAgY29tcG9uZW50czogewogICAgQWRtaW5JdGVtLAogICAgTW9kYWxDb25maXJtLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzRGVsZXRlTW9kYWxPcGVuOiBmYWxzZSwKICAgICAgaWREaXNoOiAwLAogICAgICBkaXNoZXM6IFtdLAogICAgICBwYWdlOiAxLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgbW9kZWxQYWdlOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5wYWdlOwogICAgICB9LAogICAgICBzZXQodmFsdWUpIHsKICAgICAgICB0aGlzLnBhZ2UgPSB2YWx1ZTsKICAgICAgfSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyByZWxvYWRQYWdlKCkgewogICAgLy8gICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAvLyAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCJodHRwOi8vbG9jYWxob3N0OjgwODAvYWRtaW4vbWVudSIpOwogICAgLy8gfSwKICAgIHRvZ2dsZUFkZEJ0bigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiYWRtaW5Vc2VyIiB9KTsKICAgIH0sCgogICAgdG9nZ2xlRGVsZXRlQnRuKGlkKSB7CiAgICAgIHRoaXMuaXNEZWxldGVNb2RhbE9wZW4gPSAhdGhpcy5pc0RlbGV0ZU1vZGFsT3BlbjsKICAgICAgdGhpcy5pZERpc2ggPSBpZDsKICAgIH0sCgogICAgZGVsZXRlRGlzaCgpIHsKICAgICAgLy8gdmFyIF9fdGhpcyA9IHRoaXM7CiAgICAgIHZhciBzZXR0aW5ncyA9IHsKICAgICAgICB1cmw6IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJX1VSTH0vYWRtaW4vZGVsZXRlX2Rpc2gveyR7dGhpcy5pZERpc2h9fWAsCiAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgdGltZW91dDogMCwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQmVhci1Ub2tlbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJVc2VyVG9rZW4iKSwKICAgICAgICB9LAogICAgICB9OwoKICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKCgpID0+IHsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28odGhpcy4kcm91dGVyLmN1cnJlbnQpOwogICAgICB9KTsKICAgIH0sCgogICAgZ2V0TWVudSgpIHsKICAgICAgY29uc3QgX190aGlzID0gdGhpczsKICAgICAgdmFyIHNldHRpbmdzID0gewogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9tZW51YCwKICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgIHRpbWVvdXQ6IDAsCiAgICAgIH07CgogICAgICAkLmFqYXgoc2V0dGluZ3MpLmRvbmUoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc3QgYSA9IEpTT04ucGFyc2UocmVzcG9uc2UpLnJlc3BvbnNlOwogICAgICAgIF9fdGhpcy5kaXNoZXMgPSBhOwogICAgICB9KTsKICAgIH0sCiAgfSwKICBiZWZvcmVNb3VudCgpIHsKICAgIHRoaXMuZ2V0TWVudSgpOwogIH0sCn07Cg=="},{"version":3,"sources":["AdminMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AdminMenu.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex flex-wrap justify-center\">\n      <AdminItem\n        type=\"DishHeader\"\n        :width=\"'95vw'\"\n        :height=\"'100px'\"\n        :imgSize=\"'70px'\"\n        :items=\"['ID', 'Name', 'Image', 'Description']\"\n        @onSubmit=\"toggleAddBtn\"\n        to=\"/admin/user\"\n      />\n    </div>\n    <div class=\"d-flex flex-wrap justify-center\">\n      <div\n        v-for=\"dish in dishes.filter(\n          (_, index) => index >= (page - 1) * 6 && index <= page * 6 - 1\n        )\"\n        :key=\"dish.id\"\n      >\n        <AdminItem\n          type=\"Dish\"\n          :width=\"'95vw'\"\n          :height=\"'100px'\"\n          :imgSize=\"'70px'\"\n          :items=\"[dish.id, dish.name, dish.image, dish.description]\"\n          @onSubmit=\"toggleDeleteBtn(dish.id)\"\n        />\n      </div>\n    </div>\n    <div class=\"text-center\">\n      <v-pagination\n        class=\"mt-4 mb-8\"\n        v-model=\"modelPage\"\n        color=\"#e1651f\"\n        :length=\"\n          dishes.length % 6 === 0\n            ? Math.floor(dishes.length / 6)\n            : Math.floor(dishes.length / 6) + 1\n        \"\n        circle\n      ></v-pagination>\n    </div>\n    <ModalConfirm\n      @toggleModalEvent=\"toggleDeleteBtn()\"\n      :isOpen=\"this.isDeleteModalOpen\"\n      :title=\"'Are you sure ?'\"\n      :content=\"'Do you want to delete this dish ?'\"\n      @callbackEvent=\"deleteDish\"\n    />\n  </div>\n</template>\n\n<script>\nimport $ from \"jquery\";\nimport AdminItem from \"../components/AdminItem.vue\";\nimport ModalConfirm from \"../components/ModalConfirm.vue\";\nexport default {\n  name: \"adminMenu\",\n  components: {\n    AdminItem,\n    ModalConfirm,\n  },\n  data() {\n    return {\n      isDeleteModalOpen: false,\n      idDish: 0,\n      dishes: [],\n      page: 1,\n    };\n  },\n\n  computed: {\n    modelPage: {\n      get() {\n        return this.page;\n      },\n      set(value) {\n        this.page = value;\n      },\n    },\n  },\n  methods: {\n    // reloadPage() {\n    //   window.location.reload();\n    //   window.location.replace(\"http://localhost:8080/admin/menu\");\n    // },\n    toggleAddBtn() {\n      this.$router.push({ name: \"adminUser\" });\n    },\n\n    toggleDeleteBtn(id) {\n      this.isDeleteModalOpen = !this.isDeleteModalOpen;\n      this.idDish = id;\n    },\n\n    deleteDish() {\n      // var __this = this;\n      var settings = {\n        url: `${process.env.VUE_APP_API_URL}/admin/delete_dish/{${this.idDish}}`,\n        method: \"POST\",\n        timeout: 0,\n        headers: {\n          \"Bear-Token\": localStorage.getItem(\"UserToken\"),\n        },\n      };\n\n      $.ajax(settings).done(() => {\n        this.$router.go(this.$router.current);\n      });\n    },\n\n    getMenu() {\n      const __this = this;\n      var settings = {\n        url: `${process.env.VUE_APP_API_URL}/menu`,\n        method: \"GET\",\n        timeout: 0,\n      };\n\n      $.ajax(settings).done(function (response) {\n        const a = JSON.parse(response).response;\n        __this.dishes = a;\n      });\n    },\n  },\n  beforeMount() {\n    this.getMenu();\n  },\n};\n</script>\n"]}]}