{"remainingRequest":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\ReservationPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\src\\pages\\ReservationPage.vue","mtime":1655576070895},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1655541733784},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655541733801},{"path":"D:\\Workspace\\Web\\221_Web_Programming\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655541769422}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRm9ybSBmcm9tICIuLi9jb21wb25lbnRzL0Zvcm0udnVlIjsNCmltcG9ydCAkIGZyb20gImpxdWVyeSI7DQppbXBvcnQgUmVzZXJ2YXRpb25Ob3RlIGZyb20gIi4uL2NvbXBvbmVudHMvUmVzZXJ2YXRpb25Ob3RlLnZ1ZSI7DQppbXBvcnQgKiBhcyB5dXAgZnJvbSAieXVwIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUmVzZXJ2YXRpb25QYWdlIiwNCiAgY29tcG9uZW50czogeyBGb3JtLCBSZXNlcnZhdGlvbk5vdGUgfSwNCiAgcHJvcHM6IHt9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpc1N1Y2Nlc3M6IGZhbHNlLA0KICAgICAgZm9ybURhdGE6IHsNCiAgICAgICAgLy8gVnVlIE9iamVjdCBEYXRhIHdpbGwgYmUgY29udmVydCBpbnRvIE9ic2VydmVyDQogICAgICAgIGZ1bGxuYW1lOiAiIiwNCiAgICAgICAgdG90YWxQZW9wbGU6ICIiLA0KICAgICAgICBkYXRlOiAiIiwNCiAgICAgICAgdGltZTogIiIsDQogICAgICAgIG1lc3NhZ2U6ICIiLA0KICAgICAgICBlbWFpbDogIiIsDQogICAgICAgIHBob25lOiAiIiwNCiAgICAgIH0sDQogICAgICBlcnJvck1lc3NhZ2VzOiB7DQogICAgICAgIC8vIFZ1ZSBPYmplY3QgRGF0YSB3aWxsIGJlIGNvbnZlcnQgaW50byBPYnNlcnZlcg0KICAgICAgICBmdWxsbmFtZTogIiIsDQogICAgICAgIHRvdGFsUGVvcGxlOiAiIiwNCiAgICAgICAgZGF0ZTogIiIsDQogICAgICAgIHRpbWU6ICIiLA0KICAgICAgICBtZXNzYWdlOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICBwaG9uZTogIiIsDQogICAgICB9LA0KDQogICAgICBub3Rlczogew0KICAgICAgICAiRnVsbCBuYW1lIjogIiIsDQogICAgICAgICJOdW1iZXIgb2YgcGVyc29ucyI6ICIiLA0KICAgICAgICAiUmVzZXJ2YXRpb24gSUQiOiAiIiwNCiAgICAgICAgIkRhdGUgVGltZSI6ICIiLA0KICAgICAgICAiUGhvbmUgTnVtYmVyIjogIiIsDQogICAgICAgIEVtYWlsOiAiIiwNCiAgICAgICAgIllvdXIgTWVzc2FnZSI6ICIiLA0KICAgICAgfSwNCiAgICAgIHN0eWxlOiB7DQogICAgICAgIGRpc3BsYXk6ICJub25lIiwNCiAgICAgIH0sDQoNCiAgICAgIHNjaGVtYTogeXVwLm9iamVjdCgpLnNoYXBlKHsNCiAgICAgICAgZW1haWw6IHl1cA0KICAgICAgICAgIC5zdHJpbmcoKQ0KICAgICAgICAgIC5lbWFpbCgpDQogICAgICAgICAgLmxhYmVsKCJFbWFpbCIpLA0KICAgICAgICBwaG9uZTogeXVwDQogICAgICAgICAgLnN0cmluZygpDQogICAgICAgICAgLm1hdGNoZXMoL15bMC05XXsxMH0kLywgIlBob25lIG51bWJlciBtdXN0IGJlIDEwIGRpZ2l0cyIpLA0KICAgICAgICBkYXRlOiB5dXAuc3RyaW5nKCksDQogICAgICAgIHRpbWU6IHl1cC5zdHJpbmcoKSwNCiAgICAgICAgdG90YWxQZW9wbGU6IHl1cA0KICAgICAgICAgIC5udW1iZXIoKQ0KICAgICAgICAgIC5taW4oMSkNCiAgICAgICAgICAubWF4KDMwKQ0KICAgICAgICAgIC5sYWJlbCgiTnVtYmVyIG9mIHBlcnNvbnMiKSwNCiAgICAgIH0pLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBoYW5kbGVJbnB1dFZhbGlkYXRpb24oeyBuYW1lLCB2YWx1ZSB9KSB7DQogICAgICBsZXQgdmFsaWRhdGlvblJlc3VsdCA9IGF3YWl0IHRoaXMuc2NoZW1hDQogICAgICAgIC52YWxpZGF0ZSh7IFtuYW1lXTogdmFsdWUgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIHJldHVybiBlcnJvcjsNCiAgICAgICAgfSk7DQogICAgICBpZiAodmFsaWRhdGlvblJlc3VsdC5lcnJvcnMpIHsNCiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VzW25hbWVdID0gdmFsaWRhdGlvblJlc3VsdC5lcnJvcnNbMF07DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVycm9yTWVzc2FnZXNbbmFtZV0gPSAiIjsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgaGFuZGxlRm9ybUNoYW5nZShuZXdEYXRhKSB7DQogICAgICB0aGlzLmZvcm1EYXRhW25ld0RhdGEubmFtZV0gPSBuZXdEYXRhLnZhbHVlOw0KICAgICAgdGhpcy5oYW5kbGVJbnB1dFZhbGlkYXRpb24obmV3RGF0YSk7DQogICAgfSwNCg0KICAgIGVkaXROb3RlcyhyZXNwb25zZSkgew0KICAgICAgaWYgKHJlc3BvbnNlKSB7DQogICAgICAgIGNvbnN0IHsNCiAgICAgICAgICBOb1AsDQogICAgICAgICAgZGF0ZSwNCiAgICAgICAgICB0aW1lLA0KICAgICAgICAgIGRlc2NyaXB0aW9uLA0KICAgICAgICAgIGVtYWlsLA0KICAgICAgICAgIGlkLA0KICAgICAgICAgIG5hbWUsDQogICAgICAgICAgcGhvbmVOdW1iZXIsDQogICAgICAgIH0gPSByZXNwb25zZTsNCiAgICAgICAgdGhpcy5ub3Rlc1siRnVsbCBuYW1lIl0gPSBuYW1lOw0KICAgICAgICB0aGlzLm5vdGVzWyJOdW1iZXIgb2YgcGVyc29ucyJdID0gTm9QOw0KICAgICAgICB0aGlzLm5vdGVzWyJSZXNlcnZhdGlvbiBJRCJdID0gaWQ7DQogICAgICAgIHRoaXMubm90ZXNbIkVtYWlsIl0gPSBlbWFpbDsNCiAgICAgICAgdGhpcy5ub3Rlc1siRGF0ZSBUaW1lIl0gPSBkYXRlICsgIiBhdCAiICsgdGltZTsNCiAgICAgICAgdGhpcy5ub3Rlc1siUGhvbmUgTnVtYmVyIl0gPSBwaG9uZU51bWJlcjsNCiAgICAgICAgdGhpcy5ub3Rlc1siWW91ciBNZXNzYWdlIl0gPSBkZXNjcmlwdGlvbjsNCiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgaGFuZGxlU3VibWl0KCkgew0KICAgICAgdmFyIF9fdGhpcyA9IHRoaXM7DQogICAgICBjb25zdCBmb3JtRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtRGF0YSkpOw0KDQogICAgICB2YXIgc2V0dGluZ3MgPSB7DQogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMfS9yZXNlcnZhdGlvbmAsDQogICAgICAgIG1ldGhvZDogInBvc3QiLA0KICAgICAgICB0aW1lb3V0OiAwLA0KICAgICAgICBkYXRhOiB7DQogICAgICAgICAgbmFtZTogZm9ybURhdGEuZnVsbG5hbWUsDQogICAgICAgICAgZGVzY3JpcHRpb246IGZvcm1EYXRhLm1lc3NhZ2UsDQogICAgICAgICAgTm9QOiBwYXJzZUludChmb3JtRGF0YS50b3RhbFBlb3BsZSksDQogICAgICAgICAgZGF0ZTogZm9ybURhdGEuZGF0ZSwNCiAgICAgICAgICB0aW1lOiBmb3JtRGF0YS50aW1lLA0KICAgICAgICAgIHBob25lTnVtYmVyOiBmb3JtRGF0YS5waG9uZSwNCiAgICAgICAgICBlbWFpbDogZm9ybURhdGEuZW1haWwsDQogICAgICAgIH0sDQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAvLyBBZG1pbg0KICAgICAgICAgIC8vICJCZWFyLVRva2VuIjoNCiAgICAgICAgICAvLyAgICJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKMWMyVnlibUZ0WlNJNklrMXBibWd4TWpNME5UWWlMQ0pwWkNJNklqRWlMQ0p0WVc1aFoyVnlJam9pTVNJc0ltVjRjQ0k2TVRZek9USXhNVEkyT1gwLnI4Q3d0Z1VRY01nOFRqc3RFOEVobWJaTUZPRDZqS0I2aFQ0VC1XSHljM0EiLA0KICAgICAgICB9LA0KICAgICAgfTsNCg0KICAgICAgJC5hamF4KHNldHRpbmdzKS5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7DQogICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKHJlc3BvbnNlKSkpOw0KICAgICAgICBfX3RoaXMuJHJlZnMubm90ZS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOw0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgIF9fdGhpcy4kcmVmcy5ub3RlVGl0bGUuaW5uZXJIVE1MID0gIllvdXIgUmVzZXJ2YXRpb24gSXMgU3VibWl0dGVkIjsNCiAgICAgICAgICBfX3RoaXMuZWRpdE5vdGVzKHJlc3BvbnNlLnJlc3BvbnNlKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBfX3RoaXMuJHJlZnMubm90ZVRpdGxlLmlubmVySFRNTCA9IHJlc3BvbnNlLm1lc3NhZ2U7DQogICAgICAgICAgX190aGlzLmVkaXROb3RlcyhudWxsKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["ReservationPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReservationPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div class=\"bg-4\">\r\n    <div class=\"reservation-page-wrapper\">\r\n      <div class=\"title-wrapper\">\r\n        <div class=\"reservation-title\">\r\n          <p>Make Reservation</p>\r\n        </div>\r\n        <div class=\"reservation-description\">\r\n          <p>\r\n            Fish is one of the most wholesome foods that man can eat. In fact,\r\n            people have been eating fish throughout human.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div class=\"reservation-form-wrapper\">\r\n        <Form\r\n          :type=\"'Reservation'\"\r\n          :data=\"formData\"\r\n          :errorMessages=\"errorMessages\"\r\n          @onFormChange=\"handleFormChange\"\r\n          @onSubmit=\"handleSubmit\"\r\n        />\r\n      </div>\r\n      <div :style=\"style\" class=\"reservation-note\" ref=\"note\">\r\n        <div ref=\"noteTitle\" class=\"note-title\"></div>\r\n        <ReservationNote :notes=\"this.notes\" :isSuccess=\"isSuccess\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Form from \"../components/Form.vue\";\r\nimport $ from \"jquery\";\r\nimport ReservationNote from \"../components/ReservationNote.vue\";\r\nimport * as yup from \"yup\";\r\n\r\nexport default {\r\n  name: \"ReservationPage\",\r\n  components: { Form, ReservationNote },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      isSuccess: false,\r\n      formData: {\r\n        // Vue Object Data will be convert into Observer\r\n        fullname: \"\",\r\n        totalPeople: \"\",\r\n        date: \"\",\r\n        time: \"\",\r\n        message: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n      },\r\n      errorMessages: {\r\n        // Vue Object Data will be convert into Observer\r\n        fullname: \"\",\r\n        totalPeople: \"\",\r\n        date: \"\",\r\n        time: \"\",\r\n        message: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n      },\r\n\r\n      notes: {\r\n        \"Full name\": \"\",\r\n        \"Number of persons\": \"\",\r\n        \"Reservation ID\": \"\",\r\n        \"Date Time\": \"\",\r\n        \"Phone Number\": \"\",\r\n        Email: \"\",\r\n        \"Your Message\": \"\",\r\n      },\r\n      style: {\r\n        display: \"none\",\r\n      },\r\n\r\n      schema: yup.object().shape({\r\n        email: yup\r\n          .string()\r\n          .email()\r\n          .label(\"Email\"),\r\n        phone: yup\r\n          .string()\r\n          .matches(/^[0-9]{10}$/, \"Phone number must be 10 digits\"),\r\n        date: yup.string(),\r\n        time: yup.string(),\r\n        totalPeople: yup\r\n          .number()\r\n          .min(1)\r\n          .max(30)\r\n          .label(\"Number of persons\"),\r\n      }),\r\n    };\r\n  },\r\n  methods: {\r\n    async handleInputValidation({ name, value }) {\r\n      let validationResult = await this.schema\r\n        .validate({ [name]: value })\r\n        .catch((error) => {\r\n          return error;\r\n        });\r\n      if (validationResult.errors) {\r\n        this.errorMessages[name] = validationResult.errors[0];\r\n      } else {\r\n        this.errorMessages[name] = \"\";\r\n      }\r\n    },\r\n\r\n    handleFormChange(newData) {\r\n      this.formData[newData.name] = newData.value;\r\n      this.handleInputValidation(newData);\r\n    },\r\n\r\n    editNotes(response) {\r\n      if (response) {\r\n        const {\r\n          NoP,\r\n          date,\r\n          time,\r\n          description,\r\n          email,\r\n          id,\r\n          name,\r\n          phoneNumber,\r\n        } = response;\r\n        this.notes[\"Full name\"] = name;\r\n        this.notes[\"Number of persons\"] = NoP;\r\n        this.notes[\"Reservation ID\"] = id;\r\n        this.notes[\"Email\"] = email;\r\n        this.notes[\"Date Time\"] = date + \" at \" + time;\r\n        this.notes[\"Phone Number\"] = phoneNumber;\r\n        this.notes[\"Your Message\"] = description;\r\n        this.isSuccess = true;\r\n      } else {\r\n        this.isSuccess = false;\r\n      }\r\n    },\r\n\r\n    handleSubmit() {\r\n      var __this = this;\r\n      const formData = JSON.parse(JSON.stringify(this.formData));\r\n\r\n      var settings = {\r\n        url: `${process.env.VUE_APP_API_URL}/reservation`,\r\n        method: \"post\",\r\n        timeout: 0,\r\n        data: {\r\n          name: formData.fullname,\r\n          description: formData.message,\r\n          NoP: parseInt(formData.totalPeople),\r\n          date: formData.date,\r\n          time: formData.time,\r\n          phoneNumber: formData.phone,\r\n          email: formData.email,\r\n        },\r\n        headers: {\r\n          // Admin\r\n          // \"Bear-Token\":\r\n          //   \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ik1pbmgxMjM0NTYiLCJpZCI6IjEiLCJtYW5hZ2VyIjoiMSIsImV4cCI6MTYzOTIxMTI2OX0.r8CwtgUQcMg8TjstE8EhmbZMFOD6jKB6hT4T-WHyc3A\",\r\n        },\r\n      };\r\n\r\n      $.ajax(settings).done(function(response) {\r\n        response = JSON.parse(JSON.stringify(JSON.parse(response)));\r\n        __this.$refs.note.style.display = \"flex\";\r\n        if (response.status == 200) {\r\n          __this.$refs.noteTitle.innerHTML = \"Your Reservation Is Submitted\";\r\n          __this.editNotes(response.response);\r\n        } else {\r\n          __this.$refs.noteTitle.innerHTML = response.message;\r\n          __this.editNotes(null);\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(\"https://fonts.googleapis.com/css2?family=Oleo+Script+Swash+Caps&display=swap\");\r\n\r\n.title-wrapper {\r\n  margin-bottom: 4%;\r\n}\r\n\r\n.reservation-title {\r\n  font-family: Oleo Script Swash Caps;\r\n  text-align: center;\r\n  font-size: 500%;\r\n  margin: 2% 0% -1% 0%;\r\n}\r\n\r\n.reservation-description {\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n  text-align: center;\r\n}\r\n\r\n.reservation-form-wrapper {\r\n  width: 100%;\r\n}\r\n\r\n.reservation-page-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n  width: 50%;\r\n  margin: 0 auto;\r\n  animation: example 700ms ease-out;\r\n  animation-fill-mode: backwards;\r\n  transition: transform 0.1.5s; /* Animation */\r\n}\r\n@keyframes example {\r\n  from {\r\n    opacity: 0;\r\n    transform: scale(0.3);\r\n    filter: hue-rotate(180deg);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n    filter: hue-rotate(0deg);\r\n  }\r\n}\r\n\r\n.reservation-note {\r\n  margin: 20px auto;\r\n  width: 100%;\r\n  border-radius: 20px;\r\n  background-color: #ededed;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.reservation-note > * {\r\n  width: 100%;\r\n}\r\n\r\n.note-title {\r\n  font-family: Roboto, \"san-serif\";\r\n  text-align: center;\r\n  font-size: 200%;\r\n  margin: 20px 0 20px 0;\r\n}\r\n\r\n@media screen and (max-width: 1700px) {\r\n  .reservation-page-wrapper {\r\n    width: 60%;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 1400px) {\r\n  .reservation-page-wrapper {\r\n    width: 70%;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 1000px) {\r\n  .reservation-page-wrapper {\r\n    width: 80%;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 800px) {\r\n  .reservation-page-wrapper {\r\n    width: 90%;\r\n  }\r\n}\r\n</style>\r\n"]}]}